function startHeader(){var a=ThreeUtils.scenePresets("onlyShader");a.init.material.shader.fragment="header";var b=ThreeUtils.createScene("header-canvas",a);b.start()}if(function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=!!a&&"length"in a&&a.length,c=fa.type(a);return"function"===c||fa.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(fa.isFunction(b))return fa.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return fa.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(pa.test(b))return fa.filter(b,a,c);b=fa.filter(b,a)}return fa.grep(a,function(a){return _.call(b,a)>-1!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b={};return fa.each(a.match(va)||[],function(a,c){b[c]=!0}),b}function g(){X.removeEventListener("DOMContentLoaded",g),a.removeEventListener("load",g),fa.ready()}function h(){this.expando=fa.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ca,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Ba.test(c)?fa.parseJSON(c):c}catch(e){}Aa.set(a,b,c)}else c=void 0;return c}function j(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return fa.css(a,b,"")},i=h(),j=c&&c[3]||(fa.cssNumber[b]?"":"px"),k=(fa.cssNumber[b]||"px"!==j&&+i)&&Ea.exec(fa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,fa.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function k(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&fa.nodeName(a,b)?fa.merge([a],c):c}function l(a,b){for(var c=0,d=a.length;d>c;c++)za.set(a[c],"globalEval",!b||za.get(b[c],"globalEval"))}function m(a,b,c,d,e){for(var f,g,h,i,j,m,n=b.createDocumentFragment(),o=[],p=0,q=a.length;q>p;p++)if(f=a[p],f||0===f)if("object"===fa.type(f))fa.merge(o,f.nodeType?[f]:f);else if(La.test(f)){for(g=g||n.appendChild(b.createElement("div")),h=(Ia.exec(f)||["",""])[1].toLowerCase(),i=Ka[h]||Ka._default,g.innerHTML=i[1]+fa.htmlPrefilter(f)+i[2],m=i[0];m--;)g=g.lastChild;fa.merge(o,g.childNodes),g=n.firstChild,g.textContent=""}else o.push(b.createTextNode(f));for(n.textContent="",p=0;f=o[p++];)if(d&&fa.inArray(f,d)>-1)e&&e.push(f);else if(j=fa.contains(f.ownerDocument,f),g=k(n.appendChild(f),"script"),j&&l(g),c)for(m=0;f=g[m++];)Ja.test(f.type||"")&&c.push(f);return n}function n(){return!0}function o(){return!1}function p(){try{return X.activeElement}catch(a){}}function q(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)q(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=o;else if(!e)return a;return 1===f&&(g=e,e=function(a){return fa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=fa.guid++)),a.each(function(){fa.event.add(this,b,e,d,c)})}function r(a,b){return fa.nodeName(a,"table")&&fa.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function s(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function t(a){var b=Sa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function u(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(za.hasData(a)&&(f=za.access(a),g=za.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)fa.event.add(b,e,j[e][c])}Aa.hasData(a)&&(h=Aa.access(a),i=fa.extend({},h),Aa.set(b,i))}}function v(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ha.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function w(a,b,c,d){b=Z.apply([],b);var e,f,g,h,i,j,l=0,n=a.length,o=n-1,p=b[0],q=fa.isFunction(p);if(q||n>1&&"string"==typeof p&&!da.checkClone&&Ra.test(p))return a.each(function(e){var f=a.eq(e);q&&(b[0]=p.call(this,e,f.html())),w(f,b,c,d)});if(n&&(e=m(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(g=fa.map(k(e,"script"),s),h=g.length;n>l;l++)i=e,l!==o&&(i=fa.clone(i,!0,!0),h&&fa.merge(g,k(i,"script"))),c.call(a[l],i,l);if(h)for(j=g[g.length-1].ownerDocument,fa.map(g,t),l=0;h>l;l++)i=g[l],Ja.test(i.type||"")&&!za.access(i,"globalEval")&&fa.contains(j,i)&&(i.src?fa._evalUrl&&fa._evalUrl(i.src):fa.globalEval(i.textContent.replace(Ta,"")))}return a}function x(a,b,c){for(var d,e=b?fa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||fa.cleanData(k(d)),d.parentNode&&(c&&fa.contains(d.ownerDocument,d)&&l(k(d,"script")),d.parentNode.removeChild(d));return a}function y(a,b){var c=fa(b.createElement(a)).appendTo(b.body),d=fa.css(c[0],"display");return c.detach(),d}function z(a){var b=X,c=Va[a];return c||(c=y(a,b),"none"!==c&&c||(Ua=(Ua||fa("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ua[0].contentDocument,b.write(),b.close(),c=y(a,b),Ua.detach()),Va[a]=c),c}function A(a,b,c){var d,e,f,g,h=a.style;return c=c||Ya(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||fa.contains(a.ownerDocument,a)||(g=fa.style(a,b)),c&&!da.pixelMarginRight()&&Xa.test(g)&&Wa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function B(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function C(a){if(a in db)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=cb.length;c--;)if(a=cb[c]+b,a in db)return a}function D(a,b,c){var d=Ea.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=fa.css(a,c+Fa[f],!0,e)),d?("content"===c&&(g-=fa.css(a,"padding"+Fa[f],!0,e)),"margin"!==c&&(g-=fa.css(a,"border"+Fa[f]+"Width",!0,e))):(g+=fa.css(a,"padding"+Fa[f],!0,e),"padding"!==c&&(g+=fa.css(a,"border"+Fa[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ya(a),g="border-box"===fa.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=A(a,b,f),(0>e||null==e)&&(e=a.style[b]),Xa.test(e))return e;d=g&&(da.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=za.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ga(d)&&(f[g]=za.access(d,"olddisplay",z(d.nodeName)))):(e=Ga(d),"none"===c&&e||za.set(d,"olddisplay",e?c:fa.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function H(a,b,c,d,e){return new H.prototype.init(a,b,c,d,e)}function I(){return a.setTimeout(function(){eb=void 0}),eb=fa.now()}function J(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=Fa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function K(a,b,c){for(var d,e=(N.tweeners[b]||[]).concat(N.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function L(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ga(a),p=za.get(a,"fxshow");c.queue||(h=fa._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,fa.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=fa.css(a,"display"),k="none"===j?za.get(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===fa.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],gb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||fa.style(a,d)}else j=void 0;if(fa.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=za.access(a,"fxshow",{}),f&&(p.hidden=!o),o?fa(a).show():l.done(function(){fa(a).hide()}),l.done(function(){var b;za.remove(a,"fxshow");for(b in m)fa.style(a,b,m[b])});for(d in m)g=K(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function M(a,b){var c,d,e,f,g;for(c in a)if(d=fa.camelCase(c),e=b[d],f=a[c],fa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=fa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function N(a,b,c){var d,e,f=0,g=N.prefilters.length,h=fa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=eb||I(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:fa.extend({},b),opts:fa.extend(!0,{specialEasing:{},easing:fa.easing._default},c),originalProperties:b,originalOptions:c,startTime:eb||I(),duration:c.duration,tweens:[],createTween:function(b,c){var d=fa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(M(k,j.opts.specialEasing);g>f;f++)if(d=N.prefilters[f].call(j,a,k,j.opts))return fa.isFunction(d.stop)&&(fa._queueHooks(j.elem,j.opts.queue).stop=fa.proxy(d.stop,d)),d;return fa.map(k,K,j),fa.isFunction(j.opts.start)&&j.opts.start.call(a,j),fa.fx.timer(fa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a){return a.getAttribute&&a.getAttribute("class")||""}function P(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(va)||[];if(fa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Q(a,b,c,d){function e(h){var i;return f[h]=!0,fa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Ab;return e(b.dataTypes[0])||!f["*"]&&e("*")}function R(a,b){var c,d,e=fa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&fa.extend(!0,a,d),a}function S(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function T(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function U(a,b,c,d){var e;if(fa.isArray(b))fa.each(b,function(b,e){c||Eb.test(a)?d(a,e):U(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==fa.type(b))d(a,b);else for(e in b)U(a+"["+e+"]",b[e],c,d)}function V(a){return fa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var W=[],X=a.document,Y=W.slice,Z=W.concat,$=W.push,_=W.indexOf,aa={},ba=aa.toString,ca=aa.hasOwnProperty,da={},ea="2.2.4",fa=function(a,b){return new fa.fn.init(a,b)},ga=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ha=/^-ms-/,ia=/-([\da-z])/gi,ja=function(a,b){return b.toUpperCase()};fa.fn=fa.prototype={jquery:ea,constructor:fa,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Y.call(this)},pushStack:function(a){var b=fa.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return fa.each(this,a)},map:function(a){return this.pushStack(fa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:$,sort:W.sort,splice:W.splice},fa.extend=fa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||fa.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(fa.isPlainObject(d)||(e=fa.isArray(d)))?(e?(e=!1,f=c&&fa.isArray(c)?c:[]):f=c&&fa.isPlainObject(c)?c:{},g[b]=fa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},fa.extend({expando:"jQuery"+(ea+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===fa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!fa.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==fa.type(a)||a.nodeType||fa.isWindow(a))return!1;if(a.constructor&&!ca.call(a,"constructor")&&!ca.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||ca.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?aa[ba.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=fa.trim(a),a&&(1===a.indexOf("use strict")?(b=X.createElement("script"),b.text=a,X.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ha,"ms-").replace(ia,ja)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var d,e=0;if(c(a))for(d=a.length;d>e&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(ga,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?fa.merge(d,"string"==typeof a?[a]:a):$.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:_.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f,g=0,h=[];if(c(a))for(e=a.length;e>g;g++)f=b(a[g],g,d),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,d),null!=f&&h.push(f);return Z.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),fa.isFunction(a)?(d=Y.call(arguments,2),e=function(){return a.apply(b||this,d.concat(Y.call(arguments)))},e.guid=a.guid=a.guid||fa.guid++,e):void 0},now:Date.now,support:da}),"function"==typeof Symbol&&(fa.fn[Symbol.iterator]=W[Symbol.iterator]),fa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()});var ka=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o=b&&b.ownerDocument,p=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==p&&9!==p&&11!==p)return c;if(!d&&((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,I)){if(11!==p&&(j=ra.exec(a)))if(e=j[1]){if(9===p){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(o&&(g=o.getElementById(e))&&M(b,g)&&g.id===e)return c.push(g),c}else{if(j[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=j[3])&&v.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(v.qsa&&!T[a+" "]&&(!J||!J.test(a))){if(1!==p)o=b,n=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(ta,"\\$&"):b.setAttribute("id",h=N),l=z(a),f=l.length,i=ma.test(h)?"#"+h:"[id='"+h+"']";f--;)l[f]=i+" "+m(l[f]);n=l.join(","),o=sa.test(a)&&k(b.parentNode)||b}if(n)try{return $.apply(c,o.querySelectorAll(n)),c}catch(q){}finally{h===N&&b.removeAttribute("id")}}}return B(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(j=b[N]||(b[N]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===P&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g===G||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===G||(F(k),h=!I);m=a[l++];)if(m(k,g||G,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=/'|\\/g,ua=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),va=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},wa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(xa){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=G.documentElement,I=!y(G),(c=G.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",wa,!1):c.attachEvent&&c.attachEvent("onunload",wa)),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(G.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=qa.test(G.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!G.getElementsByName||!G.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c?[c]:[]}},w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=qa.test(G.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=G.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=qa.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",fa)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=qa.test(H.compareDocumentPosition),M=b||qa.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===G||a.ownerDocument===O&&M(O,a)?-1:b===G||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===G?-1:b===G?1:e?-1:f?1:D?aa(D,a)-aa(D,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===O?-1:i[d]===O?1:0},G):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(ka,"='$1']"),v.matchesSelector&&I&&!T[c+" "]&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[3]||a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ua,va).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[P,n,t];break}}else if(s&&(m=b,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[P,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ha,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ua,va),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){
return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ia.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in w.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(ua,va),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(ua,va),sa.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,!b||sa.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);fa.find=ka,fa.expr=ka.selectors,fa.expr[":"]=fa.expr.pseudos,fa.uniqueSort=fa.unique=ka.uniqueSort,fa.text=ka.getText,fa.isXMLDoc=ka.isXML,fa.contains=ka.contains;var la=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&fa(a).is(c))break;d.push(a)}return d},ma=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},na=fa.expr.match.needsContext,oa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,pa=/^.[^:#\[\.,]*$/;fa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?fa.find.matchesSelector(d,a)?[d]:[]:fa.find.matches(a,fa.grep(b,function(a){return 1===a.nodeType}))},fa.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(fa(a).filter(function(){for(b=0;c>b;b++)if(fa.contains(e[b],this))return!0}));for(b=0;c>b;b++)fa.find(a,e[b],d);return d=this.pushStack(c>1?fa.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&na.test(a)?fa(a):a||[],!1).length}});var qa,ra=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,sa=fa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||qa,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ra.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof fa?b[0]:b,fa.merge(this,fa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:X,!0)),oa.test(d[1])&&fa.isPlainObject(b))for(d in b)fa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=X.getElementById(d[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=X,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):fa.isFunction(a)?void 0!==c.ready?c.ready(a):a(fa):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),fa.makeArray(a,this))};sa.prototype=fa.fn,qa=fa(X);var ta=/^(?:parents|prev(?:Until|All))/,ua={children:!0,contents:!0,next:!0,prev:!0};fa.fn.extend({has:function(a){var b=fa(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(fa.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=na.test(a)||"string"!=typeof a?fa(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&fa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?fa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?_.call(fa(a),this[0]):_.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(fa.uniqueSort(fa.merge(this.get(),fa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),fa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return la(a,"parentNode")},parentsUntil:function(a,b,c){return la(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return la(a,"nextSibling")},prevAll:function(a){return la(a,"previousSibling")},nextUntil:function(a,b,c){return la(a,"nextSibling",c)},prevUntil:function(a,b,c){return la(a,"previousSibling",c)},siblings:function(a){return ma((a.parentNode||{}).firstChild,a)},children:function(a){return ma(a.firstChild)},contents:function(a){return a.contentDocument||fa.merge([],a.childNodes)}},function(a,b){fa.fn[a]=function(c,d){var e=fa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=fa.filter(d,e)),this.length>1&&(ua[a]||fa.uniqueSort(e),ta.test(a)&&e.reverse()),this.pushStack(e)}});var va=/\S+/g;fa.Callbacks=function(a){a="string"==typeof a?f(a):fa.extend({},a);var b,c,d,e,g=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<g.length;)g[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=g.length,c=!1);a.memory||(c=!1),b=!1,e&&(g=c?[]:"")},k={add:function(){return g&&(c&&!b&&(i=g.length-1,h.push(c)),function d(b){fa.each(b,function(b,c){fa.isFunction(c)?a.unique&&k.has(c)||g.push(c):c&&c.length&&"string"!==fa.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return fa.each(arguments,function(a,b){for(var c;(c=fa.inArray(b,g,c))>-1;)g.splice(c,1),i>=c&&i--}),this},has:function(a){return a?fa.inArray(a,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return e=h=[],g=c="",this},disabled:function(){return!g},lock:function(){return e=h=[],c||(g=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},fa.extend({Deferred:function(a){var b=[["resolve","done",fa.Callbacks("once memory"),"resolved"],["reject","fail",fa.Callbacks("once memory"),"rejected"],["notify","progress",fa.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return fa.Deferred(function(c){fa.each(b,function(b,f){var g=fa.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&fa.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?fa.extend(a,d):d}},e={};return d.pipe=d.then,fa.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=Y.call(arguments),g=f.length,h=1!==g||a&&fa.isFunction(a.promise)?g:0,i=1===h?a:fa.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?Y.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&fa.isFunction(f[e].promise)?f[e].promise().progress(j(e,c,b)).done(j(e,d,f)).fail(i.reject):--h;return h||i.resolveWith(d,f),i.promise()}});var wa;fa.fn.ready=function(a){return fa.ready.promise().done(a),this},fa.extend({isReady:!1,readyWait:1,holdReady:function(a){a?fa.readyWait++:fa.ready(!0)},ready:function(a){(a===!0?--fa.readyWait:fa.isReady)||(fa.isReady=!0,a!==!0&&--fa.readyWait>0||(wa.resolveWith(X,[fa]),fa.fn.triggerHandler&&(fa(X).triggerHandler("ready"),fa(X).off("ready"))))}}),fa.ready.promise=function(b){return wa||(wa=fa.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?a.setTimeout(fa.ready):(X.addEventListener("DOMContentLoaded",g),a.addEventListener("load",g))),wa.promise(b)},fa.ready.promise();var xa=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===fa.type(c)){e=!0;for(h in c)xa(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,fa.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(fa(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},ya=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1,h.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!ya(a))return{};var b=a[this.expando];return b||(b={},ya(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,fa.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{fa.isArray(b)?d=b.concat(b.map(fa.camelCase)):(e=fa.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(va)||[])),c=d.length;for(;c--;)delete f[d[c]]}(void 0===b||fa.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!fa.isEmptyObject(b)}};var za=new h,Aa=new h,Ba=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ca=/[A-Z]/g;fa.extend({hasData:function(a){return Aa.hasData(a)||za.hasData(a)},data:function(a,b,c){return Aa.access(a,b,c)},removeData:function(a,b){Aa.remove(a,b)},_data:function(a,b,c){return za.access(a,b,c)},_removeData:function(a,b){za.remove(a,b)}}),fa.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Aa.get(f),1===f.nodeType&&!za.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=fa.camelCase(d.slice(5)),i(f,d,e[d])));za.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Aa.set(this,a)}):xa(this,function(b){var c,d;if(f&&void 0===b){if(c=Aa.get(f,a)||Aa.get(f,a.replace(Ca,"-$&").toLowerCase()),void 0!==c)return c;if(d=fa.camelCase(a),c=Aa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else d=fa.camelCase(a),this.each(function(){var c=Aa.get(this,d);Aa.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&Aa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Aa.remove(this,a)})}}),fa.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=za.get(a,b),c&&(!d||fa.isArray(c)?d=za.access(a,b,fa.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=fa.queue(a,b),d=c.length,e=c.shift(),f=fa._queueHooks(a,b),g=function(){fa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return za.get(a,c)||za.access(a,c,{empty:fa.Callbacks("once memory").add(function(){za.remove(a,[b+"queue",c])})})}}),fa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?fa.queue(this[0],a):void 0===b?this:this.each(function(){var c=fa.queue(this,a,b);fa._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&fa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){fa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=fa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=za.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Da=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ea=new RegExp("^(?:([+-])=|)("+Da+")([a-z%]*)$","i"),Fa=["Top","Right","Bottom","Left"],Ga=function(a,b){return a=b||a,"none"===fa.css(a,"display")||!fa.contains(a.ownerDocument,a)},Ha=/^(?:checkbox|radio)$/i,Ia=/<([\w:-]+)/,Ja=/^$|\/(?:java|ecma)script/i,Ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ka.optgroup=Ka.option,Ka.tbody=Ka.tfoot=Ka.colgroup=Ka.caption=Ka.thead,Ka.th=Ka.td;var La=/<|&#?\w+;/;!function(){var a=X.createDocumentFragment(),b=a.appendChild(X.createElement("div")),c=X.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),da.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",da.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ma=/^key/,Na=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Oa=/^([^.]*)(?:\.(.+)|)/;fa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=za.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=fa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof fa&&fa.event.triggered!==b.type?fa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(va)||[""],j=b.length;j--;)h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=fa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=fa.event.special[n]||{},k=fa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&fa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),fa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=za.hasData(a)&&za.get(a);if(q&&(i=q.events)){for(b=(b||"").match(va)||[""],j=b.length;j--;)if(h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=fa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||fa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)fa.event.remove(a,n+b[j],c,d,!0);fa.isEmptyObject(i)&&za.remove(a,"handle events")}},dispatch:function(a){a=fa.event.fix(a);var b,c,d,e,f,g=[],h=Y.call(arguments),i=(za.get(this,"events")||{})[a.type]||[],j=fa.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=fa.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.rnamespace||a.rnamespace.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((fa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?fa(e,this).index(i)>-1:fa.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||X,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[fa.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new fa.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=X),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&fa.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return fa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},fa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},fa.Event=function(a,b){return this instanceof fa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?n:o):this.type=a,b&&fa.extend(this,b),this.timeStamp=a&&a.timeStamp||fa.now(),void(this[fa.expando]=!0)):new fa.Event(a,b)},fa.Event.prototype={constructor:fa.Event,isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=n,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},fa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){fa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!fa.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),fa.fn.extend({on:function(a,b,c,d){return q(this,a,b,c,d)},one:function(a,b,c,d){return q(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,fa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=o),this.each(function(){fa.event.remove(this,a,c,b)})}});var Pa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Qa=/<script|<style|<link/i,Ra=/checked\s*(?:[^=]|=\s*.checked.)/i,Sa=/^true\/(.*)/,Ta=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;fa.extend({htmlPrefilter:function(a){return a.replace(Pa,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=fa.contains(a.ownerDocument,a);if(!(da.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||fa.isXMLDoc(a)))for(g=k(h),f=k(a),d=0,e=f.length;e>d;d++)v(f[d],g[d]);if(b)if(c)for(f=f||k(a),g=g||k(h),d=0,e=f.length;e>d;d++)u(f[d],g[d]);else u(a,h);return g=k(h,"script"),g.length>0&&l(g,!i&&k(a,"script")),h},cleanData:function(a){for(var b,c,d,e=fa.event.special,f=0;void 0!==(c=a[f]);f++)if(ya(c)){if(b=c[za.expando]){if(b.events)for(d in b.events)e[d]?fa.event.remove(c,d):fa.removeEvent(c,d,b.handle);c[za.expando]=void 0}c[Aa.expando]&&(c[Aa.expando]=void 0)}}}),fa.fn.extend({domManip:w,detach:function(a){return x(this,a,!0)},remove:function(a){return x(this,a)},text:function(a){return xa(this,function(a){return void 0===a?fa.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return w(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.appendChild(a)}})},prepend:function(){return w(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return w(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return w(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(fa.cleanData(k(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return fa.clone(this,a,b)})},html:function(a){return xa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Qa.test(a)&&!Ka[(Ia.exec(a)||["",""])[1].toLowerCase()]){a=fa.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(fa.cleanData(k(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return w(this,arguments,function(b){var c=this.parentNode;fa.inArray(this,a)<0&&(fa.cleanData(k(this)),c&&c.replaceChild(b,this))},a)}}),fa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){fa.fn[a]=function(a){for(var c,d=[],e=fa(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),fa(e[g])[b](c),$.apply(d,c.get());return this.pushStack(d)}});var Ua,Va={HTML:"block",BODY:"block"},Wa=/^margin/,Xa=new RegExp("^("+Da+")(?!px)[a-z%]+$","i"),Ya=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Za=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},$a=X.documentElement;!function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",$a.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,$a.removeChild(g)}var c,d,e,f,g=X.createElement("div"),h=X.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",da.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),fa.extend(da,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},pixelMarginRight:function(){return null==d&&b(),e},reliableMarginLeft:function(){return null==d&&b(),f},reliableMarginRight:function(){var b,c=h.appendChild(X.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",$a.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),$a.removeChild(g),h.removeChild(c),b}}))}();var _a=/^(none|table(?!-c[ea]).+)/,ab={position:"absolute",visibility:"hidden",display:"block"},bb={letterSpacing:"0",fontWeight:"400"},cb=["Webkit","O","Moz","ms"],db=X.createElement("div").style;fa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=A(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=fa.camelCase(b),i=a.style;return b=fa.cssProps[h]||(fa.cssProps[h]=C(h)||h),g=fa.cssHooks[b]||fa.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ea.exec(c))&&e[1]&&(c=j(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(fa.cssNumber[h]?"":"px")),da.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=fa.camelCase(b);return b=fa.cssProps[h]||(fa.cssProps[h]=C(h)||h),g=fa.cssHooks[b]||fa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=A(a,b,d)),"normal"===e&&b in bb&&(e=bb[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),fa.each(["height","width"],function(a,b){fa.cssHooks[b]={get:function(a,c,d){return c?_a.test(fa.css(a,"display"))&&0===a.offsetWidth?Za(a,ab,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ya(a),g=d&&E(a,b,d,"border-box"===fa.css(a,"boxSizing",!1,f),f);return g&&(e=Ea.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=fa.css(a,b)),D(a,c,g)}}}),fa.cssHooks.marginLeft=B(da.reliableMarginLeft,function(a,b){return b?(parseFloat(A(a,"marginLeft"))||a.getBoundingClientRect().left-Za(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),fa.cssHooks.marginRight=B(da.reliableMarginRight,function(a,b){return b?Za(a,{display:"inline-block"},A,[a,"marginRight"]):void 0}),fa.each({margin:"",padding:"",border:"Width"},function(a,b){fa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Fa[d]+b]=f[d]||f[d-2]||f[0];return e}},Wa.test(a)||(fa.cssHooks[a+b].set=D)}),fa.fn.extend({css:function(a,b){return xa(this,function(a,b,c){var d,e,f={},g=0;if(fa.isArray(b)){for(d=Ya(a),e=b.length;e>g;g++)f[b[g]]=fa.css(a,b[g],!1,d);return f}return void 0!==c?fa.style(a,b,c):fa.css(a,b)},a,b,arguments.length>1)},show:function(){return G(this,!0)},hide:function(){return G(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ga(this)?fa(this).show():fa(this).hide()})}}),fa.Tween=H,H.prototype={constructor:H,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||fa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(fa.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];return this.options.duration?this.pos=b=fa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=fa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){fa.fx.step[a.prop]?fa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[fa.cssProps[a.prop]]&&!fa.cssHooks[a.prop]?a.elem[a.prop]=a.now:fa.style(a.elem,a.prop,a.now+a.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},fa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},fa.fx=H.prototype.init,fa.fx.step={};var eb,fb,gb=/^(?:toggle|show|hide)$/,hb=/queueHooks$/;fa.Animation=fa.extend(N,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return j(c.elem,a,Ea.exec(b),c),c}]},tweener:function(a,b){fa.isFunction(a)?(b=a,a=["*"]):a=a.match(va);for(var c,d=0,e=a.length;e>d;d++)c=a[d],N.tweeners[c]=N.tweeners[c]||[],N.tweeners[c].unshift(b)},prefilters:[L],prefilter:function(a,b){b?N.prefilters.unshift(a):N.prefilters.push(a)}}),fa.speed=function(a,b,c){var d=a&&"object"==typeof a?fa.extend({},a):{complete:c||!c&&b||fa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!fa.isFunction(b)&&b};return d.duration=fa.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in fa.fx.speeds?fa.fx.speeds[d.duration]:fa.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){fa.isFunction(d.old)&&d.old.call(this),d.queue&&fa.dequeue(this,d.queue)},d},fa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ga).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=fa.isEmptyObject(a),f=fa.speed(b,c,d),g=function(){var b=N(this,fa.extend({},a),f);(e||za.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=fa.timers,g=za.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&hb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&fa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=za.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=fa.timers,g=d?d.length:0;for(c.finish=!0,fa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),fa.each(["toggle","show","hide"],function(a,b){var c=fa.fn[b];fa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(J(b,!0),a,d,e)}}),fa.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"
}},function(a,b){fa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),fa.timers=[],fa.fx.tick=function(){var a,b=0,c=fa.timers;for(eb=fa.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||fa.fx.stop(),eb=void 0},fa.fx.timer=function(a){fa.timers.push(a),a()?fa.fx.start():fa.timers.pop()},fa.fx.interval=13,fa.fx.start=function(){fb||(fb=a.setInterval(fa.fx.tick,fa.fx.interval))},fa.fx.stop=function(){a.clearInterval(fb),fb=null},fa.fx.speeds={slow:600,fast:200,_default:400},fa.fn.delay=function(b,c){return b=fa.fx?fa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=X.createElement("input"),b=X.createElement("select"),c=b.appendChild(X.createElement("option"));a.type="checkbox",da.checkOn=""!==a.value,da.optSelected=c.selected,b.disabled=!0,da.optDisabled=!c.disabled,a=X.createElement("input"),a.value="t",a.type="radio",da.radioValue="t"===a.value}();var ib,jb=fa.expr.attrHandle;fa.fn.extend({attr:function(a,b){return xa(this,fa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){fa.removeAttr(this,a)})}}),fa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?fa.prop(a,b,c):(1===f&&fa.isXMLDoc(a)||(b=b.toLowerCase(),e=fa.attrHooks[b]||(fa.expr.match.bool.test(b)?ib:void 0)),void 0!==c?null===c?void fa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=fa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!da.radioValue&&"radio"===b&&fa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(va);if(f&&1===a.nodeType)for(;c=f[e++];)d=fa.propFix[c]||c,fa.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?fa.removeAttr(a,c):a.setAttribute(c,c),c}},fa.each(fa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||fa.find.attr;jb[b]=function(a,b,d){var e,f;return d||(f=jb[b],jb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,jb[b]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;fa.fn.extend({prop:function(a,b){return xa(this,fa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[fa.propFix[a]||a]})}}),fa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&fa.isXMLDoc(a)||(b=fa.propFix[b]||b,e=fa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=fa.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),da.optSelected||(fa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),fa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fa.propFix[this.toLowerCase()]=this});var mb=/[\t\r\n\f]/g;fa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(fa.isFunction(a))return this.each(function(b){fa(this).addClass(a.call(this,b,O(this)))});if("string"==typeof a&&a)for(b=a.match(va)||[];c=this[i++];)if(e=O(c),d=1===c.nodeType&&(" "+e+" ").replace(mb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=fa.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(fa.isFunction(a))return this.each(function(b){fa(this).removeClass(a.call(this,b,O(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(va)||[];c=this[i++];)if(e=O(c),d=1===c.nodeType&&(" "+e+" ").replace(mb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=fa.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):fa.isFunction(a)?this.each(function(c){fa(this).toggleClass(a.call(this,c,O(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=fa(this),f=a.match(va)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(void 0===a||"boolean"===c)&&(b=O(this),b&&za.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":za.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+O(c)+" ").replace(mb," ").indexOf(b)>-1)return!0;return!1}});var nb=/\r/g,ob=/[\x20\t\r\n\f]+/g;fa.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=fa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,fa(this).val()):a,null==e?e="":"number"==typeof e?e+="":fa.isArray(e)&&(e=fa.map(e,function(a){return null==a?"":a+""})),b=fa.valHooks[this.type]||fa.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=fa.valHooks[e.type]||fa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(nb,""):null==c?"":c)}}}),fa.extend({valHooks:{option:{get:function(a){var b=fa.find.attr(a,"value");return null!=b?b:fa.trim(fa.text(a)).replace(ob," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(da.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!fa.nodeName(c.parentNode,"optgroup"))){if(b=fa(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=fa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=fa.inArray(fa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),fa.each(["radio","checkbox"],function(){fa.valHooks[this]={set:function(a,b){return fa.isArray(b)?a.checked=fa.inArray(fa(a).val(),b)>-1:void 0}},da.checkOn||(fa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;fa.extend(fa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||X],n=ca.call(b,"type")?b.type:b,o=ca.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||X,3!==d.nodeType&&8!==d.nodeType&&!pb.test(n+fa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[fa.expando]?b:new fa.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:fa.makeArray(c,[b]),l=fa.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!fa.isWindow(d)){for(i=l.delegateType||n,pb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||X)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(za.get(g,"events")||{})[b.type]&&za.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&ya(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!ya(d)||j&&fa.isFunction(d[n])&&!fa.isWindow(d)&&(h=d[j],h&&(d[j]=null),fa.event.triggered=n,d[n](),fa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=fa.extend(new fa.Event,c,{type:a,isSimulated:!0});fa.event.trigger(d,null,b)}}),fa.fn.extend({trigger:function(a,b){return this.each(function(){fa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?fa.event.trigger(a,b,c,!0):void 0}}),fa.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){fa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),fa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),da.focusin="onfocusin"in a,da.focusin||fa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){fa.event.simulate(b,a.target,fa.event.fix(a))};fa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=za.access(d,b);e||d.addEventListener(a,c,!0),za.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=za.access(d,b)-1;e?za.access(d,b,e):(d.removeEventListener(a,c,!0),za.remove(d,b))}}});var qb=a.location,rb=fa.now(),sb=/\?/;fa.parseJSON=function(a){return JSON.parse(a+"")},fa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return(!c||c.getElementsByTagName("parsererror").length)&&fa.error("Invalid XML: "+b),c};var tb=/#.*$/,ub=/([?&])_=[^&]*/,vb=/^(.*?):[ \t]*([^\r\n]*)$/gm,wb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xb=/^(?:GET|HEAD)$/,yb=/^\/\//,zb={},Ab={},Bb="*/".concat("*"),Cb=X.createElement("a");Cb.href=qb.href,fa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:wb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fa.parseJSON,"text xml":fa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?R(R(a,fa.ajaxSettings),b):R(fa.ajaxSettings,a)},ajaxPrefilter:P(zb),ajaxTransport:P(Ab),ajax:function(b,c){function d(b,c,d,h){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&a.clearTimeout(i),e=void 0,g=h||"",w.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(t=S(m,w,d)),t=T(m,t,w,j),j?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(fa.lastModified[f]=v),v=w.getResponseHeader("etag"),v&&(fa.etag[f]=v)),204===b||"HEAD"===m.type?x="nocontent":304===b?x="notmodified":(x=t.state,l=t.data,s=t.error,j=!s)):(s=x,(b||!x)&&(x="error",0>b&&(b=0))),w.status=b,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=void 0,k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--fa.active||fa.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=fa.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?fa(n):fa.event,p=fa.Deferred(),q=fa.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!h)for(h={};b=vb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return e&&e.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((b||m.url||qb.href)+"").replace(tb,"").replace(yb,qb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=fa.trim(m.dataType||"*").toLowerCase().match(va)||[""],null==m.crossDomain){j=X.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=Cb.protocol+"//"+Cb.host!=j.protocol+"//"+j.host}catch(x){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=fa.param(m.data,m.traditional)),Q(zb,m,c,w),2===u)return w;k=fa.event&&m.global,k&&0===fa.active++&&fa.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!xb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(sb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=ub.test(f)?f.replace(ub,"$1_="+rb++):f+(sb.test(f)?"&":"?")+"_="+rb++)),m.ifModified&&(fa.lastModified[f]&&w.setRequestHeader("If-Modified-Since",fa.lastModified[f]),fa.etag[f]&&w.setRequestHeader("If-None-Match",fa.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Bb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(e=Q(Ab,m,c,w)){if(w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),2===u)return w;m.async&&m.timeout>0&&(i=a.setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,e.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return fa.get(a,b,c,"json")},getScript:function(a,b){return fa.get(a,void 0,b,"script")}}),fa.each(["get","post"],function(a,b){fa[b]=function(a,c,d,e){return fa.isFunction(c)&&(e=e||d,d=c,c=void 0),fa.ajax(fa.extend({url:a,type:b,dataType:e,data:c,success:d},fa.isPlainObject(a)&&a))}}),fa._evalUrl=function(a){return fa.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},fa.fn.extend({wrapAll:function(a){var b;return fa.isFunction(a)?this.each(function(b){fa(this).wrapAll(a.call(this,b))}):(this[0]&&(b=fa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return fa.isFunction(a)?this.each(function(b){fa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=fa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=fa.isFunction(a);return this.each(function(c){fa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){fa.nodeName(this,"body")||fa(this).replaceWith(this.childNodes)}).end()}}),fa.expr.filters.hidden=function(a){return!fa.expr.filters.visible(a)},fa.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Db=/%20/g,Eb=/\[\]$/,Fb=/\r?\n/g,Gb=/^(?:submit|button|image|reset|file)$/i,Hb=/^(?:input|select|textarea|keygen)/i;fa.param=function(a,b){var c,d=[],e=function(a,b){b=fa.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=fa.ajaxSettings&&fa.ajaxSettings.traditional),fa.isArray(a)||a.jquery&&!fa.isPlainObject(a))fa.each(a,function(){e(this.name,this.value)});else for(c in a)U(c,a[c],b,e);return d.join("&").replace(Db,"+")},fa.fn.extend({serialize:function(){return fa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=fa.prop(this,"elements");return a?fa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!fa(this).is(":disabled")&&Hb.test(this.nodeName)&&!Gb.test(a)&&(this.checked||!Ha.test(a))}).map(function(a,b){var c=fa(this).val();return null==c?null:fa.isArray(c)?fa.map(c,function(a){return{name:b.name,value:a.replace(Fb,"\r\n")}}):{name:b.name,value:c.replace(Fb,"\r\n")}}).get()}}),fa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ib={0:200,1223:204},Jb=fa.ajaxSettings.xhr();da.cors=!!Jb&&"withCredentials"in Jb,da.ajax=Jb=!!Jb,fa.ajaxTransport(function(b){var c,d;return da.cors||Jb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ib[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),fa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return fa.globalEval(a),a}}}),fa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),fa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=fa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),X.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Kb=[],Lb=/(=)\?(?=&|$)|\?\?/;fa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Kb.pop()||fa.expando+"_"+rb++;return this[a]=!0,a}}),fa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Lb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=fa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Lb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||fa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?fa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Kb.push(e)),g&&fa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),fa.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||X;var d=oa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m([a],b,e),e&&e.length&&fa(e).remove(),fa.merge([],d.childNodes))};var Mb=fa.fn.load;fa.fn.load=function(a,b,c){if("string"!=typeof a&&Mb)return Mb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=fa.trim(a.slice(h)),a=a.slice(0,h)),fa.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&fa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?fa("<div>").append(fa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},fa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){fa.fn[b]=function(a){return this.on(b,a)}}),fa.expr.filters.animated=function(a){return fa.grep(fa.timers,function(b){return a===b.elem}).length},fa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=fa.css(a,"position"),l=fa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=fa.css(a,"top"),i=fa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),fa.isFunction(b)&&(b=b.call(a,c,fa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},fa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){fa.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,fa.contains(b,d)?(e=d.getBoundingClientRect(),c=V(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===fa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),fa.nodeName(a[0],"html")||(d=a.offset()),d.top+=fa.css(a[0],"borderTopWidth",!0),d.left+=fa.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-fa.css(c,"marginTop",!0),left:b.left-d.left-fa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===fa.css(a,"position");)a=a.offsetParent;return a||$a})}}),fa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;fa.fn[a]=function(d){return xa(this,function(a,d,e){var f=V(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),fa.each(["top","left"],function(a,b){fa.cssHooks[b]=B(da.pixelPosition,function(a,c){return c?(c=A(a,b),Xa.test(c)?fa(a).position()[b]+"px":c):void 0})}),fa.each({Height:"height",Width:"width"},function(a,b){fa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){fa.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return xa(this,function(b,c,d){var e;return fa.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?fa.css(b,c,g):fa.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),fa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),fa.fn.andSelf=fa.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return fa});var Nb=a.jQuery,Ob=a.$;return fa.noConflict=function(b){return a.$===fa&&(a.$=Ob),b&&a.jQuery===fa&&(a.jQuery=Nb),fa},b||(a.jQuery=a.$=fa),fa}),function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(v.Normalizations.registered[G]?g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]("extract",null,I[1]):g(y).rootPropertyValueCache[G]=I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),f.loop!==!0||b||(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,
q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:1},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function r(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&g(f).isAnimating===!0&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||r();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;e!==f-1?i.complete=i.begin=null:i.complete=function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),
i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a){function b(a){return"undefined"==typeof a.which?!0:"number"==typeof a.which&&a.which>0?!a.ctrlKey&&!a.metaKey&&!a.altKey&&8!=a.which&&9!=a.which&&13!=a.which&&16!=a.which&&17!=a.which&&20!=a.which&&27!=a.which:!1}function c(b){var c=a(b);c.prop("disabled")||c.closest(".form-group").addClass("is-focused")}function d(a,b){var c;return c=a.hasClass("checkbox-inline")||a.hasClass("radio-inline")?a:a.closest(".checkbox").length?a.closest(".checkbox"):a.closest(".radio"),c.toggleClass("disabled",b)}function e(b){var e=!1;(b.is(a.material.options.checkboxElements)||b.is(a.material.options.radioElements))&&(e=!0),b.closest("label").hover(function(){var b=a(this).find("input"),f=b.prop("disabled");e&&d(a(this),f),f||c(b)},function(){f(a(this).find("input"))})}function f(b){a(b).closest(".form-group").removeClass("is-focused")}a.expr[":"].notmdproc=function(b){return a(b).data("mdproc")?!1:!0},a.material={options:{validate:!0,input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!1,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple",".pagination li:not(.active):not(.disabled) a:not(.withoutripple)"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox], label.checkbox-inline > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio], label.radio-inline > input[type=radio]"},checkbox:function(b){var c=a(b?b:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class='checkbox-material'><span class='check'></span></span>");e(c)},togglebutton:function(b){var c=a(b?b:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class='toggle'></span>");e(c)},radio:function(b){var c=a(b?b:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class='circle'></span><span class='check'></span>");e(c)},input:function(b){a(b?b:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){
var b=a(this),c=b.closest(".form-group");0!==c.length||"hidden"===b.attr("type")||b.attr("hidden")||(b.wrap("<div class='form-group'></div>"),c=b.closest(".form-group")),b.attr("data-hint")&&(b.after("<p class='help-block'>"+b.attr("data-hint")+"</p>"),b.removeAttr("data-hint"));var d={"input-lg":"form-group-lg","input-sm":"form-group-sm"};if(a.each(d,function(a,d){b.hasClass(a)&&(b.removeClass(a),c.addClass(d))}),b.hasClass("floating-label")){var e=b.attr("placeholder");b.attr("placeholder",null).removeClass("floating-label");var f=b.attr("id"),g="";f&&(g="for='"+f+"'"),c.addClass("label-floating"),b.after("<label "+g+"class='control-label'>"+e+"</label>")}(null===b.val()||"undefined"==b.val()||""===b.val())&&c.addClass("is-empty"),c.find("input[type=file]").length>0&&c.addClass("is-fileinput")})},attachInputEventHandlers:function(){var d=this.options.validate;a(document).on("keydown paste",".form-control",function(c){b(c)&&a(this).closest(".form-group").removeClass("is-empty")}).on("keyup change",".form-control",function(){var b=a(this),c=b.closest(".form-group"),e="undefined"==typeof b[0].checkValidity||b[0].checkValidity();""===b.val()?c.addClass("is-empty"):c.removeClass("is-empty"),d&&(e?c.removeClass("has-error"):c.addClass("has-error"))}).on("focus",".form-control, .form-group.is-fileinput",function(){c(this)}).on("blur",".form-control, .form-group.is-fileinput",function(){f(this)}).on("change",".form-group input",function(){var b=a(this);if("file"!=b.attr("type")){var c=b.closest(".form-group"),d=b.val();d?c.removeClass("is-empty"):c.addClass("is-empty")}}).on("change",".form-group.is-fileinput input[type='file']",function(){var b=a(this),c=b.closest(".form-group"),d="";a.each(this.files,function(a,b){d+=b.name+", "}),d=d.substring(0,d.length-2),d?c.removeClass("is-empty"):c.addClass("is-empty"),c.find("input.form-control[readonly]").val(d)})},ripples:function(b){a(b?b:this.options.withRipples).ripples()},autofill:function(){var b=setInterval(function(){a("input[type!=checkbox]").each(function(){var b=a(this);b.val()&&b.val()!==b.attr("value")&&b.trigger("change")})},100);setTimeout(function(){clearInterval(b)},1e4)},attachAutofillEventHandlers:function(){var b;a(document).on("focus","input",function(){var c=a(this).parents("form").find("input").not("[type=file]");b=setInterval(function(){c.each(function(){var b=a(this);b.val()!==b.attr("value")&&b.trigger("change")})},100)}).on("blur",".form-group input",function(){clearInterval(b)})},init:function(b){this.options=a.extend({},this.options,b);var c=a(document);a.fn.ripples&&this.options.ripples&&this.ripples(),this.options.input&&(this.input(),this.attachInputEventHandlers()),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&(this.autofill(),this.attachAutofillEventHandlers()),document.arrive&&this.options.arrive&&(a.fn.ripples&&this.options.ripples&&c.arrive(this.options.withRipples,function(){a.material.ripples(a(this))}),this.options.input&&c.arrive(this.options.inputElements,function(){a.material.input(a(this))}),this.options.checkbox&&c.arrive(this.options.checkboxElements,function(){a.material.checkbox(a(this))}),this.options.radio&&c.arrive(this.options.radioElements,function(){a.material.radio(a(this))}),this.options.togglebutton&&c.arrive(this.options.togglebuttonElements,function(){a.material.togglebutton(a(this))}))}}}(jQuery);var Utils={isVisible:function(a){var b=$(document).scrollTop(),c=b+$(window).height(),d=$(a).offset().top,e=d+$(a).height();return c>d&&e>b}};$(document).ready(function(){$.material.init(),$("#navbar").affix({offset:{top:$("#header-wrapper").height()}}),$('a[href^="#"]').on("click",function(a){a.preventDefault();var b=this.hash,c=parseInt($(b).attr("data-top"));c||(c=0),$("html, body").animate({scrollTop:$(this.hash).offset().top-c},800,function(){window.location.hash=b})});var a=$("#navbar"),b=a.outerHeight()+15,c=a.find("a"),d=c.map(function(){var a=$(this).attr("href");return"#"===a.charAt(0)&&(a=$(a),a.length)?a:void 0});$(".current-year").html((new Date).getFullYear()),$(window).scroll(function(){var a=$(this).scrollTop()+b,e=d.map(function(){return $(this).offset().top<a?this:void 0});e=e[e.length-1];var f=e&&e.length?e[0].id:"";c.parent().removeClass("active").end().filter('[href="#'+f+'"]').parent().addClass("active")})}),$(document).ready(function(){$.each($(".linkolor"),function(a,b){var c=$(b),d=c.attr("data-gray"),e=c.attr("data-color"),f=(c.attr("data-url"),c.attr("data-bg")),g=c.attr("data-class");$graydiv=$('<div class="linkolor-gray linkolor-link"></div>').width(c.width()).height(c.height()).css("background-image",'url("'+d+'")').css("background-color",f),$colordiv=$('<div class="linkolor-color linkolor-link"></div>').width(c.width()).height(c.height()).css("background-image",'url("'+e+'")').css("background-color",f),g&&($graydiv.addClass(g),$colordiv.addClass(g)),c.append($graydiv),c.append($colordiv)}),$(".linkolor").mouseenter(function(a){a.stopPropagation();var b=$(this),c=b.children(".linkolor-gray"),d=b.children(".linkolor-color");c.stop().fadeOut(200),d.stop().fadeIn(200)}),$(".linkolor").mouseleave(function(a){a.stopPropagation();var b=$(this),c=b.children(".linkolor-gray"),d=b.children(".linkolor-color");c.stop().fadeIn(200),d.stop().fadeOut(200)}),$(".linkolor").click(function(){var a=$(this),b=a.attr("data-url"),c=a.attr("data-target");b&&(c&&"_blank"===c?window.open(b):window.location=b)})}),$(document).ready(function(){$(".normalink").click(function(){var a=$(this),b=a.attr("data-url"),c=a.attr("data-target");b&&(c&&"_blank"===c?window.open(b):window.location=b)})}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.THREE={}))}(this,function(a){"use strict";function b(){}function c(a,b){this.x=a||0,this.y=b||0}function d(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function e(a,b,c,d){this._x=a||0,this._y=b||0,this._z=c||0,this._w=void 0!==d?d:1}function f(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0}function g(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function h(a,b,d,e,f,i,j,k,l,m){Object.defineProperty(this,"id",{value:Ui++}),this.uuid=Ri.generateUUID(),this.name="",this.image=void 0!==a?a:h.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==b?b:h.DEFAULT_MAPPING,this.wrapS=void 0!==d?d:vh,this.wrapT=void 0!==e?e:vh,this.magFilter=void 0!==f?f:Ah,this.minFilter=void 0!==i?i:Ch,this.anisotropy=void 0!==l?l:1,this.format=void 0!==j?j:Rh,this.type=void 0!==k?k:Dh,this.offset=new c(0,0),this.repeat=new c(1,1),this.center=new c(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new g,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==m?m:Fi,this.version=0,this.onUpdate=null}function i(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=void 0!==d?d:1}function j(a,b,c){this.width=a,this.height=b,this.scissor=new i(0,0,a,b),this.scissorTest=!1,this.viewport=new i(0,0,a,b),c=c||{},this.texture=new h(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.generateMipmaps=void 0!==c.generateMipmaps?c.generateMipmaps:!1,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:Ah,this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0,this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function k(a,b,c){j.call(this,a,b,c),this.samples=4}function l(a,b,c){j.call(this,a,b,c),this.activeCubeFace=0,this.activeMipMapLevel=0}function m(a,b,c,d,e,f,g,i,j,k,l,m){h.call(this,null,f,g,i,j,k,d,e,l,m),this.image={data:a,width:b,height:c},this.magFilter=void 0!==j?j:xh,this.minFilter=void 0!==k?k:xh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function n(a,b){this.min=void 0!==a?a:new f(+(1/0),+(1/0),+(1/0)),this.max=void 0!==b?b:new f(-(1/0),-(1/0),-(1/0))}function o(a,b){this.center=void 0!==a?a:new f,this.radius=void 0!==b?b:0}function p(a,b){this.normal=void 0!==a?a:new f(1,0,0),this.constant=void 0!==b?b:0}function q(a,b,c,d,e,f){this.planes=[void 0!==a?a:new p,void 0!==b?b:new p,void 0!==c?c:new p,void 0!==d?d:new p,void 0!==e?e:new p,void 0!==f?f:new p]}function r(a){var b={};for(var c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}function s(a){for(var b={},c=0;c<a.length;c++){var d=r(a[c]);for(var e in d)b[e]=d[e]}return b}function t(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function u(){function a(e,f){c!==!1&&(d(e,f),b.requestAnimationFrame(a))}var b=null,c=!1,d=null;return{start:function(){c!==!0&&null!==d&&(b.requestAnimationFrame(a),c=!0)},stop:function(){c=!1},setAnimationLoop:function(a){d=a},setContext:function(a){b=a}}}function v(a){function b(b,c){var d=b.array,e=b.dynamic?35048:35044,f=a.createBuffer();a.bindBuffer(c,f),a.bufferData(c,d,e),b.onUploadCallback();var g=5126;return d instanceof Float32Array?g=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?g=5123:d instanceof Int16Array?g=5122:d instanceof Uint32Array?g=5125:d instanceof Int32Array?g=5124:d instanceof Int8Array?g=5120:d instanceof Uint8Array&&(g=5121),{buffer:f,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:b.version}}function c(b,c,d){var e=c.array,f=c.updateRange;a.bindBuffer(d,b),c.dynamic===!1?a.bufferData(d,e,35044):-1===f.count?a.bufferSubData(d,0,e):0===f.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(d,f.offset*e.BYTES_PER_ELEMENT,e.subarray(f.offset,f.offset+f.count)),f.count=-1)}function d(a){return a.isInterleavedBufferAttribute&&(a=a.data),g.get(a)}function e(b){b.isInterleavedBufferAttribute&&(b=b.data);var c=g.get(b);c&&(a.deleteBuffer(c.buffer),g["delete"](b))}function f(a,d){a.isInterleavedBufferAttribute&&(a=a.data);var e=g.get(a);void 0===e?g.set(a,b(a,d)):e.version<a.version&&(c(e.buffer,a,d),e.version=a.version)}var g=new WeakMap;return{get:d,remove:e,update:f}}function w(a,b,c,d,e,g){this.a=a,this.b=b,this.c=c,this.normal=d&&d.isVector3?d:new f,this.vertexNormals=Array.isArray(d)?d:[],this.color=e&&e.isColor?e:new t,this.vertexColors=Array.isArray(e)?e:[],this.materialIndex=void 0!==g?g:0}function x(a,b,c,d){this._x=a||0,this._y=b||0,this._z=c||0,this._order=d||x.DefaultOrder}function y(){this.mask=1}function z(){function a(){i.setFromEuler(h,!1)}function b(){h.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:jl++}),this.uuid=Ri.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=z.DefaultUp.clone();var c=new f,h=new x,i=new e,j=new f(1,1,1);h.onChange(a),i.onChange(b),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:c},rotation:{configurable:!0,enumerable:!0,value:h},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:j},modelViewMatrix:{value:new d},normalMatrix:{value:new g}}),this.matrix=new d,this.matrixWorld=new d,this.matrixAutoUpdate=z.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new y,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function A(){Object.defineProperty(this,"id",{value:kl+=2}),this.uuid=Ri.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function B(a,b,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=a,this.itemSize=b,this.count=void 0!==a?a.length/b:0,this.normalized=c===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function C(a,b,c){B.call(this,new Int8Array(a),b,c)}function D(a,b,c){B.call(this,new Uint8Array(a),b,c)}function E(a,b,c){B.call(this,new Uint8ClampedArray(a),b,c)}function F(a,b,c){B.call(this,new Int16Array(a),b,c)}function G(a,b,c){B.call(this,new Uint16Array(a),b,c)}function H(a,b,c){B.call(this,new Int32Array(a),b,c)}function I(a,b,c){B.call(this,new Uint32Array(a),b,c)}function J(a,b,c){B.call(this,new Float32Array(a),b,c)}function K(a,b,c){B.call(this,new Float64Array(a),b,c)}function L(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function M(a){if(0===a.length)return-(1/0);for(var b=a[0],c=1,d=a.length;d>c;++c)a[c]>b&&(b=a[c]);return b}function N(){Object.defineProperty(this,"id",{value:ll+=2}),this.uuid=Ri.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function O(a,b,c,d,e,f){A.call(this),this.type="BoxGeometry",this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f},this.fromBufferGeometry(new P(a,b,c,d,e,f)),this.mergeVertices()}function P(a,b,c,d,e,g){function h(a,b,c,d,e,g,h,p,q,r,s){var t,u,v=g/q,w=h/r,x=g/2,y=h/2,z=p/2,A=q+1,B=r+1,C=0,D=0,E=new f;for(u=0;B>u;u++){var F=u*w-y;for(t=0;A>t;t++){var G=t*v-x;E[a]=G*d,E[b]=F*e,E[c]=z,k.push(E.x,E.y,E.z),E[a]=0,E[b]=0,E[c]=p>0?1:-1,l.push(E.x,E.y,E.z),m.push(t/q),m.push(1-u/r),C+=1}}for(u=0;r>u;u++)for(t=0;q>t;t++){var H=n+t+A*u,I=n+t+A*(u+1),J=n+(t+1)+A*(u+1),K=n+(t+1)+A*u;j.push(H,I,K),j.push(I,J,K),D+=6}i.addGroup(o,D,s),o+=D,n+=C}N.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};var i=this;a=a||1,b=b||1,c=c||1,d=Math.floor(d)||1,e=Math.floor(e)||1,g=Math.floor(g)||1;var j=[],k=[],l=[],m=[],n=0,o=0;h("z","y","x",-1,-1,c,b,a,g,e,0),h("z","y","x",1,-1,c,b,-a,g,e,1),h("x","z","y",1,1,a,c,b,d,g,2),h("x","z","y",1,-1,a,c,-b,d,g,3),h("x","y","z",1,-1,a,b,c,d,e,4),h("x","y","z",-1,-1,a,b,-c,d,e,5),this.setIndex(j),this.addAttribute("position",new J(k,3)),this.addAttribute("normal",new J(l,3)),this.addAttribute("uv",new J(m,2))}function Q(a,b,c,d){A.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:b,widthSegments:c,heightSegments:d},this.fromBufferGeometry(new R(a,b,c,d)),this.mergeVertices()}function R(a,b,c,d){N.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:b,widthSegments:c,heightSegments:d},a=a||1,b=b||1;var e,f,g=a/2,h=b/2,i=Math.floor(c)||1,j=Math.floor(d)||1,k=i+1,l=j+1,m=a/i,n=b/j,o=[],p=[],q=[],r=[];for(f=0;l>f;f++){var s=f*n-h;for(e=0;k>e;e++){var t=e*m-g;p.push(t,-s,0),q.push(0,0,1),r.push(e/i),r.push(1-f/j)}}for(f=0;j>f;f++)for(e=0;i>e;e++){var u=e+k*f,v=e+k*(f+1),w=e+1+k*(f+1),x=e+1+k*f;o.push(u,v,x),o.push(v,w,x)}this.setIndex(o),this.addAttribute("position",new J(p,3)),this.addAttribute("normal",new J(q,3)),this.addAttribute("uv",new J(r,2))}function S(){Object.defineProperty(this,"id",{value:ml++}),this.uuid=Ri.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Cg,this.side=tg,this.flatShading=!1,this.vertexColors=yg,this.opacity=1,this.transparent=!1,this.blendSrc=Qg,this.blendDst=Rg,this.blendEquation=Hg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$g,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function T(a){S.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function U(a,b){this.origin=void 0!==a?a:new f,this.direction=void 0!==b?b:new f}function V(a,b,c){this.a=void 0!==a?a:new f,this.b=void 0!==b?b:new f,this.c=void 0!==c?c:new f}function W(a){S.call(this),this.type="MeshBasicMaterial",this.color=new t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function X(a,b){z.call(this),this.type="Mesh",this.geometry=void 0!==a?a:new N,this.material=void 0!==b?b:new W({color:16777215*Math.random()}),this.drawMode=Ci,this.updateMorphTargets()}function Y(a,b,c,d){function e(b,d,e,m){var n=d.background;if(null===n?(f(i,j),k=null,l=0):n&&n.isColor&&(f(n,1),m=!0,k=null,l=0),(a.autoClear||m)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLRenderTargetCube)){void 0===h&&(h=new X(new P(1,1,1),new T({type:"BackgroundCubeMaterial",uniforms:r(il.cube.uniforms),vertexShader:il.cube.vertexShader,fragmentShader:il.cube.fragmentShader,side:ug,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.removeAttribute("normal"),h.geometry.removeAttribute("uv"),h.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.tCube.value}}),c.update(h));var o=n.isWebGLRenderTargetCube?n.texture:n;h.material.uniforms.tCube.value=o,h.material.uniforms.tFlip.value=n.isWebGLRenderTargetCube?1:-1,(k!==n||l!==o.version)&&(h.material.needsUpdate=!0,k=n,l=o.version),b.unshift(h,h.geometry,h.material,0,0,null)}else n&&n.isTexture&&(void 0===g&&(g=new X(new R(2,2),new T({type:"BackgroundMaterial",uniforms:r(il.background.uniforms),vertexShader:il.background.vertexShader,fragmentShader:il.background.fragmentShader,side:tg,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.removeAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(g)),g.material.uniforms.t2D.value=n,n.matrixAutoUpdate===!0&&n.updateMatrix(),g.material.uniforms.uvTransform.value.copy(n.matrix),(k!==n||l!==n.version)&&(g.material.needsUpdate=!0,k=n,l=n.version),b.unshift(g,g.geometry,g.material,0,0,null))}function f(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var g,h,i=new t(0),j=0,k=null,l=0;return{getClearColor:function(){return i},setClearColor:function(a,b){i.set(a),j=void 0!==b?b:1,f(i,j)},getClearAlpha:function(){return j},setClearAlpha:function(a){j=a,f(i,j)},render:e}}function Z(a,b,c,d){function e(a){h=a}function f(b,d){a.drawArrays(h,b,d),c.update(d,h)}function g(e,f,g){var i;if(d.isWebGL2)i=a;else if(i=b.get("ANGLE_instanced_arrays"),null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[d.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](h,f,g,e.maxInstancedCount),c.update(g,h,e.maxInstancedCount)}var h;this.setMode=e,this.render=f,this.renderInstances=g}function $(a,b,c){function d(){if(void 0!==f)return f;var c=b.get("EXT_texture_filter_anisotropic");return f=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function e(b){if("highp"===b){if(a.getShaderPrecisionFormat(35633,36338).precision>0&&a.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";b="mediump"}return"mediump"===b&&a.getShaderPrecisionFormat(35633,36337).precision>0&&a.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var f,g="undefined"!=typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext,h=void 0!==c.precision?c.precision:"highp",i=e(h);i!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",i,"instead."),h=i);var j=c.logarithmicDepthBuffer===!0,k=a.getParameter(34930),l=a.getParameter(35660),m=a.getParameter(3379),n=a.getParameter(34076),o=a.getParameter(34921),p=a.getParameter(36347),q=a.getParameter(36348),r=a.getParameter(36349),s=l>0,t=g||!!b.get("OES_texture_float"),u=s&&t,v=g?a.getParameter(36183):0;return{isWebGL2:g,getMaxAnisotropy:d,getMaxPrecision:e,precision:h,logarithmicDepthBuffer:j,maxTextures:k,maxVertexTextures:l,maxTextureSize:m,maxCubemapSize:n,maxAttributes:o,maxVertexUniforms:p,maxVaryings:q,maxFragmentUniforms:r,vertexTextures:s,floatFragmentTextures:t,floatVertexTextures:u,maxSamples:v}}function _(){function a(){k.value!==d&&(k.value=d,k.needsUpdate=e>0),c.numPlanes=e,c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){if(g=k.value,e!==!0||null===g){var h=d+4*f,l=b.matrixWorldInverse;j.getNormalMatrix(l),(null===g||g.length<h)&&(g=new Float32Array(h));for(var m=0,n=d;m!==f;++m,n+=4)i.copy(a[m]).applyMatrix4(l,j),i.normal.toArray(g,n),g[n+3]=i.constant}k.value=g,k.needsUpdate=!0}return c.numPlanes=f,g}var c=this,d=null,e=0,f=!1,h=!1,i=new p,j=new g,k={value:null,needsUpdate:!1};this.uniform=k,this.numPlanes=0,this.numIntersection=0,this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;return f=c,d=b(a,g,0),e=a.length,h},this.beginShadows=function(){h=!0,b(null)},this.endShadows=function(){h=!1,a()},this.setState=function(c,g,i,j,l,m){if(!f||null===c||0===c.length||h&&!i)h?b(null):a();else{var n=h?0:e,o=4*n,p=l.clippingState||null;k.value=p,p=b(c,j,o,m);for(var q=0;q!==o;++q)p[q]=d[q];l.clippingState=p,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=n}}}function aa(a){var b={};return{get:function(c){if(void 0!==b[c])return b[c];var d;switch(c){case"WEBGL_depth_texture":d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}return null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),b[c]=d,d}}}function ba(a,b,c){function d(a){var e=a.target,f=h[e.id];null!==f.index&&b.remove(f.index);for(var g in f.attributes)b.remove(f.attributes[g]);e.removeEventListener("dispose",d),delete h[e.id];var j=i[f.id];j&&(b.remove(j),delete i[f.id]),c.memory.geometries--}function e(a,b){var e=h[b.id];return e?e:(b.addEventListener("dispose",d),b.isBufferGeometry?e=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new N).setFromObject(a)),e=b._bufferGeometry),h[b.id]=e,c.memory.geometries++,e)}function f(a){var c=a.index,d=a.attributes;null!==c&&b.update(c,34963);for(var e in d)b.update(d[e],34962);var f=a.morphAttributes;for(var e in f)for(var g=f[e],h=0,i=g.length;i>h;h++)b.update(g[h],34962)}function g(a){var c=i[a.id];if(c)return c;var d=[],e=a.index,f=a.attributes;if(null!==e)for(var g=e.array,h=0,j=g.length;j>h;h+=3){var k=g[h+0],l=g[h+1],m=g[h+2];d.push(k,l,l,m,m,k)}else for(var g=f.position.array,h=0,j=g.length/3-1;j>h;h+=3){var k=h+0,l=h+1,m=h+2;d.push(k,l,l,m,m,k)}return c=new(M(d)>65535?I:G)(d,1),b.update(c,34963),i[a.id]=c,c}var h={},i={};return{get:e,update:f,getWireframeAttribute:g}}function ca(a,b,c,d){function e(a){i=a}function f(a){j=a.type,k=a.bytesPerElement}function g(b,d){a.drawElements(i,d,j,b*k),c.update(d,i)}function h(e,f,g){var h;if(d.isWebGL2)h=a;else{var h=b.get("ANGLE_instanced_arrays");if(null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}h[d.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,g,j,f*k,e.maxInstancedCount),c.update(g,i,e.maxInstancedCount)}var i,j,k;this.setMode=e,this.setIndex=f,this.render=g,this.renderInstances=h}function da(a){function b(a,b,c){switch(c=c||1,e.calls++,b){case 4:e.triangles+=c*(a/3);break;case 5:case 6:e.triangles+=c*(a-2);break;case 1:e.lines+=c*(a/2);break;case 3:e.lines+=c*(a-1);break;case 2:e.lines+=c*a;break;case 0:e.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",b)}}function c(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}var d={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:d,render:e,programs:null,autoReset:!0,reset:c,update:b}}function ea(a,b){return Math.abs(b[1])-Math.abs(a[1])}function fa(a){function b(b,e,f,g){var h=b.morphTargetInfluences,i=h.length,j=c[e.id];if(void 0===j){j=[];for(var k=0;i>k;k++)j[k]=[k,0];c[e.id]=j}for(var l=f.morphTargets&&e.morphAttributes.position,m=f.morphNormals&&e.morphAttributes.normal,k=0;i>k;k++){var n=j[k];0!==n[1]&&(l&&e.removeAttribute("morphTarget"+k),m&&e.removeAttribute("morphNormal"+k))}for(var k=0;i>k;k++){var n=j[k];n[0]=k,n[1]=h[k]}j.sort(ea);for(var k=0;8>k;k++){var n=j[k];if(n){var o=n[0],p=n[1];if(p){l&&e.addAttribute("morphTarget"+k,l[o]),m&&e.addAttribute("morphNormal"+k,m[o]),d[k]=p;continue}}d[k]=0}g.getUniforms().setValue(a,"morphTargetInfluences",d)}var c={},d=new Float32Array(8);return{update:b}}function ga(a,b){function c(c){var d=b.render.frame,f=c.geometry,g=a.get(c,f);return e[g.id]!==d&&(f.isGeometry&&g.updateFromObject(c),a.update(g),e[g.id]=d),g}function d(){e={}}var e={};return{update:c,dispose:d}}function ha(a,b,c,d,e,f,g,i,j,k){a=void 0!==a?a:[],b=void 0!==b?b:nh,h.call(this,a,b,c,d,e,f,g,i,j,k),this.flipY=!1}function ia(a,b,c,d){h.call(this,null),this.image={data:a,width:b,height:c,depth:d},this.magFilter=xh,this.minFilter=xh,this.generateMipmaps=!1,this.flipY=!1}function ja(){this.seq=[],this.map={}}function ka(a,b,c){var d=a[0];if(0>=d||d>0)return a;var e=b*c,f=ql[e];if(void 0===f&&(f=new Float32Array(e),ql[e]=f),0!==b){d.toArray(f,0);for(var g=1,h=0;g!==b;++g)h+=c,a[g].toArray(f,h)}return f}function la(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0}function ma(a,b){for(var c=0,d=b.length;d>c;c++)a[c]=b[c]}function na(a,b){var c=rl[b];void 0===c&&(c=new Int32Array(b),rl[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function oa(a,b){var c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function pa(a,b){var c=this.cache;c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function qa(a,b){var c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y)&&(a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y);else{if(la(c,b))return;a.uniform2fv(this.addr,b),ma(c,b)}}function ra(a,b){var c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)&&(a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z);else if(void 0!==b.r)(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)&&(a.uniform3f(this.addr,b.r,b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b);else{if(la(c,b))return;a.uniform3fv(this.addr,b),ma(c,b)}}function sa(a,b){var c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)&&(a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w);else{if(la(c,b))return;a.uniform4fv(this.addr,b),ma(c,b)}}function ta(a,b){var c=this.cache,d=b.elements;if(void 0===d){if(la(c,b))return;a.uniformMatrix2fv(this.addr,!1,b),ma(c,b)}else{if(la(c,d))return;ul.set(d),a.uniformMatrix2fv(this.addr,!1,ul),ma(c,d)}}function ua(a,b){var c=this.cache,d=b.elements;if(void 0===d){if(la(c,b))return;a.uniformMatrix3fv(this.addr,!1,b),ma(c,b)}else{if(la(c,d))return;tl.set(d),a.uniformMatrix3fv(this.addr,!1,tl),ma(c,d)}}function va(a,b){var c=this.cache,d=b.elements;if(void 0===d){if(la(c,b))return;a.uniformMatrix4fv(this.addr,!1,b),ma(c,b)}else{if(la(c,d))return;sl.set(d),a.uniformMatrix4fv(this.addr,!1,sl),ma(c,d)}}function wa(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e),c.setTexture2D(b||nl,e)}function xa(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e),c.setTexture3D(b||ol,e)}function ya(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e),c.setTextureCube(b||pl,e)}function za(a,b){var c=this.cache;la(c,b)||(a.uniform2iv(this.addr,b),ma(c,b))}function Aa(a,b){var c=this.cache;la(c,b)||(a.uniform3iv(this.addr,b),ma(c,b))}function Ba(a,b){var c=this.cache;la(c,b)||(a.uniform4iv(this.addr,b),ma(c,b))}function Ca(a){switch(a){case 5126:return oa;case 35664:return qa;case 35665:return ra;case 35666:return sa;case 35674:return ta;case 35675:return ua;case 35676:return va;case 35678:case 36198:return wa;case 35679:return xa;case 35680:return ya;case 5124:case 35670:return pa;case 35667:case 35671:return za;case 35668:case 35672:return Aa;case 35669:case 35673:return Ba}}function Da(a,b){var c=this.cache;la(c,b)||(a.uniform1fv(this.addr,b),ma(c,b))}function Ea(a,b){var c=this.cache;la(c,b)||(a.uniform1iv(this.addr,b),ma(c,b))}function Fa(a,b){var c=this.cache,d=ka(b,this.size,2);la(c,d)||(a.uniform2fv(this.addr,d),this.updateCache(d))}function Ga(a,b){var c=this.cache,d=ka(b,this.size,3);la(c,d)||(a.uniform3fv(this.addr,d),this.updateCache(d))}function Ha(a,b){var c=this.cache,d=ka(b,this.size,4);la(c,d)||(a.uniform4fv(this.addr,d),this.updateCache(d))}function Ia(a,b){var c=this.cache,d=ka(b,this.size,4);la(c,d)||(a.uniformMatrix2fv(this.addr,!1,d),this.updateCache(d))}function Ja(a,b){var c=this.cache,d=ka(b,this.size,9);la(c,d)||(a.uniformMatrix3fv(this.addr,!1,d),this.updateCache(d))}function Ka(a,b){var c=this.cache,d=ka(b,this.size,16);la(c,d)||(a.uniformMatrix4fv(this.addr,!1,d),this.updateCache(d))}function La(a,b,c){var d=this.cache,e=b.length,f=na(c,e);la(d,f)===!1&&(a.uniform1iv(this.addr,f),ma(d,f));for(var g=0;g!==e;++g)c.setTexture2D(b[g]||nl,f[g])}function Ma(a,b,c){var d=this.cache,e=b.length,f=na(c,e);la(d,f)===!1&&(a.uniform1iv(this.addr,f),ma(d,f));for(var g=0;g!==e;++g)c.setTextureCube(b[g]||pl,f[g])}function Na(a){switch(a){case 5126:return Da;case 35664:return Fa;case 35665:return Ga;case 35666:return Ha;case 35674:return Ia;case 35675:return Ja;case 35676:return Ka;case 35678:return La;case 35680:return Ma;case 5124:case 35670:return Ea;case 35667:case 35671:return za;
case 35668:case 35672:return Aa;case 35669:case 35673:return Ba}}function Oa(a,b,c){this.id=a,this.addr=c,this.cache=[],this.setValue=Ca(b.type)}function Pa(a,b,c){this.id=a,this.addr=c,this.cache=[],this.size=b.size,this.setValue=Na(b.type)}function Qa(a){this.id=a,ja.call(this)}function Ra(a,b){a.seq.push(b),a.map[b.id]=b}function Sa(a,b,c){var d=a.name,e=d.length;for(vl.lastIndex=0;;){var f=vl.exec(d),g=vl.lastIndex,h=f[1],i="]"===f[2],j=f[3];if(i&&(h=0|h),void 0===j||"["===j&&g+2===e){Ra(c,void 0===j?new Oa(h,a,b):new Pa(h,a,b));break}var k=c.map,l=k[h];void 0===l&&(l=new Qa(h),Ra(c,l)),c=l}}function Ta(a,b,c){ja.call(this),this.renderer=c;for(var d=a.getProgramParameter(b,35718),e=0;d>e;++e){var f=a.getActiveUniform(b,e),g=a.getUniformLocation(b,f.name);Sa(f,g,this)}}function Ua(a){for(var b=a.split("\n"),c=0;c<b.length;c++)b[c]=c+1+": "+b[c];return b.join("\n")}function Va(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,35713)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===b?"vertex":"fragment",a.getShaderInfoLog(d),Ua(c)),d}function Wa(a){switch(a){case Fi:return["Linear","( value )"];case Gi:return["sRGB","( value )"];case Ii:return["RGBE","( value )"];case Ki:return["RGBM","( value, 7.0 )"];case Li:return["RGBM","( value, 16.0 )"];case Mi:return["RGBD","( value, 256.0 )"];case Hi:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+a)}}function Xa(a,b){var c=Wa(b);return"vec4 "+a+"( vec4 value ) { return "+c[0]+"ToLinear"+c[1]+"; }"}function Ya(a,b){var c=Wa(b);return"vec4 "+a+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"}function Za(a,b){var c;switch(b){case hh:c="Linear";break;case ih:c="Reinhard";break;case jh:c="Uncharted2";break;case kh:c="OptimizedCineon";break;case lh:c="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+b)}return"vec3 "+a+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function $a(a,b,c){a=a||{};var d=[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap&&!b.objectSpaceNormalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return d.filter(bb).join("\n")}function _a(a){var b=[];for(var c in a){var d=a[c];d!==!1&&b.push("#define "+c+" "+d)}return b.join("\n")}function ab(a,b){for(var c={},d=a.getProgramParameter(b,35721),e=0;d>e;e++){var f=a.getActiveAttrib(b,e),g=f.name;c[g]=a.getAttribLocation(b,g)}return c}function bb(a){return""!==a}function cb(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function db(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function eb(a){function b(a,b){var c=el[b];if(void 0===c)throw new Error("Can not resolve #include <"+b+">");return eb(c)}var c=/^[ \t]*#include +<([\w\d.\/]+)>/gm;return a.replace(c,b)}function fb(a){function b(a,b,c,d){for(var e="",f=parseInt(b);f<parseInt(c);f++)e+=d.replace(/\[ i \]/g,"[ "+f+" ]");return e}var c=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return a.replace(c,b)}function gb(a,b,c,d,e,f,g){var h=a.context,i=d.defines,j=e.vertexShader,k=e.fragmentShader,l="SHADOWMAP_TYPE_BASIC";f.shadowMapType===rg?l="SHADOWMAP_TYPE_PCF":f.shadowMapType===sg&&(l="SHADOWMAP_TYPE_PCF_SOFT");var m="ENVMAP_TYPE_CUBE",n="ENVMAP_MODE_REFLECTION",o="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(d.envMap.mapping){case nh:case oh:m="ENVMAP_TYPE_CUBE";break;case sh:case th:m="ENVMAP_TYPE_CUBE_UV";break;case ph:case qh:m="ENVMAP_TYPE_EQUIREC";break;case rh:m="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case oh:case qh:n="ENVMAP_MODE_REFRACTION"}switch(d.combine){case dh:o="ENVMAP_BLENDING_MULTIPLY";break;case eh:o="ENVMAP_BLENDING_MIX";break;case fh:o="ENVMAP_BLENDING_ADD"}}var p,q,r=a.gammaFactor>0?a.gammaFactor:1,s=g.isWebGL2?"":$a(d.extensions,f,b),t=_a(i),u=h.createProgram();if(d.isRawShaderMaterial?(p=[t].filter(bb).join("\n"),p.length>0&&(p+="\n"),q=[s,t].filter(bb).join("\n"),q.length>0&&(q+="\n")):(p=["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,t,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+r,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+n:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.normalMap&&f.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&f.flatShading===!1?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+l:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&(g.isWebGL2||b.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(bb).join("\n"),q=[s,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,t,f.alphaTest?"#define ALPHATEST "+f.alphaTest+(f.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+r,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.matcap?"#define USE_MATCAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+m:"",f.envMap?"#define "+n:"",f.envMap?"#define "+o:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.normalMap&&f.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+l:"",f.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&(g.isWebGL2||b.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&(g.isWebGL2||b.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",f.toneMapping!==gh?"#define TONE_MAPPING":"",f.toneMapping!==gh?el.tonemapping_pars_fragment:"",f.toneMapping!==gh?Za("toneMapping",f.toneMapping):"",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.matcapEncoding||f.envMapEncoding||f.emissiveMapEncoding?el.encodings_pars_fragment:"",f.mapEncoding?Xa("mapTexelToLinear",f.mapEncoding):"",f.matcapEncoding?Xa("matcapTexelToLinear",f.matcapEncoding):"",f.envMapEncoding?Xa("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?Xa("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.outputEncoding?Ya("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(bb).join("\n")),j=eb(j),j=cb(j,f),j=db(j,f),k=eb(k),k=cb(k,f),k=db(k,f),j=fb(j),k=fb(k),g.isWebGL2&&!d.isRawShaderMaterial){var v=!1,w=/^\s*#version\s+300\s+es\s*\n/;d.isShaderMaterial&&null!==j.match(w)&&null!==k.match(w)&&(v=!0,j=j.replace(w,""),k=k.replace(w,"")),p=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+p,q=["#version 300 es\n","#define varying in",v?"":"out highp vec4 pc_fragColor;",v?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+q}var x=p+j,y=q+k,z=Va(h,35633,x),A=Va(h,35632,y);h.attachShader(u,z),h.attachShader(u,A),void 0!==d.index0AttributeName?h.bindAttribLocation(u,0,d.index0AttributeName):f.morphTargets===!0&&h.bindAttribLocation(u,0,"position"),h.linkProgram(u);var B=h.getProgramInfoLog(u).trim(),C=h.getShaderInfoLog(z).trim(),D=h.getShaderInfoLog(A).trim(),E=!0,F=!0;h.getProgramParameter(u,35714)===!1?(E=!1,console.error("THREE.WebGLProgram: shader error: ",h.getError(),"35715",h.getProgramParameter(u,35715),"gl.getProgramInfoLog",B,C,D)):""!==B?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",B):(""===C||""===D)&&(F=!1),F&&(this.diagnostics={runnable:E,material:d,programLog:B,vertexShader:{log:C,prefix:p},fragmentShader:{log:D,prefix:q}}),h.deleteShader(z),h.deleteShader(A);var G;this.getUniforms=function(){return void 0===G&&(G=new Ta(h,u,a)),G};var H;return this.getAttributes=function(){return void 0===H&&(H=ab(h,u)),H},this.destroy=function(){h.deleteProgram(u),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=e.name,this.id=wl++,this.code=c,this.usedTimes=1,this.program=u,this.vertexShader=z,this.fragmentShader=A,this}function hb(a,b,c){function d(a){var b=a.skeleton,d=b.bones;if(c.floatVertexTextures)return 1024;var e=c.maxVertexUniforms,f=Math.floor((e-20)/4),g=Math.min(f,d.length);return g<d.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+d.length+" bones. This GPU supports "+g+"."),0):g}function e(a,b){var c;return a?a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding):c=Fi,c===Fi&&b&&(c=Hi),c}var f=[],g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(b,f,h,i,j,k,l){var m=g[b.type],n=l.isSkinnedMesh?d(l):0,o=c.precision;null!==b.precision&&(o=c.getMaxPrecision(b.precision),o!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",o,"instead."));var p=a.getRenderTarget(),q={shaderID:m,precision:o,supportsVertexTextures:c.vertexTextures,outputEncoding:e(p?p.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:e(b.map,a.gammaInput),matcap:!!b.matcap,matcapEncoding:e(b.matcap,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:e(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(b.envMap.mapping===sh||b.envMap.mapping===th),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:e(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===Qi,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!i,useFog:b.fog,fogExp:i&&i.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&n>0,maxBones:n,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numRectAreaLights:f.rectArea.length,numHemiLights:f.hemi.length,numClippingPlanes:j,numClipIntersection:k,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&l.receiveShadow&&h.length>0,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,alphaTest:b.alphaTest,doubleSided:b.side===vg,flipSided:b.side===ug,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1};return q},this.getProgramCode=function(b,c){var d=[];if(c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader)),void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(var f=0;f<h.length;f++)d.push(c[h[f]]);return d.push(b.onBeforeCompile.toString()),d.push(a.gammaOutput),d.push(a.gammaFactor),d.join()},this.acquireProgram=function(d,e,g,h){for(var i,j=0,k=f.length;k>j;j++){var l=f[j];if(l.code===h){i=l,++i.usedTimes;break}}return void 0===i&&(i=new gb(a,b,h,d,e,g,c),f.push(i)),i},this.releaseProgram=function(a){if(0===--a.usedTimes){var b=f.indexOf(a);f[b]=f[f.length-1],f.pop(),a.destroy()}},this.programs=f}function ib(){function a(a){var b=e.get(a);return void 0===b&&(b={},e.set(a,b)),b}function b(a){e["delete"](a)}function c(a,b,c){e.get(a)[b]=c}function d(){e=new WeakMap}var e=new WeakMap;return{get:a,remove:b,update:c,dispose:d}}function jb(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function kb(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function lb(){function a(){g=0,h.length=0,i.length=0}function b(a,b,c,d,e,h){var i=f[g];return void 0===i?(i={id:a.id,object:a,geometry:b,material:c,program:c.program,groupOrder:d,renderOrder:a.renderOrder,z:e,group:h},f[g]=i):(i.id=a.id,i.object=a,i.geometry=b,i.material=c,i.program=c.program,i.groupOrder=d,i.renderOrder=a.renderOrder,i.z=e,i.group=h),g++,i}function c(a,c,d,e,f,g){var j=b(a,c,d,e,f,g);(d.transparent===!0?i:h).push(j)}function d(a,c,d,e,f,g){var j=b(a,c,d,e,f,g);(d.transparent===!0?i:h).unshift(j)}function e(){h.length>1&&h.sort(jb),i.length>1&&i.sort(kb)}var f=[],g=0,h=[],i=[];return{opaque:h,transparent:i,init:a,push:c,unshift:d,sort:e}}function mb(){function a(b){var c=b.target;c.removeEventListener("dispose",a),delete d[c.id]}function b(b,c){var e,f=d[b.id];return void 0===f?(e=new lb,d[b.id]={},d[b.id][c.id]=e,b.addEventListener("dispose",a)):(e=f[c.id],void 0===e&&(e=new lb,f[c.id]=e)),e}function c(){d={}}var d={};return{get:b,dispose:c}}function nb(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];var d;switch(b.type){case"DirectionalLight":d={direction:new f,color:new t,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case"SpotLight":d={position:new f,direction:new f,color:new t,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case"PointLight":d={position:new f,color:new t,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":d={direction:new f,skyColor:new t,groundColor:new t};break;case"RectAreaLight":d={color:new t,position:new f,halfWidth:new f,halfHeight:new f}}return a[b.id]=d,d}}}function ob(){function a(a,d,f){for(var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=f.matrixWorldInverse,r=0,s=a.length;s>r;r++){var t=a[r],u=t.color,v=t.intensity,w=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)i+=u.r*v,j+=u.g*v,k+=u.b*v;else if(t.isDirectionalLight){var y=b.get(t);if(y.color.copy(t.color).multiplyScalar(t.intensity),y.direction.setFromMatrixPosition(t.matrixWorld),e.setFromMatrixPosition(t.target.matrixWorld),y.direction.sub(e),y.direction.transformDirection(q),y.shadow=t.castShadow,t.castShadow){var z=t.shadow;y.shadowBias=z.bias,y.shadowRadius=z.radius,y.shadowMapSize=z.mapSize}c.directionalShadowMap[l]=x,c.directionalShadowMatrix[l]=t.shadow.matrix,c.directional[l]=y,l++}else if(t.isSpotLight){var y=b.get(t);if(y.position.setFromMatrixPosition(t.matrixWorld),y.position.applyMatrix4(q),y.color.copy(u).multiplyScalar(v),y.distance=w,y.direction.setFromMatrixPosition(t.matrixWorld),e.setFromMatrixPosition(t.target.matrixWorld),y.direction.sub(e),y.direction.transformDirection(q),y.coneCos=Math.cos(t.angle),y.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),y.decay=t.decay,y.shadow=t.castShadow,t.castShadow){var z=t.shadow;y.shadowBias=z.bias,y.shadowRadius=z.radius,y.shadowMapSize=z.mapSize}c.spotShadowMap[n]=x,c.spotShadowMatrix[n]=t.shadow.matrix,c.spot[n]=y,n++}else if(t.isRectAreaLight){var y=b.get(t);y.color.copy(u).multiplyScalar(v),y.position.setFromMatrixPosition(t.matrixWorld),y.position.applyMatrix4(q),h.identity(),g.copy(t.matrixWorld),g.premultiply(q),h.extractRotation(g),y.halfWidth.set(.5*t.width,0,0),y.halfHeight.set(0,.5*t.height,0),y.halfWidth.applyMatrix4(h),y.halfHeight.applyMatrix4(h),c.rectArea[o]=y,o++}else if(t.isPointLight){var y=b.get(t);if(y.position.setFromMatrixPosition(t.matrixWorld),y.position.applyMatrix4(q),y.color.copy(t.color).multiplyScalar(t.intensity),y.distance=t.distance,y.decay=t.decay,y.shadow=t.castShadow,t.castShadow){var z=t.shadow;y.shadowBias=z.bias,y.shadowRadius=z.radius,y.shadowMapSize=z.mapSize,y.shadowCameraNear=z.camera.near,y.shadowCameraFar=z.camera.far}c.pointShadowMap[m]=x,c.pointShadowMatrix[m]=t.shadow.matrix,c.point[m]=y,m++}else if(t.isHemisphereLight){var y=b.get(t);y.direction.setFromMatrixPosition(t.matrixWorld),y.direction.transformDirection(q),y.direction.normalize(),y.skyColor.copy(t.color).multiplyScalar(v),y.groundColor.copy(t.groundColor).multiplyScalar(v),c.hemi[p]=y,p++}}c.ambient[0]=i,c.ambient[1]=j,c.ambient[2]=k,c.directional.length=l,c.spot.length=n,c.rectArea.length=o,c.point.length=m,c.hemi.length=p,c.hash.stateID=c.id,c.hash.directionalLength=l,c.hash.pointLength=m,c.hash.spotLength=n,c.hash.rectAreaLength=o,c.hash.hemiLength=p,c.hash.shadowsLength=d.length}var b=new nb,c={id:xl++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},e=new f,g=new d,h=new d;return{setup:a,state:c}}function pb(){function a(){f.length=0,g.length=0}function b(a){f.push(a)}function c(a){g.push(a)}function d(a){e.setup(f,g,a)}var e=new ob,f=[],g=[],h={lightsArray:f,shadowsArray:g,lights:e};return{init:a,state:h,setupLights:d,pushLight:b,pushShadow:c}}function qb(){function a(b){var c=b.target;c.removeEventListener("dispose",a),delete d[c.id]}function b(b,c){var e;return void 0===d[b.id]?(e=new pb,d[b.id]={},d[b.id][c.id]=e,b.addEventListener("dispose",a)):void 0===d[b.id][c.id]?(e=new pb,d[b.id][c.id]=e):e=d[b.id][c.id],e}function c(){d={}}var d={};return{get:b,dispose:c}}function rb(a){S.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ni,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(a)}function sb(a){S.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new f,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(a)}function tb(a,b,e){function g(b,c,d,e,f,g){var h=b.geometry,i=null,j=u,k=b.customDepthMaterial;if(d&&(j=v,k=b.customDistanceMaterial),k)i=k;else{var l=!1;c.morphTargets&&(h&&h.isBufferGeometry?l=h.morphAttributes&&h.morphAttributes.position&&h.morphAttributes.position.length>0:h&&h.isGeometry&&(l=h.morphTargets&&h.morphTargets.length>0)),b.isSkinnedMesh&&c.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",b);var m=b.isSkinnedMesh&&c.skinning,n=0;l&&(n|=r),m&&(n|=s),i=j[n]}if(a.localClippingEnabled&&c.clipShadows===!0&&0!==c.clippingPlanes.length){var o=i.uuid,p=c.uuid,q=w[o];void 0===q&&(q={},w[o]=q);var t=q[p];void 0===t&&(t=i.clone(),q[p]=t),i=t}return i.visible=c.visible,i.wireframe=c.wireframe,i.side=null!=c.shadowSide?c.shadowSide:x[c.side],i.clipShadows=c.clipShadows,i.clippingPlanes=c.clippingPlanes,i.clipIntersection=c.clipIntersection,i.wireframeLinewidth=c.wireframeLinewidth,i.linewidth=c.linewidth,d&&i.isMeshDistanceMaterial&&(i.referencePosition.copy(e),i.nearDistance=f,i.farDistance=g),i}function h(c,d,e,f){if(c.visible!==!1){var i=c.layers.test(d.layers);if(i&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||k.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,c.matrixWorld);var j=b.update(c),l=c.material;if(Array.isArray(l))for(var m=j.groups,n=0,o=m.length;o>n;n++){var q=m[n],r=l[q.materialIndex];if(r&&r.visible){var s=g(c,r,f,p,e.near,e.far);a.renderBufferDirect(e,null,j,s,c,q)}}else if(l.visible){var s=g(c,l,f,p,e.near,e.far);a.renderBufferDirect(e,null,j,s,c,null)}}for(var t=c.children,u=0,v=t.length;v>u;u++)h(t[u],d,e,f)}}for(var k=new q,l=new d,m=new c,n=new c(e,e),o=new f,p=new f,r=1,s=2,t=(r|s)+1,u=new Array(t),v=new Array(t),w={},x={0:ug,1:tg,2:vg},y=[new f(1,0,0),new f(-1,0,0),new f(0,0,1),new f(0,0,-1),new f(0,1,0),new f(0,-1,0)],z=[new f(0,1,0),new f(0,1,0),new f(0,1,0),new f(0,1,0),new f(0,0,1),new f(0,0,-1)],A=[new i,new i,new i,new i,new i,new i],B=0;B!==t;++B){var C=0!==(B&r),D=0!==(B&s),E=new rb({depthPacking:Oi,morphTargets:C,skinning:D});u[B]=E;var F=new sb({morphTargets:C,skinning:D});v[B]=F}var G=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=rg,this.render=function(b,c,d){if(G.enabled!==!1&&(G.autoUpdate!==!1||G.needsUpdate!==!1)&&0!==b.length){var e=a.state;e.setBlending(Bg),e.buffers.color.setClear(1,1,1,1),e.buffers.depth.setTest(!0),e.setScissorTest(!1);for(var f,g=0,i=b.length;i>g;g++){var q=b[g],r=q.shadow,s=q&&q.isPointLight;if(void 0!==r){var t=r.camera;if(m.copy(r.mapSize),m.min(n),s){var u=m.x,v=m.y;A[0].set(2*u,v,u,v),A[1].set(0,v,u,v),A[2].set(3*u,v,u,v),A[3].set(u,v,u,v),A[4].set(3*u,0,u,v),A[5].set(u,0,u,v),m.x*=4,m.y*=2}if(null===r.map){var w={minFilter:xh,magFilter:xh,format:Rh};r.map=new j(m.x,m.y,w),r.map.texture.name=q.name+".shadowMap",t.updateProjectionMatrix()}r.isSpotLightShadow&&r.update(q);var x=r.map,B=r.matrix;p.setFromMatrixPosition(q.matrixWorld),t.position.copy(p),s?(f=6,B.makeTranslation(-p.x,-p.y,-p.z)):(f=1,o.setFromMatrixPosition(q.target.matrixWorld),t.lookAt(o),t.updateMatrixWorld(),B.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B.multiply(t.projectionMatrix),B.multiply(t.matrixWorldInverse)),a.setRenderTarget(x),a.clear();for(var C=0;f>C;C++){if(s){o.copy(t.position),o.add(y[C]),t.up.copy(z[C]),t.lookAt(o),t.updateMatrixWorld();var D=A[C];e.viewport(D)}l.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromMatrix(l),h(c,d,t,s)}}else console.warn("THREE.WebGLShadowMap:",q,"has no shadow.")}G.needsUpdate=!1}}}function ub(a,b,c,d){function e(){var b=!1,c=new i,d=null,e=new i(0,0,0,0);return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){h===!0&&(b*=g,d*=g,f*=g),c.set(b,d,f,g),e.equals(c)===!1&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1,d=null,e.set(-1,0,0,0)}}}function f(){var b=!1,c=null,d=null,e=null;return{setTest:function(a){a?n(2929):o(2929)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case Xg:a.depthFunc(512);break;case Yg:a.depthFunc(519);break;case Zg:a.depthFunc(513);break;case $g:a.depthFunc(515);break;case _g:a.depthFunc(514);break;case ah:a.depthFunc(518);break;case bh:a.depthFunc(516);break;case ch:a.depthFunc(517);break;default:a.depthFunc(515)}else a.depthFunc(515);d=b}},setLocked:function(a){b=a},setClear:function(b){e!==b&&(a.clearDepth(b),e=b)},reset:function(){b=!1,c=null,d=null,e=null}}}function g(){var b=!1,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null;return{setTest:function(a){a?n(2960):o(2960)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,g){(d!==b||e!==c||f!==g)&&(a.stencilFunc(b,c,g),d=b,e=c,f=g)},setOp:function(b,c,d){(g!==b||h!==c||i!==d)&&(a.stencilOp(b,c,d),g=b,h=c,i=d)},setLocked:function(a){b=a},setClear:function(b){j!==b&&(a.clearStencil(b),j=b)},reset:function(){b=!1,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null}}}function h(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f),a.texParameteri(b,10241,9728),a.texParameteri(b,10240,9728);for(var g=0;d>g;g++)a.texImage2D(c+g,0,6408,1,1,0,6408,5121,e);return f}function j(){for(var a=0,b=K.length;b>a;a++)K[a]=0}function k(a){l(a,0)}function l(c,e){if(K[c]=1,0===L[c]&&(a.enableVertexAttribArray(c),L[c]=1),M[c]!==e){var f=d.isWebGL2?a:b.get("ANGLE_instanced_arrays");f[d.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](c,e),M[c]=e}}function m(){for(var b=0,c=L.length;b!==c;++b)L[b]!==K[b]&&(a.disableVertexAttribArray(b),L[b]=0)}function n(b){N[b]!==!0&&(a.enable(b),N[b]=!0)}function o(b){N[b]!==!1&&(a.disable(b),N[b]=!1)}function p(){if(null===O&&(O=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")||b.get("WEBGL_compressed_texture_astc")))for(var c=a.getParameter(34467),d=0;d<c.length;d++)O.push(c[d]);return O}function q(b){return P!==b?(a.useProgram(b),P=b,!0):!1}function r(b,d,e,f,g,h,i,j){if(b===Bg)return void(Q&&(o(3042),Q=!1));if(Q||(n(3042),Q=!0),b===Gg)g=g||d,h=h||e,i=i||f,(d!==S||g!==V)&&(a.blendEquationSeparate(c.convert(d),c.convert(g)),S=d,V=g),(e!==T||f!==U||h!==W||i!==X)&&(a.blendFuncSeparate(c.convert(e),c.convert(f),c.convert(h),c.convert(i)),T=e,U=f,W=h,X=i),R=b,Y=null;else if(b!==R||j!==Y){if((S!==Hg||V!==Hg)&&(a.blendEquation(32774),S=Hg,V=Hg),j)switch(b){case Cg:a.blendFuncSeparate(1,771,1,771);break;case Dg:a.blendFunc(1,1);break;case Eg:a.blendFuncSeparate(0,0,769,771);break;case Fg:a.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",b)}else switch(b){case Cg:a.blendFuncSeparate(770,771,1,771);break;case Dg:a.blendFunc(770,1);break;case Eg:a.blendFunc(0,769);break;case Fg:a.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",b)}T=null,U=null,W=null,X=null,R=b,Y=j}}function s(a,b){a.side===vg?o(2884):n(2884);var c=a.side===ug;b&&(c=!c),t(c),a.blending===Cg&&a.transparent===!1?r(Bg):r(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha),H.setFunc(a.depthFunc),H.setTest(a.depthTest),H.setMask(a.depthWrite),G.setMask(a.colorWrite),w(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function t(b){Z!==b&&(b?a.frontFace(2304):a.frontFace(2305),Z=b)}function u(b){b!==kg?(n(2884),b!==$&&(b===lg?a.cullFace(1029):b===mg?a.cullFace(1028):a.cullFace(1032))):o(2884),$=b}function v(b){b!==_&&(da&&a.lineWidth(b),_=b)}function w(b,c,d){b?(n(32823),(aa!==c||ba!==d)&&(a.polygonOffset(c,d),aa=c,ba=d)):o(32823)}function x(a){a?n(3089):o(3089)}function y(b){void 0===b&&(b=33984+ca-1),ga!==b&&(a.activeTexture(b),ga=b)}function z(b,c){null===ga&&y();var d=ha[ga];void 0===d&&(d={type:void 0,texture:void 0},ha[ga]=d),(d.type!==b||d.texture!==c)&&(a.bindTexture(b,c||ka[b]),d.type=b,d.texture=c)}function A(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error("THREE.WebGLState:",b)}}function B(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error("THREE.WebGLState:",b)}}function C(){try{a.texImage3D.apply(a,arguments)}catch(b){console.error("THREE.WebGLState:",b)}}function D(b){ia.equals(b)===!1&&(a.scissor(b.x,b.y,b.z,b.w),ia.copy(b))}function E(b){ja.equals(b)===!1&&(a.viewport(b.x,b.y,b.z,b.w),ja.copy(b))}function F(){for(var b=0;b<L.length;b++)1===L[b]&&(a.disableVertexAttribArray(b),L[b]=0);N={},O=null,ga=null,ha={},P=null,R=null,Z=null,$=null,G.reset(),H.reset(),I.reset()}var G=new e,H=new f,I=new g,J=a.getParameter(34921),K=new Uint8Array(J),L=new Uint8Array(J),M=new Uint8Array(J),N={},O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=null,X=null,Y=!1,Z=null,$=null,_=null,aa=null,ba=null,ca=a.getParameter(35661),da=!1,ea=0,fa=a.getParameter(7938);-1!==fa.indexOf("WebGL")?(ea=parseFloat(/^WebGL\ ([0-9])/.exec(fa)[1]),da=ea>=1):-1!==fa.indexOf("OpenGL ES")&&(ea=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(fa)[1]),da=ea>=2);var ga=null,ha={},ia=new i,ja=new i,ka={};return ka[3553]=h(3553,3553,1),ka[34067]=h(34067,34069,6),G.setClear(0,0,0,1),H.setClear(1),
I.setClear(0),n(2929),H.setFunc($g),t(!1),u(lg),n(2884),r(Bg),{buffers:{color:G,depth:H,stencil:I},initAttributes:j,enableAttribute:k,enableAttributeAndDivisor:l,disableUnusedAttributes:m,enable:n,disable:o,getCompressedTextureFormats:p,useProgram:q,setBlending:r,setMaterial:s,setFlipSided:t,setCullFace:u,setLineWidth:v,setPolygonOffset:w,setScissorTest:x,activeTexture:y,bindTexture:z,compressedTexImage2D:A,texImage2D:B,texImage3D:C,scissor:D,viewport:E,reset:F}}function vb(a,b,c,d,e,f,g){function h(a,b,c,d){var e=1;if((a.width>d||a.height>d)&&(e=d/Math.max(a.width,a.height)),1>e||b===!0){if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageBitmap){void 0===H&&(H=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));var f=c?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):H,g=b?Ri.floorPowerOfTwo:Math.floor;f.width=g(e*a.width),f.height=g(e*a.height);var h=f.getContext("2d");return h.drawImage(a,0,0,f.width,f.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+a.width+"x"+a.height+") to ("+f.width+"x"+f.height+")."),f}return"data"in a&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+a.width+"x"+a.height+")."),a}return a}function i(a){return Ri.isPowerOfTwo(a.width)&&Ri.isPowerOfTwo(a.height)}function j(a){return e.isWebGL2?!1:a.wrapS!==vh||a.wrapT!==vh||a.minFilter!==xh&&a.minFilter!==Ah}function k(a,b){return a.generateMipmaps&&b&&a.minFilter!==xh&&a.minFilter!==Ah}function l(b,c,e,f){a.generateMipmap(b);var g=d.get(c);g.__maxMipLevel=Math.log(Math.max(e,f))*Math.LOG2E}function m(a,c){if(!e.isWebGL2)return a;var d=a;return 6403===a&&(5126===c&&(d=33326),5131===c&&(d=33325),5121===c&&(d=33321)),6407===a&&(5126===c&&(d=34837),5131===c&&(d=34843),5121===c&&(d=32849)),6408===a&&(5126===c&&(d=34836),5131===c&&(d=34842),5121===c&&(d=32856)),33325===d||33326===d||34842===d||34836===d?b.get("EXT_color_buffer_float"):(34843===d||34837===d)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),d}function n(a){return a===xh||a===yh||a===zh?9728:9729}function o(a){var b=a.target;b.removeEventListener("dispose",o),q(b),b.isVideoTexture&&delete I[b.id],g.memory.textures--}function p(a){var b=a.target;b.removeEventListener("dispose",p),r(b),g.memory.textures--}function q(b){var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)return;a.deleteTexture(c.__webglTexture)}d.remove(b)}function r(b){var c=d.get(b),e=d.get(b.texture);if(b){if(void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture),b.depthTexture&&b.depthTexture.dispose(),b.isWebGLRenderTargetCube)for(var f=0;6>f;f++)a.deleteFramebuffer(c.__webglFramebuffer[f]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[f]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture),d.remove(b)}}function s(a,b){var e=d.get(a);if(a.isVideoTexture&&G(a),a.version>0&&e.__version!==a.version){var f=a.image;if(void 0===f)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(f.complete!==!1)return void x(e,a,b);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}c.activeTexture(33984+b),c.bindTexture(3553,e.__webglTexture)}function t(a,b){var e=d.get(a);return a.version>0&&e.__version!==a.version?void x(e,a,b):(c.activeTexture(33984+b),void c.bindTexture(32879,e.__webglTexture))}function u(b,j){var n=d.get(b);if(6===b.image.length)if(b.version>0&&n.__version!==b.version){n.__image__webglTextureCube||(b.addEventListener("dispose",o),n.__image__webglTextureCube=a.createTexture(),g.memory.textures++),c.activeTexture(33984+j),c.bindTexture(34067,n.__image__webglTextureCube),a.pixelStorei(37440,b.flipY);for(var p=b&&b.isCompressedTexture,q=b.image[0]&&b.image[0].isDataTexture,r=[],s=0;6>s;s++)p||q?r[s]=q?b.image[s].image:b.image[s]:r[s]=h(b.image[s],!1,!0,e.maxCubemapSize);var t=r[0],u=i(t)||e.isWebGL2,v=f.convert(b.format),x=f.convert(b.type),y=m(v,x);w(34067,b,u);for(var s=0;6>s;s++)if(p)for(var z,A=r[s].mipmaps,B=0,C=A.length;C>B;B++)z=A[B],b.format!==Rh&&b.format!==Qh?c.getCompressedTextureFormats().indexOf(v)>-1?c.compressedTexImage2D(34069+s,B,y,z.width,z.height,0,z.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c.texImage2D(34069+s,B,y,z.width,z.height,0,v,x,z.data);else q?c.texImage2D(34069+s,0,y,r[s].width,r[s].height,0,v,x,r[s].data):c.texImage2D(34069+s,0,y,v,x,r[s]);p?n.__maxMipLevel=A.length-1:n.__maxMipLevel=0,k(b,u)&&l(34067,b,t.width,t.height),n.__version=b.version,b.onUpdate&&b.onUpdate(b)}else c.activeTexture(33984+j),c.bindTexture(34067,n.__image__webglTextureCube)}function v(a,b){c.activeTexture(33984+b),c.bindTexture(34067,d.get(a).__webglTexture)}function w(c,g,h){var i;if(h?(a.texParameteri(c,10242,f.convert(g.wrapS)),a.texParameteri(c,10243,f.convert(g.wrapT)),a.texParameteri(c,10240,f.convert(g.magFilter)),a.texParameteri(c,10241,f.convert(g.minFilter))):(a.texParameteri(c,10242,33071),a.texParameteri(c,10243,33071),(g.wrapS!==vh||g.wrapT!==vh)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(c,10240,n(g.magFilter)),a.texParameteri(c,10241,n(g.minFilter)),g.minFilter!==xh&&g.minFilter!==Ah&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),i=b.get("EXT_texture_filter_anisotropic")){if(g.type===Jh&&null===b.get("OES_texture_float_linear"))return;if(g.type===Kh&&null===(e.isWebGL2||b.get("OES_texture_half_float_linear")))return;(g.anisotropy>1||d.get(g).__currentAnisotropy)&&(a.texParameterf(c,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}}function x(b,d,n){var p;p=d.isDataTexture3D?32879:3553,void 0===b.__webglInit&&(b.__webglInit=!0,d.addEventListener("dispose",o),b.__webglTexture=a.createTexture(),g.memory.textures++),c.activeTexture(33984+n),c.bindTexture(p,b.__webglTexture),a.pixelStorei(37440,d.flipY),a.pixelStorei(37441,d.premultiplyAlpha),a.pixelStorei(3317,d.unpackAlignment);var q=j(d)&&i(d.image)===!1,r=h(d.image,q,!1,e.maxTextureSize),s=i(r)||e.isWebGL2,t=f.convert(d.format),u=f.convert(d.type),v=m(t,u);w(p,d,s);var x,y=d.mipmaps;if(d.isDepthTexture){if(v=6402,d.type===Jh){if(!e.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");v=36012}else e.isWebGL2&&(v=33189);d.format===Vh&&6402===v&&d.type!==Gh&&d.type!==Ih&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),d.type=Gh,u=f.convert(d.type)),d.format===Wh&&(v=34041,d.type!==Oh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),d.type=Oh,u=f.convert(d.type))),c.texImage2D(3553,0,v,r.width,r.height,0,t,u,null)}else if(d.isDataTexture)if(y.length>0&&s){for(var z=0,A=y.length;A>z;z++)x=y[z],c.texImage2D(3553,z,v,x.width,x.height,0,t,u,x.data);d.generateMipmaps=!1,b.__maxMipLevel=y.length-1}else c.texImage2D(3553,0,v,r.width,r.height,0,t,u,r.data),b.__maxMipLevel=0;else if(d.isCompressedTexture){for(var z=0,A=y.length;A>z;z++)x=y[z],d.format!==Rh&&d.format!==Qh?c.getCompressedTextureFormats().indexOf(t)>-1?c.compressedTexImage2D(3553,z,v,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):c.texImage2D(3553,z,v,x.width,x.height,0,t,u,x.data);b.__maxMipLevel=y.length-1}else if(d.isDataTexture3D)c.texImage3D(32879,0,v,r.width,r.height,r.depth,0,t,u,r.data),b.__maxMipLevel=0;else if(y.length>0&&s){for(var z=0,A=y.length;A>z;z++)x=y[z],c.texImage2D(3553,z,v,t,u,x);d.generateMipmaps=!1,b.__maxMipLevel=y.length-1}else c.texImage2D(3553,0,v,t,u,r),b.__maxMipLevel=0;k(d,s)&&l(3553,d,r.width,r.height),b.__version=d.version,d.onUpdate&&d.onUpdate(d)}function y(b,e,g,h){var i=f.convert(e.texture.format),j=f.convert(e.texture.type),k=m(i,j);c.texImage2D(h,0,k,e.width,e.height,0,i,j,null),a.bindFramebuffer(36160,b),a.framebufferTexture2D(36160,g,h,d.get(e.texture).__webglTexture,0),a.bindFramebuffer(36160,null)}function z(b,c,d){if(a.bindRenderbuffer(36161,b),c.depthBuffer&&!c.stencilBuffer){if(d){var e=F(c);a.renderbufferStorageMultisample(36161,e,33189,c.width,c.height)}else a.renderbufferStorage(36161,33189,c.width,c.height);a.framebufferRenderbuffer(36160,36096,36161,b)}else if(c.depthBuffer&&c.stencilBuffer){if(d){var e=F(c);a.renderbufferStorageMultisample(36161,e,34041,c.width,c.height)}else a.renderbufferStorage(36161,34041,c.width,c.height);a.framebufferRenderbuffer(36160,33306,36161,b)}else{var g=f.convert(c.texture.format),h=f.convert(c.texture.type),i=m(g,h);if(d){var e=F(c);a.renderbufferStorageMultisample(36161,e,i,c.width,c.height)}else a.renderbufferStorage(36161,i,c.width,c.height)}a.bindRenderbuffer(36161,null)}function A(b,c){var e=c&&c.isWebGLRenderTargetCube;if(e)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,b),!c.depthTexture||!c.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(c.depthTexture).__webglTexture&&c.depthTexture.image.width===c.width&&c.depthTexture.image.height===c.height||(c.depthTexture.image.width=c.width,c.depthTexture.image.height=c.height,c.depthTexture.needsUpdate=!0),s(c.depthTexture,0);var f=d.get(c.depthTexture).__webglTexture;if(c.depthTexture.format===Vh)a.framebufferTexture2D(36160,36096,3553,f,0);else{if(c.depthTexture.format!==Wh)throw new Error("Unknown depthTexture format");a.framebufferTexture2D(36160,33306,3553,f,0)}}function B(b){var c=d.get(b),e=b.isWebGLRenderTargetCube===!0;if(b.depthTexture){if(e)throw new Error("target.depthTexture not supported in Cube render targets");A(c.__webglFramebuffer,b)}else if(e){c.__webglDepthbuffer=[];for(var f=0;6>f;f++)a.bindFramebuffer(36160,c.__webglFramebuffer[f]),c.__webglDepthbuffer[f]=a.createRenderbuffer(),z(c.__webglDepthbuffer[f],b)}else a.bindFramebuffer(36160,c.__webglFramebuffer),c.__webglDepthbuffer=a.createRenderbuffer(),z(c.__webglDepthbuffer,b);a.bindFramebuffer(36160,null)}function C(b){var h=d.get(b),j=d.get(b.texture);b.addEventListener("dispose",p),j.__webglTexture=a.createTexture(),g.memory.textures++;var n=b.isWebGLRenderTargetCube===!0,o=b.isWebGLMultisampleRenderTarget===!0,q=i(b)||e.isWebGL2;if(n){h.__webglFramebuffer=[];for(var r=0;6>r;r++)h.__webglFramebuffer[r]=a.createFramebuffer()}else if(h.__webglFramebuffer=a.createFramebuffer(),o)if(e.isWebGL2){h.__webglMultisampledFramebuffer=a.createFramebuffer(),h.__webglColorRenderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(36161,h.__webglColorRenderbuffer);var s=f.convert(b.texture.format),t=f.convert(b.texture.type),u=m(s,t),v=F(b);a.renderbufferStorageMultisample(36161,v,u,b.width,b.height),a.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(36160,36064,36161,h.__webglColorRenderbuffer),a.bindRenderbuffer(36161,null),b.depthBuffer&&(h.__webglDepthRenderbuffer=a.createRenderbuffer(),z(h.__webglDepthRenderbuffer,b,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(n){c.bindTexture(34067,j.__webglTexture),w(34067,b.texture,q);for(var r=0;6>r;r++)y(h.__webglFramebuffer[r],b,36064,34069+r);k(b.texture,q)&&l(34067,b.texture,b.width,b.height),c.bindTexture(34067,null)}else c.bindTexture(3553,j.__webglTexture),w(3553,b.texture,q),y(h.__webglFramebuffer,b,36064,3553),k(b.texture,q)&&l(3553,b.texture,b.width,b.height),c.bindTexture(3553,null);b.depthBuffer&&B(b)}function D(a){var b=a.texture,f=i(a)||e.isWebGL2;if(k(b,f)){var g=a.isWebGLRenderTargetCube?34067:3553,h=d.get(b).__webglTexture;c.bindTexture(g,h),l(g,b,a.width,a.height),c.bindTexture(g,null)}}function E(b){if(b.isWebGLMultisampleRenderTarget)if(e.isWebGL2){var c=d.get(b);a.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,c.__webglFramebuffer);var f=b.width,g=b.height,h=16384;b.depthBuffer&&(h|=256),b.stencilBuffer&&(h|=1024),a.blitFramebuffer(0,0,f,g,0,0,f,g,h,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function F(a){return e.isWebGL2&&a.isWebGLMultisampleRenderTarget?Math.min(e.maxSamples,a.samples):0}function G(a){var b=a.id,c=g.render.frame;I[b]!==c&&(I[b]=c,a.update())}var H,I={};this.setTexture2D=s,this.setTexture3D=t,this.setTextureCube=u,this.setTextureCubeDynamic=v,this.setupRenderTarget=C,this.updateRenderTargetMipmap=D,this.updateMultisampleRenderTarget=E}function wb(a,b,c){function d(a){var d;if(a===uh)return 10497;if(a===vh)return 33071;if(a===wh)return 33648;if(a===xh)return 9728;if(a===yh)return 9984;if(a===zh)return 9986;if(a===Ah)return 9729;if(a===Bh)return 9985;if(a===Ch)return 9987;if(a===Dh)return 5121;if(a===Lh)return 32819;if(a===Mh)return 32820;if(a===Nh)return 33635;if(a===Eh)return 5120;if(a===Fh)return 5122;if(a===Gh)return 5123;if(a===Hh)return 5124;if(a===Ih)return 5125;if(a===Jh)return 5126;if(a===Kh){if(c.isWebGL2)return 5131;if(d=b.get("OES_texture_half_float"),null!==d)return d.HALF_FLOAT_OES}if(a===Ph)return 6406;if(a===Qh)return 6407;if(a===Rh)return 6408;if(a===Sh)return 6409;if(a===Th)return 6410;if(a===Vh)return 6402;if(a===Wh)return 34041;if(a===Xh)return 6403;if(a===Hg)return 32774;if(a===Ig)return 32778;if(a===Jg)return 32779;if(a===Mg)return 0;if(a===Ng)return 1;if(a===Og)return 768;if(a===Pg)return 769;if(a===Qg)return 770;if(a===Rg)return 771;if(a===Sg)return 772;if(a===Tg)return 773;if(a===Ug)return 774;if(a===Vg)return 775;if(a===Wg)return 776;if((a===Yh||a===Zh||a===$h||a===_h)&&(d=b.get("WEBGL_compressed_texture_s3tc"),null!==d)){if(a===Yh)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Zh)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===$h)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===_h)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((a===ai||a===bi||a===ci||a===di)&&(d=b.get("WEBGL_compressed_texture_pvrtc"),null!==d)){if(a===ai)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===bi)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===ci)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===di)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(a===ei&&(d=b.get("WEBGL_compressed_texture_etc1"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if((a===fi||a===gi||a===hi||a===ii||a===ji||a===ki||a===li||a===mi||a===ni||a===oi||a===pi||a===qi||a===ri||a===si)&&(d=b.get("WEBGL_compressed_texture_astc"),null!==d))return a;if(a===Kg||a===Lg){if(c.isWebGL2){if(a===Kg)return 32775;if(a===Lg)return 32776}if(d=b.get("EXT_blend_minmax"),null!==d){if(a===Kg)return d.MIN_EXT;if(a===Lg)return d.MAX_EXT}}if(a===Oh){if(c.isWebGL2)return 34042;if(d=b.get("WEBGL_depth_texture"),null!==d)return d.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:d}}function xb(){z.call(this),this.type="Group"}function yb(){z.call(this),this.type="Camera",this.matrixWorldInverse=new d,this.projectionMatrix=new d,this.projectionMatrixInverse=new d}function zb(a,b,c,d){yb.call(this),this.type="PerspectiveCamera",this.fov=void 0!==a?a:50,this.zoom=1,this.near=void 0!==c?c:.1,this.far=void 0!==d?d:2e3,this.focus=10,this.aspect=void 0!==b?b:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ab(a){zb.call(this),this.cameras=a||[]}function Bb(a,b,c){yl.setFromMatrixPosition(b.matrixWorld),zl.setFromMatrixPosition(c.matrixWorld);var d=yl.distanceTo(zl),e=b.projectionMatrix.elements,f=c.projectionMatrix.elements,g=e[14]/(e[10]-1),h=e[14]/(e[10]+1),i=(e[9]+1)/e[5],j=(e[9]-1)/e[5],k=(e[8]-1)/e[0],l=(f[8]+1)/f[0],m=g*k,n=g*l,o=d/(-k+l),p=o*-k;b.matrixWorld.decompose(a.position,a.quaternion,a.scale),a.translateX(p),a.translateZ(o),a.matrixWorld.compose(a.position,a.quaternion,a.scale),a.matrixWorldInverse.getInverse(a.matrixWorld);var q=g+o,r=h+o,s=m-p,t=n+(d-p),u=i*h/r*q,v=j*h/r*q;a.projectionMatrix.makePerspective(s,t,u,v,q,r)}function Cb(a){function b(){return null!==k&&k.isPresenting===!0}function c(){if(b()){var c=k.getEyeParameters("left"),d=c.renderWidth*q,e=c.renderHeight*q;A=a.getPixelRatio(),z=a.getSize(),a.setDrawingBufferSize(2*d,e,1),C.start()}else j.enabled&&a.setDrawingBufferSize(z.width,z.height,A),C.stop()}function g(a){for(var b=navigator.getGamepads&&navigator.getGamepads(),c=0,d=0,e=b.length;e>c;c++){var f=b[c];if(f&&("Daydream Controller"===f.id||"Gear VR Controller"===f.id||"Oculus Go Controller"===f.id||"OpenVR Gamepad"===f.id||f.id.startsWith("Oculus Touch")||f.id.startsWith("Spatial Controller"))){if(d===a)return f;d++}}}function h(){for(var a=0;a<n.length;a++){var b=n[a],c=g(a);if(void 0!==c&&void 0!==c.pose){if(null===c.pose)return;var d=c.pose;d.hasPosition===!1&&b.position.set(.2,-.6,-.05),null!==d.position&&b.position.fromArray(d.position),null!==d.orientation&&b.quaternion.fromArray(d.orientation),b.matrix.compose(b.position,b.quaternion,b.scale),b.matrix.premultiply(o),b.matrix.decompose(b.position,b.quaternion,b.scale),b.matrixWorldNeedsUpdate=!0,b.visible=!0;var e="Daydream Controller"===c.id?0:1;B[a]!==c.buttons[e].pressed&&(B[a]=c.buttons[e].pressed,B[a]===!0?b.dispatchEvent({type:"selectstart"}):(b.dispatchEvent({type:"selectend"}),b.dispatchEvent({type:"select"})))}else b.visible=!1}}var j=this,k=null,l=null,m=null,n=[],o=new d,p=new d,q=1,r="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(l=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",c,!1));var s=new d,t=new e,v=new f,w=new zb;w.bounds=new i(0,0,.5,1),w.layers.enable(1);var x=new zb;x.bounds=new i(.5,0,.5,1),x.layers.enable(2);var y=new Ab([w,x]);y.layers.enable(1),y.layers.enable(2);var z,A,B=[];this.enabled=!1,this.getController=function(a){var b=n[a];return void 0===b&&(b=new xb,b.matrixAutoUpdate=!1,b.visible=!1,n[a]=b),b},this.getDevice=function(){return k},this.setDevice=function(a){void 0!==a&&(k=a),C.setContext(a)},this.setFramebufferScaleFactor=function(a){q=a},this.setFrameOfReferenceType=function(a){r=a},this.setPoseTarget=function(a){void 0!==a&&(m=a)},this.getCamera=function(a){var b="stage"===r?1.6:0;if(null===k)return a.position.set(0,b,0),a;if(k.depthNear=a.near,k.depthFar=a.far,k.getFrameData(l),"stage"===r){var c=k.stageParameters;c?o.fromArray(c.sittingToStandingTransform):o.makeTranslation(0,b,0)}var d=l.pose,e=null!==m?m:a;if(e.matrix.copy(o),e.matrix.decompose(e.position,e.quaternion,e.scale),null!==d.orientation&&(t.fromArray(d.orientation),e.quaternion.multiply(t)),null!==d.position&&(t.setFromRotationMatrix(o),v.fromArray(d.position),v.applyQuaternion(t),e.position.add(v)),e.updateMatrixWorld(),k.isPresenting===!1)return a;w.near=a.near,x.near=a.near,w.far=a.far,x.far=a.far,w.matrixWorldInverse.fromArray(l.leftViewMatrix),x.matrixWorldInverse.fromArray(l.rightViewMatrix),p.getInverse(o),"stage"===r&&(w.matrixWorldInverse.multiply(p),x.matrixWorldInverse.multiply(p));var f=e.parent;null!==f&&(s.getInverse(f.matrixWorld),w.matrixWorldInverse.multiply(s),x.matrixWorldInverse.multiply(s)),w.matrixWorld.getInverse(w.matrixWorldInverse),x.matrixWorld.getInverse(x.matrixWorldInverse),w.projectionMatrix.fromArray(l.leftProjectionMatrix),x.projectionMatrix.fromArray(l.rightProjectionMatrix),Bb(y,w,x);var g=k.getLayers();if(g.length){var i=g[0];null!==i.leftBounds&&4===i.leftBounds.length&&w.bounds.fromArray(i.leftBounds),null!==i.rightBounds&&4===i.rightBounds.length&&x.bounds.fromArray(i.rightBounds)}return h(),y},this.getStandingMatrix=function(){return o},this.isPresenting=b;var C=new u;this.setAnimationLoop=function(a){C.setAnimationLoop(a)},this.submitFrame=function(){b()&&k.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",c)}}function Db(a){function b(){return null!==j&&null!==l}function c(a){var b=o[p.indexOf(a.inputSource)];b&&b.dispatchEvent({type:a.type})}function d(){a.setFramebuffer(null),v.stop()}function e(a,b){null===b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,a.matrix),a.matrixWorldInverse.getInverse(a.matrixWorld)}function f(a,b){if(n=b.getDevicePose(l),null!==n)for(var c=j.baseLayer,d=b.views,e=0;e<d.length;e++){var f=d[e],g=c.getViewport(f),h=n.getViewMatrix(f),i=s.cameras[e];i.matrix.fromArray(h).getInverse(i.matrix),i.projectionMatrix.fromArray(f.projectionMatrix),i.viewport.set(g.x,g.y,g.width,g.height),0===e&&s.matrix.copy(i.matrix)}for(var e=0;e<o.length;e++){var k=o[e],m=p[e];if(m){var q=b.getInputPose(m,l);if(null!==q){"targetRay"in q?k.matrix.elements=q.targetRay.transformMatrix:"pointerMatrix"in q&&(k.matrix.elements=q.pointerMatrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.visible=!0;continue}}k.visible=!1}t&&t(a)}var g=a.context,h=null,j=null,k=1,l=null,m="stage",n=null,o=[],p=[],q=new zb;q.layers.enable(1),q.viewport=new i;var r=new zb;r.layers.enable(2),r.viewport=new i;var s=new Ab([q,r]);s.layers.enable(1),s.layers.enable(2),this.enabled=!1,this.getController=function(a){var b=o[a];return void 0===b&&(b=new xb,b.matrixAutoUpdate=!1,b.visible=!1,o[a]=b),b},this.getDevice=function(){return h},this.setDevice=function(a){void 0!==a&&(h=a),a instanceof XRDevice&&g.setCompatibleXRDevice(a)},this.setFramebufferScaleFactor=function(a){k=a},this.setFrameOfReferenceType=function(a){m=a},this.setSession=function(b){j=b,null!==j&&(j.addEventListener("select",c),j.addEventListener("selectstart",c),j.addEventListener("selectend",c),j.addEventListener("end",d),j.baseLayer=new XRWebGLLayer(j,g,{framebufferScaleFactor:k}),j.requestFrameOfReference(m).then(function(b){l=b,a.setFramebuffer(j.baseLayer.framebuffer),v.setContext(j),v.start()}),p=j.getInputSources(),j.addEventListener("inputsourceschange",function(){p=j.getInputSources(),console.log(p);for(var a=0;a<o.length;a++){var b=o[a];b.userData.inputSource=p[a]}}))},this.getCamera=function(a){if(b()){var c=a.parent,d=s.cameras;e(s,c);for(var f=0;f<d.length;f++)e(d[f],c);a.matrixWorld.copy(s.matrixWorld);for(var g=a.children,f=0,h=g.length;h>f;f++)g[f].updateMatrixWorld(!0);return Bb(s,q,r),s}return a},this.isPresenting=b;var t=null,v=new u;v.setAnimationLoop(f),this.setAnimationLoop=function(a){t=a},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function Eb(a){function b(){return null===ma?ya:1}function c(){Ka=new aa(ia),La=new $(ia,Ka,a),La.isWebGL2||(Ka.get("WEBGL_depth_texture"),Ka.get("OES_texture_float"),Ka.get("OES_texture_half_float"),Ka.get("OES_texture_half_float_linear"),Ka.get("OES_standard_derivatives"),Ka.get("OES_element_index_uint"),Ka.get("ANGLE_instanced_arrays")),Ka.get("OES_texture_float_linear"),_a=new wb(ia,Ka,La),Ma=new ub(ia,Ka,_a,La),Ma.scissor(ta.copy(Aa).multiplyScalar(ya)),Ma.viewport(sa.copy(za).multiplyScalar(ya)),Na=new da(ia),Oa=new ib,Pa=new vb(ia,Ka,Ma,Oa,La,_a,Na),Qa=new v(ia),Ra=new ba(ia,Qa,Na),Sa=new ga(Ra,Na),Ya=new fa(ia),Ua=new hb(ja,Ka,La),Va=new mb,Wa=new qb,Xa=new Y(ja,Ma,Sa,V),Za=new Z(ia,Ka,Na,La),$a=new ca(ia,Ka,Na,La),Na.programs=Ua.programs,ja.context=ia,ja.capabilities=La,ja.extensions=Ka,ja.properties=Oa,ja.renderLists=Va,ja.state=Ma,ja.info=Na}function e(a){a.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ka=!0}function g(){console.log("THREE.WebGLRenderer: Context Restored."),ka=!1,c()}function h(a){var b=a.target;b.removeEventListener("dispose",h),j(b)}function j(a){k(a),Oa.remove(a)}function k(a){var b=Oa.get(a).program;a.program=void 0,void 0!==b&&Ua.releaseProgram(b)}function l(a,b){a.render(function(a){ja.renderBufferImmediate(a,b)})}function n(a,b,c){if(c&&c.isInstancedBufferGeometry&!La.isWebGL2&&null===Ka.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Ma.initAttributes();var d=c.attributes,e=b.getAttributes(),f=a.defaultAttributeValues;for(var g in e){var h=e[g];if(h>=0){var i=d[g];if(void 0!==i){var j=i.normalized,k=i.itemSize,l=Qa.get(i);if(void 0===l)continue;var m=l.buffer,n=l.type,o=l.bytesPerElement;if(i.isInterleavedBufferAttribute){var p=i.data,q=p.stride,r=i.offset;p&&p.isInstancedInterleavedBuffer?(Ma.enableAttributeAndDivisor(h,p.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=p.meshPerAttribute*p.count)):Ma.enableAttribute(h),ia.bindBuffer(34962,m),ia.vertexAttribPointer(h,k,n,j,q*o,r*o)}else i.isInstancedBufferAttribute?(Ma.enableAttributeAndDivisor(h,i.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=i.meshPerAttribute*i.count)):Ma.enableAttribute(h),ia.bindBuffer(34962,m),ia.vertexAttribPointer(h,k,n,j,0,0)}else if(void 0!==f){var s=f[g];if(void 0!==s)switch(s.length){case 2:ia.vertexAttrib2fv(h,s);break;case 3:ia.vertexAttrib3fv(h,s);break;case 4:ia.vertexAttrib4fv(h,s);break;default:ia.vertexAttrib1fv(h,s)}}}}Ma.disableUnusedAttributes()}function o(a){ab.isPresenting()||cb&&cb(a)}function p(a,b,c,d){if(a.visible!==!1){var e=a.layers.test(b.layers);if(e)if(a.isGroup)c=a.renderOrder;else if(a.isLight)ha.pushLight(a),a.castShadow&&ha.pushShadow(a);else if(a.isSprite){if(!a.frustumCulled||Ca.intersectsSprite(a)){d&&Ha.setFromMatrixPosition(a.matrixWorld).applyMatrix4(Ga);var f=Sa.update(a),g=a.material;ea.push(a,f,g,c,Ha.z,null)}}else if(a.isImmediateRenderObject)d&&Ha.setFromMatrixPosition(a.matrixWorld).applyMatrix4(Ga),ea.push(a,null,a.material,c,Ha.z,null);else if((a.isMesh||a.isLine||a.isPoints)&&(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||Ca.intersectsObject(a))){d&&Ha.setFromMatrixPosition(a.matrixWorld).applyMatrix4(Ga);var f=Sa.update(a),g=a.material;if(Array.isArray(g))for(var h=f.groups,i=0,j=h.length;j>i;i++){var k=h[i],l=g[k.materialIndex];l&&l.visible&&ea.push(a,f,l,c,Ha.z,k)}else g.visible&&ea.push(a,f,g,c,Ha.z,null)}for(var m=a.children,i=0,j=m.length;j>i;i++)p(m[i],b,c,d)}}function s(a,b,c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e],h=g.object,i=g.geometry,j=void 0===d?g.material:d,k=g.group;if(c.isArrayCamera){ra=c;for(var l=c.cameras,m=0,n=l.length;n>m;m++){var o=l[m];if(h.layers.test(o.layers)){if("viewport"in o)Ma.viewport(sa.copy(o.viewport));else{var p=o.bounds,q=p.x*wa,r=p.y*xa,s=p.z*wa,u=p.w*xa;Ma.viewport(sa.set(q,r,s,u).multiplyScalar(ya))}ha.setupLights(o),t(h,b,o,i,j,k)}}}else ra=null,t(h,b,c,i,j,k)}}function t(a,b,c,d,e,f){if(a.onBeforeRender(ja,b,c,d,e,f),ha=Wa.get(b,ra||c),a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),a.isImmediateRenderObject){Ma.setMaterial(e);var g=x(c,b.fog,e,a);pa.geometry=null,pa.program=null,pa.wireframe=!1,l(a,g)}else ja.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(ja,b,c,d,e,f),ha=Wa.get(b,ra||c)}function w(a,b,c){var d=Oa.get(a),e=ha.state.lights,f=ha.state.shadowsArray,g=d.lightsHash,i=e.state.hash,j=Ua.getParameters(a,e.state,f,b,Da.numPlanes,Da.numIntersection,c),l=Ua.getProgramCode(a,j),m=d.program,n=!0;if(void 0===m)a.addEventListener("dispose",h);else if(m.code!==l)k(a);else if(g.stateID!==i.stateID||g.directionalLength!==i.directionalLength||g.pointLength!==i.pointLength||g.spotLength!==i.spotLength||g.rectAreaLength!==i.rectAreaLength||g.hemiLength!==i.hemiLength||g.shadowsLength!==i.shadowsLength)g.stateID=i.stateID,g.directionalLength=i.directionalLength,g.pointLength=i.pointLength,g.spotLength=i.spotLength,g.rectAreaLength=i.rectAreaLength,g.hemiLength=i.hemiLength,g.shadowsLength=i.shadowsLength,n=!1;else{if(void 0!==j.shaderID)return;n=!1}if(n){if(j.shaderID){var o=il[j.shaderID];d.shader={name:a.type,uniforms:r(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}}else d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader};a.onBeforeCompile(d.shader,ja),l=Ua.getProgramCode(a,j),m=Ua.acquireProgram(a,d.shader,j,l),d.program=m,a.program=m}var p=m.getAttributes();if(a.morphTargets){a.numSupportedMorphTargets=0;for(var q=0;q<ja.maxMorphTargets;q++)p["morphTarget"+q]>=0&&a.numSupportedMorphTargets++}if(a.morphNormals){a.numSupportedMorphNormals=0;for(var q=0;q<ja.maxMorphNormals;q++)p["morphNormal"+q]>=0&&a.numSupportedMorphNormals++}var s=d.shader.uniforms;(!a.isShaderMaterial&&!a.isRawShaderMaterial||a.clipping===!0)&&(d.numClippingPlanes=Da.numPlanes,d.numIntersection=Da.numIntersection,s.clippingPlanes=Da.uniform),d.fog=b,void 0===g&&(d.lightsHash=g={}),g.stateID=i.stateID,g.directionalLength=i.directionalLength,g.pointLength=i.pointLength,g.spotLength=i.spotLength,g.rectAreaLength=i.rectAreaLength,g.hemiLength=i.hemiLength,g.shadowsLength=i.shadowsLength,a.lights&&(s.ambientLightColor.value=e.state.ambient,s.directionalLights.value=e.state.directional,s.spotLights.value=e.state.spot,s.rectAreaLights.value=e.state.rectArea,s.pointLights.value=e.state.point,s.hemisphereLights.value=e.state.hemi,s.directionalShadowMap.value=e.state.directionalShadowMap,s.directionalShadowMatrix.value=e.state.directionalShadowMatrix,s.spotShadowMap.value=e.state.spotShadowMap,s.spotShadowMatrix.value=e.state.spotShadowMatrix,s.pointShadowMap.value=e.state.pointShadowMap,s.pointShadowMatrix.value=e.state.pointShadowMatrix);var t=d.program.getUniforms(),u=Ta.seqWithValue(t.seq,s);d.uniformsList=u}function x(a,b,c,d){va=0;var e=Oa.get(c),f=ha.state.lights,g=e.lightsHash,h=f.state.hash;if(Ea&&(Fa||a!==qa)){var i=a===qa&&c.id===oa;Da.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,i)}c.needsUpdate===!1&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:!c.lights||g.stateID===h.stateID&&g.directionalLength===h.directionalLength&&g.pointLength===h.pointLength&&g.spotLength===h.spotLength&&g.rectAreaLength===h.rectAreaLength&&g.hemiLength===h.hemiLength&&g.shadowsLength===h.shadowsLength?void 0===e.numClippingPlanes||e.numClippingPlanes===Da.numPlanes&&e.numIntersection===Da.numIntersection||(c.needsUpdate=!0):c.needsUpdate=!0),c.needsUpdate&&(w(c,b,d),c.needsUpdate=!1);var j=!1,k=!1,l=!1,n=e.program,o=n.getUniforms(),p=e.shader.uniforms;if(Ma.useProgram(n.program)&&(j=!0,k=!0,l=!0),c.id!==oa&&(oa=c.id,k=!0),j||qa!==a){if(o.setValue(ia,"projectionMatrix",a.projectionMatrix),La.logarithmicDepthBuffer&&o.setValue(ia,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2)),qa!==a&&(qa=a,k=!0,l=!0),c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap){var q=o.map.cameraPosition;void 0!==q&&q.setValue(ia,Ha.setFromMatrixPosition(a.matrixWorld))}(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&o.setValue(ia,"viewMatrix",a.matrixWorldInverse)}if(c.skinning){o.setOptional(ia,d,"bindMatrix"),o.setOptional(ia,d,"bindMatrixInverse");var r=d.skeleton;if(r){var s=r.bones;if(La.floatVertexTextures){if(void 0===r.boneTexture){var t=Math.sqrt(4*s.length);t=Ri.ceilPowerOfTwo(t),t=Math.max(t,4);var u=new Float32Array(t*t*4);u.set(r.boneMatrices);var v=new m(u,t,t,Rh,Jh);v.needsUpdate=!0,r.boneMatrices=u,r.boneTexture=v,r.boneTextureSize=t}o.setValue(ia,"boneTexture",r.boneTexture),o.setValue(ia,"boneTextureSize",r.boneTextureSize)}else o.setOptional(ia,r,"boneMatrices")}}return k&&(o.setValue(ia,"toneMappingExposure",ja.toneMappingExposure),o.setValue(ia,"toneMappingWhitePoint",ja.toneMappingWhitePoint),c.lights&&N(p,l),b&&c.fog&&D(p,b),c.isMeshBasicMaterial?y(p,c):c.isMeshLambertMaterial?(y(p,c),E(p,c)):c.isMeshPhongMaterial?(y(p,c),c.isMeshToonMaterial?G(p,c):F(p,c)):c.isMeshStandardMaterial?(y(p,c),c.isMeshPhysicalMaterial?I(p,c):H(p,c)):c.isMeshMatcapMaterial?(y(p,c),J(p,c)):c.isMeshDepthMaterial?(y(p,c),K(p,c)):c.isMeshDistanceMaterial?(y(p,c),
L(p,c)):c.isMeshNormalMaterial?(y(p,c),M(p,c)):c.isLineBasicMaterial?(z(p,c),c.isLineDashedMaterial&&A(p,c)):c.isPointsMaterial?B(p,c):c.isSpriteMaterial?C(p,c):c.isShadowMaterial&&(p.color.value=c.color,p.opacity.value=c.opacity),void 0!==p.ltc_1&&(p.ltc_1.value=hl.LTC_1),void 0!==p.ltc_2&&(p.ltc_2.value=hl.LTC_2),Ta.upload(ia,e.uniformsList,p,ja)),c.isShaderMaterial&&c.uniformsNeedUpdate===!0&&(Ta.upload(ia,e.uniformsList,p,ja),c.uniformsNeedUpdate=!1),c.isSpriteMaterial&&o.setValue(ia,"center",d.center),o.setValue(ia,"modelViewMatrix",d.modelViewMatrix),o.setValue(ia,"normalMatrix",d.normalMatrix),o.setValue(ia,"modelMatrix",d.matrixWorld),n}function y(a,b){a.opacity.value=b.opacity,b.color&&(a.diffuse.value=b.color),b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(a.map.value=b.map),b.alphaMap&&(a.alphaMap.value=b.alphaMap),b.specularMap&&(a.specularMap.value=b.specularMap),b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=Oa.get(b.envMap).__maxMipLevel),b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity),b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);var c;b.map?c=b.map:b.specularMap?c=b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap),void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),c.matrixAutoUpdate===!0&&c.updateMatrix(),a.uvTransform.value.copy(c.matrix))}function z(a,b){a.diffuse.value=b.color,a.opacity.value=b.opacity}function A(a,b){a.dashSize.value=b.dashSize,a.totalSize.value=b.dashSize+b.gapSize,a.scale.value=b.scale}function B(a,b){a.diffuse.value=b.color,a.opacity.value=b.opacity,a.size.value=b.size*ya,a.scale.value=.5*xa,a.map.value=b.map,null!==b.map&&(b.map.matrixAutoUpdate===!0&&b.map.updateMatrix(),a.uvTransform.value.copy(b.map.matrix))}function C(a,b){a.diffuse.value=b.color,a.opacity.value=b.opacity,a.rotation.value=b.rotation,a.map.value=b.map,null!==b.map&&(b.map.matrixAutoUpdate===!0&&b.map.updateMatrix(),a.uvTransform.value.copy(b.map.matrix))}function D(a,b){a.fogColor.value=b.color,b.isFog?(a.fogNear.value=b.near,a.fogFar.value=b.far):b.isFogExp2&&(a.fogDensity.value=b.density)}function E(a,b){b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap)}function F(a,b){a.specular.value=b.specular,a.shininess.value=Math.max(b.shininess,1e-4),b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap),b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,b.side===ug&&(a.bumpScale.value*=-1)),b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),b.side===ug&&a.normalScale.value.negate()),b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}function G(a,b){F(a,b),b.gradientMap&&(a.gradientMap.value=b.gradientMap)}function H(a,b){a.roughness.value=b.roughness,a.metalness.value=b.metalness,b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap),b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap),b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap),b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,b.side===ug&&(a.bumpScale.value*=-1)),b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),b.side===ug&&a.normalScale.value.negate()),b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias),b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function I(a,b){H(a,b),a.reflectivity.value=b.reflectivity,a.clearCoat.value=b.clearCoat,a.clearCoatRoughness.value=b.clearCoatRoughness}function J(a,b){b.matcap&&(a.matcap.value=b.matcap),b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,b.side===ug&&(a.bumpScale.value*=-1)),b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),b.side===ug&&a.normalScale.value.negate()),b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}function K(a,b){b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}function L(a,b){b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias),a.referencePosition.value.copy(b.referencePosition),a.nearDistance.value=b.nearDistance,a.farDistance.value=b.farDistance}function M(a,b){b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,b.side===ug&&(a.bumpScale.value*=-1)),b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),b.side===ug&&a.normalScale.value.negate()),b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}function N(a,b){a.ambientLightColor.needsUpdate=b,a.directionalLights.needsUpdate=b,a.pointLights.needsUpdate=b,a.spotLights.needsUpdate=b,a.rectAreaLights.needsUpdate=b,a.hemisphereLights.needsUpdate=b}function O(){var a=va;return a>=La.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+La.maxTextures),va+=1,a}console.log("THREE.WebGLRenderer",ig),a=a||{};var P=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Q=void 0!==a.context?a.context:null,R=void 0!==a.alpha?a.alpha:!1,S=void 0!==a.depth?a.depth:!0,T=void 0!==a.stencil?a.stencil:!0,U=void 0!==a.antialias?a.antialias:!1,V=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,W=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,X=void 0!==a.powerPreference?a.powerPreference:"default",ea=null,ha=null;this.domElement=P,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=hh,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ia,ja=this,ka=!1,la=null,ma=null,na=null,oa=-1,pa={geometry:null,program:null,wireframe:!1},qa=null,ra=null,sa=new i,ta=new i,ua=null,va=0,wa=P.width,xa=P.height,ya=1,za=new i(0,0,wa,xa),Aa=new i(0,0,wa,xa),Ba=!1,Ca=new q,Da=new _,Ea=!1,Fa=!1,Ga=new d,Ha=new f;try{var Ia={alpha:R,depth:S,stencil:T,antialias:U,premultipliedAlpha:V,preserveDrawingBuffer:W,powerPreference:X};if(P.addEventListener("webglcontextlost",e,!1),P.addEventListener("webglcontextrestored",g,!1),ia=Q||P.getContext("webgl",Ia)||P.getContext("experimental-webgl",Ia),null===ia)throw null!==P.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===ia.getShaderPrecisionFormat&&(ia.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ja){console.error("THREE.WebGLRenderer: "+Ja.message)}var Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ua,Va,Wa,Xa,Ya,Za,$a,_a;c();var ab=null;"undefined"!=typeof navigator&&(ab="xr"in navigator?new Db(ja):new Cb(ja)),this.vr=ab;var bb=new tb(ja,Sa,La.maxTextureSize);this.shadowMap=bb,this.getContext=function(){return ia},this.getContextAttributes=function(){return ia.getContextAttributes()},this.forceContextLoss=function(){var a=Ka.get("WEBGL_lose_context");a&&a.loseContext()},this.forceContextRestore=function(){var a=Ka.get("WEBGL_lose_context");a&&a.restoreContext()},this.getPixelRatio=function(){return ya},this.setPixelRatio=function(a){void 0!==a&&(ya=a,this.setSize(wa,xa,!1))},this.getSize=function(){return{width:wa,height:xa}},this.setSize=function(a,b,c){return ab.isPresenting()?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(wa=a,xa=b,P.width=a*ya,P.height=b*ya,c!==!1&&(P.style.width=a+"px",P.style.height=b+"px"),void this.setViewport(0,0,a,b))},this.getDrawingBufferSize=function(){return{width:wa*ya,height:xa*ya}},this.setDrawingBufferSize=function(a,b,c){wa=a,xa=b,ya=c,P.width=a*c,P.height=b*c,this.setViewport(0,0,a,b)},this.getCurrentViewport=function(){return sa},this.setViewport=function(a,b,c,d){za.set(a,xa-b-d,c,d),Ma.viewport(sa.copy(za).multiplyScalar(ya))},this.setScissor=function(a,b,c,d){Aa.set(a,xa-b-d,c,d),Ma.scissor(ta.copy(Aa).multiplyScalar(ya))},this.setScissorTest=function(a){Ma.setScissorTest(Ba=a)},this.getClearColor=function(){return Xa.getClearColor()},this.setClearColor=function(){Xa.setClearColor.apply(Xa,arguments)},this.getClearAlpha=function(){return Xa.getClearAlpha()},this.setClearAlpha=function(){Xa.setClearAlpha.apply(Xa,arguments)},this.clear=function(a,b,c){var d=0;(void 0===a||a)&&(d|=16384),(void 0===b||b)&&(d|=256),(void 0===c||c)&&(d|=1024),ia.clear(d)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){P.removeEventListener("webglcontextlost",e,!1),P.removeEventListener("webglcontextrestored",g,!1),Va.dispose(),Wa.dispose(),Oa.dispose(),Sa.dispose(),ab.dispose(),db.stop()},this.renderBufferImmediate=function(a,b){Ma.initAttributes();var c=Oa.get(a);a.hasPositions&&!c.position&&(c.position=ia.createBuffer()),a.hasNormals&&!c.normal&&(c.normal=ia.createBuffer()),a.hasUvs&&!c.uv&&(c.uv=ia.createBuffer()),a.hasColors&&!c.color&&(c.color=ia.createBuffer());var d=b.getAttributes();a.hasPositions&&(ia.bindBuffer(34962,c.position),ia.bufferData(34962,a.positionArray,35048),Ma.enableAttribute(d.position),ia.vertexAttribPointer(d.position,3,5126,!1,0,0)),a.hasNormals&&(ia.bindBuffer(34962,c.normal),ia.bufferData(34962,a.normalArray,35048),Ma.enableAttribute(d.normal),ia.vertexAttribPointer(d.normal,3,5126,!1,0,0)),a.hasUvs&&(ia.bindBuffer(34962,c.uv),ia.bufferData(34962,a.uvArray,35048),Ma.enableAttribute(d.uv),ia.vertexAttribPointer(d.uv,2,5126,!1,0,0)),a.hasColors&&(ia.bindBuffer(34962,c.color),ia.bufferData(34962,a.colorArray,35048),Ma.enableAttribute(d.color),ia.vertexAttribPointer(d.color,3,5126,!1,0,0)),Ma.disableUnusedAttributes(),ia.drawArrays(4,0,a.count),a.count=0},this.renderBufferDirect=function(a,c,d,e,f,g){var h=f.isMesh&&f.normalMatrix.determinant()<0;Ma.setMaterial(e,h);var i=x(a,c,e,f),j=!1;(pa.geometry!==d.id||pa.program!==i.id||pa.wireframe!==(e.wireframe===!0))&&(pa.geometry=d.id,pa.program=i.id,pa.wireframe=e.wireframe===!0,j=!0),f.morphTargetInfluences&&(Ya.update(f,d,e,i),j=!0);var k=d.index,l=d.attributes.position,m=1;e.wireframe===!0&&(k=Ra.getWireframeAttribute(d),m=2);var o,p=Za;null!==k&&(o=Qa.get(k),p=$a,p.setIndex(o)),j&&(n(e,i,d),null!==k&&ia.bindBuffer(34963,o.buffer));var q=1/0;null!==k?q=k.count:void 0!==l&&(q=l.count);var r=d.drawRange.start*m,s=d.drawRange.count*m,t=null!==g?g.start*m:0,u=null!==g?g.count*m:1/0,v=Math.max(r,t),w=Math.min(q,r+s,t+u)-1,y=Math.max(0,w-v+1);if(0!==y){if(f.isMesh)if(e.wireframe===!0)Ma.setLineWidth(e.wireframeLinewidth*b()),p.setMode(1);else switch(f.drawMode){case Ci:p.setMode(4);break;case Di:p.setMode(5);break;case Ei:p.setMode(6)}else if(f.isLine){var z=e.linewidth;void 0===z&&(z=1),Ma.setLineWidth(z*b()),f.isLineSegments?p.setMode(1):f.isLineLoop?p.setMode(2):p.setMode(3)}else f.isPoints?p.setMode(0):f.isSprite&&p.setMode(4);d&&d.isInstancedBufferGeometry?d.maxInstancedCount>0&&p.renderInstances(d,v,y):p.render(v,y)}},this.compile=function(a,b){ha=Wa.get(a,b),ha.init(),a.traverse(function(a){a.isLight&&(ha.pushLight(a),a.castShadow&&ha.pushShadow(a))}),ha.setupLights(b),a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=0;c<b.material.length;c++)w(b.material[c],a.fog,b);else w(b.material,a.fog,b)})};var cb=null,db=new u;db.setAnimationLoop(o),"undefined"!=typeof window&&db.setContext(window),this.setAnimationLoop=function(a){cb=a,ab.setAnimationLoop(a),db.start()},this.render=function(a,b,c,d){if(!b||!b.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!ka){pa.geometry=null,pa.program=null,pa.wireframe=!1,oa=-1,qa=null,a.autoUpdate===!0&&a.updateMatrixWorld(),null===b.parent&&b.updateMatrixWorld(),ab.enabled&&(b=ab.getCamera(b)),ha=Wa.get(a,b),ha.init(),a.onBeforeRender(ja,a,b,c),Ga.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),Ca.setFromMatrix(Ga),Fa=this.localClippingEnabled,Ea=Da.init(this.clippingPlanes,Fa,b),ea=Va.get(a,b),ea.init(),p(a,b,0,ja.sortObjects),ja.sortObjects===!0&&ea.sort(),Ea&&Da.beginShadows();var e=ha.state.shadowsArray;bb.render(e,a,b),ha.setupLights(b),Ea&&Da.endShadows(),this.info.autoReset&&this.info.reset(),void 0===c&&(c=null),this.setRenderTarget(c),Xa.render(ea,a,b,d);var f=ea.opaque,g=ea.transparent;if(a.overrideMaterial){var h=a.overrideMaterial;f.length&&s(f,a,b,h),g.length&&s(g,a,b,h)}else f.length&&s(f,a,b),g.length&&s(g,a,b);c&&(Pa.updateRenderTargetMipmap(c),Pa.updateMultisampleRenderTarget(c)),Ma.buffers.depth.setTest(!0),Ma.buffers.depth.setMask(!0),Ma.buffers.color.setMask(!0),Ma.setPolygonOffset(!1),a.onAfterRender(ja,a,b),ab.enabled&&ab.submitFrame(),ea=null,ha=null}},this.allocTextureUnit=O,this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture),Pa.setTexture2D(b,c)}}(),this.setTexture3D=function(){return function(a,b){Pa.setTexture3D(a,b)}}(),this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0),Pa.setTexture2D(b,c)}}(),this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture),b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?Pa.setTextureCube(b,c):Pa.setTextureCubeDynamic(b,c)}}(),this.setFramebuffer=function(a){la=a},this.getRenderTarget=function(){return ma},this.setRenderTarget=function(a){ma=a,a&&void 0===Oa.get(a).__webglFramebuffer&&Pa.setupRenderTarget(a);var b=la,c=!1;if(a){var d=Oa.get(a).__webglFramebuffer;a.isWebGLRenderTargetCube?(b=d[a.activeCubeFace],c=!0):b=a.isWebGLMultisampleRenderTarget?Oa.get(a).__webglMultisampledFramebuffer:d,sa.copy(a.viewport),ta.copy(a.scissor),ua=a.scissorTest}else sa.copy(za).multiplyScalar(ya),ta.copy(Aa).multiplyScalar(ya),ua=Ba;if(na!==b&&(ia.bindFramebuffer(36160,b),na=b),Ma.viewport(sa),Ma.scissor(ta),Ma.setScissorTest(ua),c){var e=Oa.get(a.texture);ia.framebufferTexture2D(36160,36064,34069+a.activeCubeFace,e.__webglTexture,a.activeMipMapLevel)}},this.readRenderTargetPixels=function(a,b,c,d,e,f){if(!a||!a.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var g=Oa.get(a).__webglFramebuffer;if(g){var h=!1;g!==na&&(ia.bindFramebuffer(36160,g),h=!0);try{var i=a.texture,j=i.format,k=i.type;if(j!==Rh&&_a.convert(j)!==ia.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(k===Dh||_a.convert(k)===ia.getParameter(35738)||k===Jh&&(La.isWebGL2||Ka.get("OES_texture_float")||Ka.get("WEBGL_color_buffer_float"))||k===Kh&&(La.isWebGL2?Ka.get("EXT_color_buffer_float"):Ka.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ia.checkFramebufferStatus(36160)?b>=0&&b<=a.width-d&&c>=0&&c<=a.height-e&&ia.readPixels(b,c,d,e,_a.convert(j),_a.convert(k),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{h&&ia.bindFramebuffer(36160,na)}}},this.copyFramebufferToTexture=function(a,b,c){var d=b.image.width,e=b.image.height,f=_a.convert(b.format);this.setTexture2D(b,0),ia.copyTexImage2D(3553,c||0,f,a.x,a.y,d,e,0)},this.copyTextureToTexture=function(a,b,c,d){var e=b.image.width,f=b.image.height,g=_a.convert(c.format),h=_a.convert(c.type);this.setTexture2D(c,0),b.isDataTexture?ia.texSubImage2D(3553,d||0,a.x,a.y,e,f,g,h,b.image.data):ia.texSubImage2D(3553,d||0,a.x,a.y,g,h,b.image)}}function Fb(a,b){this.name="",this.color=new t(a),this.density=void 0!==b?b:25e-5}function Gb(a,b,c){this.name="",this.color=new t(a),this.near=void 0!==b?b:1,this.far=void 0!==c?c:1e3}function Hb(){z.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ib(a,b){this.array=a,this.stride=b,this.count=void 0!==a?a.length/b:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Jb(a,b,c,d){this.data=a,this.itemSize=b,this.offset=c,this.normalized=d===!0}function Kb(a){S.call(this),this.type="SpriteMaterial",this.color=new t(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(a)}function Lb(a){if(z.call(this),this.type="Sprite",void 0===Al){Al=new N;var b=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),d=new Ib(b,5);Al.setIndex([0,1,2,0,2,3]),Al.addAttribute("position",new Jb(d,3,0,!1)),Al.addAttribute("uv",new Jb(d,2,3,!1))}this.geometry=Al,this.material=void 0!==a?a:new Kb,this.center=new c(.5,.5)}function Mb(){z.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Nb(a,b){a&&a.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),X.call(this,a,b),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new d,this.bindMatrixInverse=new d}function Ob(a,b){if(a=a||[],this.bones=a.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var c=0,e=this.bones.length;e>c;c++)this.boneInverses.push(new d)}}function Pb(){z.call(this),this.type="Bone"}function Qb(a){S.call(this),this.type="LineBasicMaterial",this.color=new t(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(a)}function Rb(a,b,c){1===c&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),z.call(this),this.type="Line",this.geometry=void 0!==a?a:new N,this.material=void 0!==b?b:new Qb({color:16777215*Math.random()})}function Sb(a,b){Rb.call(this,a,b),this.type="LineSegments"}function Tb(a,b){Rb.call(this,a,b),this.type="LineLoop"}function Ub(a){S.call(this),this.type="PointsMaterial",this.color=new t(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function Vb(a,b){z.call(this),this.type="Points",this.geometry=void 0!==a?a:new N,this.material=void 0!==b?b:new Ub({color:16777215*Math.random()})}function Wb(a,b,c,d,e,f,g,i,j){h.call(this,a,b,c,d,e,f,g,i,j),this.format=void 0!==g?g:Qh,this.minFilter=void 0!==f?f:Ah,this.magFilter=void 0!==e?e:Ah,this.generateMipmaps=!1}function Xb(a,b,c,d,e,f,g,i,j,k,l,m){h.call(this,null,f,g,i,j,k,d,e,l,m),this.image={width:b,height:c},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}function Yb(a,b,c,d,e,f,g,i,j){h.call(this,a,b,c,d,e,f,g,i,j),this.needsUpdate=!0}function Zb(a,b,c,d,e,f,g,i,j,k){if(k=void 0!==k?k:Vh,k!==Vh&&k!==Wh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&k===Vh&&(c=Gh),void 0===c&&k===Wh&&(c=Oh),h.call(this,null,d,e,f,g,i,k,c,j),this.image={width:a,height:b},this.magFilter=void 0!==g?g:xh,this.minFilter=void 0!==i?i:xh,this.flipY=!1,this.generateMipmaps=!1}function $b(a){N.call(this),this.type="WireframeGeometry";var b,c,d,e,g,h,i,j,k,l,m=[],n=[0,0],o={},p=["a","b","c"];if(a&&a.isGeometry){var q=a.faces;for(b=0,d=q.length;d>b;b++){var r=q[b];for(c=0;3>c;c++)i=r[p[c]],j=r[p[(c+1)%3]],n[0]=Math.min(i,j),n[1]=Math.max(i,j),k=n[0]+","+n[1],void 0===o[k]&&(o[k]={index1:n[0],index2:n[1]})}for(k in o)h=o[k],l=a.vertices[h.index1],m.push(l.x,l.y,l.z),l=a.vertices[h.index2],m.push(l.x,l.y,l.z)}else if(a&&a.isBufferGeometry){var s,t,u,v,w,x,y,z;if(l=new f,null!==a.index){for(s=a.attributes.position,t=a.index,u=a.groups,0===u.length&&(u=[{start:0,count:t.count,materialIndex:0}]),e=0,g=u.length;g>e;++e)for(v=u[e],w=v.start,x=v.count,b=w,d=w+x;d>b;b+=3)for(c=0;3>c;c++)i=t.getX(b+c),j=t.getX(b+(c+1)%3),n[0]=Math.min(i,j),n[1]=Math.max(i,j),k=n[0]+","+n[1],void 0===o[k]&&(o[k]={index1:n[0],index2:n[1]});for(k in o)h=o[k],l.fromBufferAttribute(s,h.index1),m.push(l.x,l.y,l.z),l.fromBufferAttribute(s,h.index2),m.push(l.x,l.y,l.z)}else for(s=a.attributes.position,b=0,d=s.count/3;d>b;b++)for(c=0;3>c;c++)y=3*b+c,l.fromBufferAttribute(s,y),m.push(l.x,l.y,l.z),z=3*b+(c+1)%3,l.fromBufferAttribute(s,z),m.push(l.x,l.y,l.z)}this.addAttribute("position",new J(m,3))}function _b(a,b,c){A.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:b,stacks:c},this.fromBufferGeometry(new ac(a,b,c)),this.mergeVertices()}function ac(a,b,c){N.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:b,stacks:c};var d,e,g=[],h=[],i=[],j=[],k=1e-5,l=new f,m=new f,n=new f,o=new f,p=new f;a.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var q=b+1;for(d=0;c>=d;d++){var r=d/c;for(e=0;b>=e;e++){var s=e/b;a(s,r,m),h.push(m.x,m.y,m.z),s-k>=0?(a(s-k,r,n),o.subVectors(m,n)):(a(s+k,r,n),o.subVectors(n,m)),r-k>=0?(a(s,r-k,n),p.subVectors(m,n)):(a(s,r+k,n),p.subVectors(n,m)),l.crossVectors(o,p).normalize(),i.push(l.x,l.y,l.z),j.push(s,r)}}for(d=0;c>d;d++)for(e=0;b>e;e++){var t=d*q+e,u=d*q+e+1,v=(d+1)*q+e+1,w=(d+1)*q+e;g.push(t,u,w),g.push(u,v,w)}this.setIndex(g),this.addAttribute("position",new J(h,3)),this.addAttribute("normal",new J(i,3)),this.addAttribute("uv",new J(j,2))}function bc(a,b,c,d){A.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:b,radius:c,detail:d},this.fromBufferGeometry(new cc(a,b,c,d)),this.mergeVertices()}function cc(a,b,d,e){function g(a){for(var c=new f,d=new f,e=new f,g=0;g<b.length;g+=3)m(b[g+0],c),m(b[g+1],d),m(b[g+2],e),h(c,d,e,a)}function h(a,b,c,d){var e,f,g=Math.pow(2,d),h=[];for(e=0;g>=e;e++){h[e]=[];var i=a.clone().lerp(c,e/g),j=b.clone().lerp(c,e/g),k=g-e;for(f=0;k>=f;f++)0===f&&e===g?h[e][f]=i:h[e][f]=i.clone().lerp(j,f/k)}for(e=0;g>e;e++)for(f=0;2*(g-e)-1>f;f++){var m=Math.floor(f/2);f%2===0?(l(h[e][m+1]),l(h[e+1][m]),l(h[e][m])):(l(h[e][m+1]),l(h[e+1][m+1]),l(h[e+1][m]))}}function i(a){for(var b=new f,c=0;c<r.length;c+=3)b.x=r[c+0],b.y=r[c+1],b.z=r[c+2],b.normalize().multiplyScalar(a),r[c+0]=b.x,r[c+1]=b.y,r[c+2]=b.z}function j(){for(var a=new f,b=0;b<r.length;b+=3){a.x=r[b+0],a.y=r[b+1],a.z=r[b+2];var c=p(a)/2/Math.PI+.5,d=q(a)/Math.PI+.5;s.push(c,1-d)}n(),k()}function k(){for(var a=0;a<s.length;a+=6){var b=s[a+0],c=s[a+2],d=s[a+4],e=Math.max(b,c,d),f=Math.min(b,c,d);e>.9&&.1>f&&(.2>b&&(s[a+0]+=1),.2>c&&(s[a+2]+=1),.2>d&&(s[a+4]+=1))}}function l(a){r.push(a.x,a.y,a.z)}function m(b,c){var d=3*b;c.x=a[d+0],c.y=a[d+1],c.z=a[d+2]}function n(){for(var a=new f,b=new f,d=new f,e=new f,g=new c,h=new c,i=new c,j=0,k=0;j<r.length;j+=9,k+=6){a.set(r[j+0],r[j+1],r[j+2]),b.set(r[j+3],r[j+4],r[j+5]),d.set(r[j+6],r[j+7],r[j+8]),g.set(s[k+0],s[k+1]),h.set(s[k+2],s[k+3]),i.set(s[k+4],s[k+5]),e.copy(a).add(b).add(d).divideScalar(3);var l=p(e);o(g,k+0,a,l),o(h,k+2,b,l),o(i,k+4,d,l)}}function o(a,b,c,d){0>d&&1===a.x&&(s[b]=a.x-1),0===c.x&&0===c.z&&(s[b]=d/2/Math.PI+.5)}function p(a){return Math.atan2(a.z,-a.x)}function q(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}N.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:b,radius:d,detail:e},d=d||1,e=e||0;var r=[],s=[];g(e),i(d),j(),this.addAttribute("position",new J(r,3)),this.addAttribute("normal",new J(r.slice(),3)),this.addAttribute("uv",new J(s,2)),0===e?this.computeVertexNormals():this.normalizeNormals()}function dc(a,b){A.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:b},this.fromBufferGeometry(new ec(a,b)),this.mergeVertices()}function ec(a,b){var c=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],d=[2,1,0,0,3,2,1,3,0,2,3,1];cc.call(this,c,d,a,b),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:b}}function fc(a,b){A.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:b},this.fromBufferGeometry(new gc(a,b)),this.mergeVertices()}function gc(a,b){var c=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],d=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];cc.call(this,c,d,a,b),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:b}}function hc(a,b){A.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:b},this.fromBufferGeometry(new ic(a,b)),this.mergeVertices()}function ic(a,b){var c=(1+Math.sqrt(5))/2,d=[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],e=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];cc.call(this,d,e,a,b),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:b}}function jc(a,b){A.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:b},this.fromBufferGeometry(new kc(a,b)),this.mergeVertices()}function kc(a,b){var c=(1+Math.sqrt(5))/2,d=1/c,e=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],f=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];cc.call(this,e,f,a,b),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:b}}function lc(a,b,c,d,e,f){A.call(this),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e},void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");var g=new mc(a,b,c,d,e);this.tangents=g.tangents,this.normals=g.normals,this.binormals=g.binormals,this.fromBufferGeometry(g),this.mergeVertices()}function mc(a,b,d,e,g){function h(){for(m=0;b>m;m++)i(m);i(g===!1?b:0),k(),j()}function i(c){r=a.getPointAt(c/b,r);var f=l.normals[c],g=l.binormals[c];for(n=0;e>=n;n++){var h=n/e*Math.PI*2,i=Math.sin(h),j=-Math.cos(h);p.x=j*f.x+i*g.x,p.y=j*f.y+i*g.y,p.z=j*f.z+i*g.z,p.normalize(),t.push(p.x,p.y,p.z),o.x=r.x+d*p.x,o.y=r.y+d*p.y,o.z=r.z+d*p.z,s.push(o.x,o.y,o.z)}}function j(){for(n=1;b>=n;n++)for(m=1;e>=m;m++){var a=(e+1)*(n-1)+(m-1),c=(e+1)*n+(m-1),d=(e+1)*n+m,f=(e+1)*(n-1)+m;v.push(a,c,f),v.push(c,d,f)}}function k(){for(m=0;b>=m;m++)for(n=0;e>=n;n++)q.x=m/b,q.y=n/e,u.push(q.x,q.y)}N.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:b,radius:d,radialSegments:e,closed:g},b=b||64,d=d||1,e=e||8,g=g||!1;var l=a.computeFrenetFrames(b,g);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var m,n,o=new f,p=new f,q=new c,r=new f,s=[],t=[],u=[],v=[];h(),this.setIndex(v),this.addAttribute("position",new J(s,3)),this.addAttribute("normal",new J(t,3)),this.addAttribute("uv",new J(u,2))}function nc(a,b,c,d,e,f,g){A.call(this),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f},void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new oc(a,b,c,d,e,f)),this.mergeVertices()}function oc(a,b,c,d,e,g){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a),h=c/b*a,i=Math.cos(h);e.x=d*(2+i)*.5*f,e.y=d*(2+i)*g*.5,e.z=d*Math.sin(h)*.5}N.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g},a=a||1,b=b||.4,c=Math.floor(c)||64,d=Math.floor(d)||8,e=e||2,g=g||3;var i,j,k=[],l=[],m=[],n=[],o=new f,p=new f,q=new f,r=new f,s=new f,t=new f,u=new f;for(i=0;c>=i;++i){var v=i/c*e*Math.PI*2;for(h(v,e,g,a,q),h(v+.01,e,g,a,r),t.subVectors(r,q),u.addVectors(r,q),s.crossVectors(t,u),u.crossVectors(s,t),s.normalize(),u.normalize(),j=0;d>=j;++j){var w=j/d*Math.PI*2,x=-b*Math.cos(w),y=b*Math.sin(w);o.x=q.x+(x*u.x+y*s.x),o.y=q.y+(x*u.y+y*s.y),o.z=q.z+(x*u.z+y*s.z),l.push(o.x,o.y,o.z),p.subVectors(o,q).normalize(),m.push(p.x,p.y,p.z),n.push(i/c),n.push(j/d)}}for(j=1;c>=j;j++)for(i=1;d>=i;i++){var z=(d+1)*(j-1)+(i-1),A=(d+1)*j+(i-1),B=(d+1)*j+i,C=(d+1)*(j-1)+i;k.push(z,A,C),k.push(A,B,C)}this.setIndex(k),this.addAttribute("position",new J(l,3)),this.addAttribute("normal",new J(m,3)),this.addAttribute("uv",new J(n,2))}function pc(a,b,c,d,e){A.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e},this.fromBufferGeometry(new qc(a,b,c,d,e)),this.mergeVertices()}function qc(a,b,c,d,e){N.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e},a=a||1,b=b||.4,c=Math.floor(c)||8,d=Math.floor(d)||6,e=e||2*Math.PI;var g,h,i=[],j=[],k=[],l=[],m=new f,n=new f,o=new f;for(g=0;c>=g;g++)for(h=0;d>=h;h++){var p=h/d*e,q=g/c*Math.PI*2;n.x=(a+b*Math.cos(q))*Math.cos(p),n.y=(a+b*Math.cos(q))*Math.sin(p),n.z=b*Math.sin(q),j.push(n.x,n.y,n.z),m.x=a*Math.cos(p),m.y=a*Math.sin(p),o.subVectors(n,m).normalize(),k.push(o.x,o.y,o.z),l.push(h/d),l.push(g/c)}for(g=1;c>=g;g++)for(h=1;d>=h;h++){var r=(d+1)*g+h-1,s=(d+1)*(g-1)+h-1,t=(d+1)*(g-1)+h,u=(d+1)*g+h;i.push(r,s,u),i.push(s,t,u)}this.setIndex(i),this.addAttribute("position",new J(j,3)),this.addAttribute("normal",new J(k,3)),this.addAttribute("uv",new J(l,2))}function rc(a,b,c,d,e){var f,g;if(e===Sc(a,b,c,d)>0)for(f=b;c>f;f+=d)g=Pc(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=Pc(f,a[f],a[f+1],g);return g&&Jc(g,g.next)&&(Qc(g),g=g.next),g}function sc(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!Jc(d,d.next)&&0!==Ic(d.prev,d,d.next))d=d.next;else{if(Qc(d),d=b=d.prev,d===d.next)break;c=!0}while(c||d!==b);return b}function tc(a,b,c,d,e,f,g){if(a){!g&&f&&Cc(a,d,e,f);for(var h,i,j=a;a.prev!==a.next;)if(h=a.prev,i=a.next,f?vc(a,d,e,f):uc(a))b.push(h.i/c),b.push(a.i/c),b.push(i.i/c),Qc(a),a=i.next,j=i.next;else if(a=i,a===j){g?1===g?(a=wc(a,b,c),tc(a,b,c,d,e,f,2)):2===g&&xc(a,b,c,d,e,f):tc(sc(a),b,c,d,e,f,1);break}}}function uc(a){var b=a.prev,c=a,d=a.next;if(Ic(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(Gc(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&Ic(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function vc(a,b,c,d){var e=a.prev,f=a,g=a.next;if(Ic(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=Ec(h,i,b,c,d),m=Ec(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&Gc(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&Ic(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&Gc(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&Ic(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function wc(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!Jc(e,f)&&Kc(e,d,d.next,f)&&Mc(e,f)&&Mc(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),
Qc(d),Qc(d.next),d=a=f),d=d.next}while(d!==a);return d}function xc(a,b,c,d,e,f){var g=a;do{for(var h=g.next.next;h!==g.prev;){if(g.i!==h.i&&Hc(g,h)){var i=Oc(g,h);return g=sc(g,g.next),i=sc(i,i.next),tc(g,b,c,d,e,f),void tc(i,b,c,d,e,f)}h=h.next}g=g.next}while(g!==a)}function yc(a,b,c,d){var e,f,g,h,i,j=[];for(e=0,f=b.length;f>e;e++)g=b[e]*d,h=f-1>e?b[e+1]*d:a.length,i=rc(a,g,h,d,!1),i===i.next&&(i.steiner=!0),j.push(Fc(i));for(j.sort(zc),e=0;e<j.length;e++)Ac(j[e],c),c=sc(c,c.next);return c}function zc(a,b){return a.x-b.x}function Ac(a,b){if(b=Bc(a,b)){var c=Oc(b,a);sc(c,c.next)}}function Bc(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y&&d.next.y!==d.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(e>=h&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&e!==d.x&&Gc(l>f?e:g,f,k,l,l>f?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(m>i||i===m&&d.x>c.x)&&Mc(d,a)&&(c=d,m=i)),d=d.next;return c}function Cc(a,b,c,d){var e=a;do null===e.z&&(e.z=Ec(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,Dc(e)}function Dc(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;j>b&&(h++,d=d.nextZ,d);b++);for(i=j;h>0||i>0&&d;)0!==h&&(0===i||!d||c.z<=d.z)?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function Ec(a,b,c,d,e){return a=32767*(a-c)*e,b=32767*(b-d)*e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function Fc(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function Gc(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function Hc(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!Lc(a,b)&&Mc(a,b)&&Mc(b,a)&&Nc(a,b)}function Ic(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function Jc(a,b){return a.x===b.x&&a.y===b.y}function Kc(a,b,c,d){return Jc(a,b)&&Jc(c,d)||Jc(a,d)&&Jc(c,b)?!0:Ic(a,b,c)>0!=Ic(a,b,d)>0&&Ic(c,d,a)>0!=Ic(c,d,b)>0}function Lc(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&Kc(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function Mc(a,b){return Ic(a.prev,a,a.next)<0?Ic(a,b,a.next)>=0&&Ic(a,a.prev,b)>=0:Ic(a,b,a.prev)<0||Ic(a,a.next,b)<0}function Nc(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&c.next.y!==c.y&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function Oc(a,b){var c=new Rc(a.i,a.x,a.y),d=new Rc(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function Pc(a,b,c,d){var e=new Rc(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function Qc(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Rc(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sc(a,b,c,d){for(var e=0,f=b,g=c-d;c>f;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}function Tc(a){var b=a.length;b>2&&a[b-1].equals(a[0])&&a.pop()}function Uc(a,b){for(var c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}function Vc(a,b){A.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:b},this.fromBufferGeometry(new Wc(a,b)),this.mergeVertices()}function Wc(a,b){function d(a){function d(a,b,c){return b||console.error("THREE.ExtrudeGeometry: vec does not exist"),b.clone().multiplyScalar(c).add(a)}function i(a,b,d){var e,f,g,h=a.x-b.x,i=a.y-b.y,j=d.x-a.x,k=d.y-a.y,l=h*h+i*i,m=h*k-i*j;if(Math.abs(m)>Number.EPSILON){var n=Math.sqrt(l),o=Math.sqrt(j*j+k*k),p=b.x-i/n,q=b.y+h/n,r=d.x-k/o,s=d.y+j/o,t=((r-p)*k-(s-q)*j)/(h*k-i*j);e=p+h*t-a.x,f=q+i*t-a.y;var u=e*e+f*f;if(2>=u)return new c(e,f);g=Math.sqrt(u/2)}else{var v=!1;h>Number.EPSILON?j>Number.EPSILON&&(v=!0):h<-Number.EPSILON?j<-Number.EPSILON&&(v=!0):Math.sign(i)===Math.sign(k)&&(v=!0),v?(e=-i,f=h,g=Math.sqrt(l)):(e=h,f=i,g=Math.sqrt(l/2))}return new c(e/g,f/g)}function j(){var a=g.length/3;if(v){var b=0,c=W*b;for(Z=0;X>Z;Z++)V=O[Z],n(V[2]+c,V[1]+c,V[0]+c);for(b=t+2*y,c=W*b,Z=0;X>Z;Z++)V=O[Z],n(V[0]+c,V[1]+c,V[2]+c)}else{for(Z=0;X>Z;Z++)V=O[Z],n(V[2],V[1],V[0]);for(Z=0;X>Z;Z++)V=O[Z],n(V[0]+W*t,V[1]+W*t,V[2]+W*t)}e.addGroup(a,g.length/3-a,0)}function k(){var a=g.length/3,b=0;for(l(P,b),b+=P.length,I=0,J=M.length;J>I;I++)H=M[I],l(H,b),b+=H.length;e.addGroup(a,g.length/3-a,1)}function l(a,b){var c,d;for(Z=a.length;--Z>=0;){c=Z,d=Z-1,0>d&&(d=a.length-1);var e=0,f=t+2*y;for(e=0;f>e;e++){var g=W*e,h=W*(e+1),i=b+c+g,j=b+d+g,k=b+d+h,l=b+c+h;o(i,j,k,l)}}}function m(a,b,c){r.push(a),r.push(b),r.push(c)}function n(a,b,c){p(a),p(b),p(c);var d=g.length/3,f=A.generateTopUV(e,g,d-3,d-2,d-1);q(f[0]),q(f[1]),q(f[2])}function o(a,b,c,d){p(a),p(b),p(d),p(b),p(c),p(d);var f=g.length/3,h=A.generateSideWallUV(e,g,f-6,f-3,f-2,f-1);q(h[0]),q(h[1]),q(h[3]),q(h[1]),q(h[2]),q(h[3])}function p(a){g.push(r[3*a+0]),g.push(r[3*a+1]),g.push(r[3*a+2])}function q(a){h.push(a.x),h.push(a.y)}var r=[],s=void 0!==b.curveSegments?b.curveSegments:12,t=void 0!==b.steps?b.steps:1,u=void 0!==b.depth?b.depth:100,v=void 0!==b.bevelEnabled?b.bevelEnabled:!0,w=void 0!==b.bevelThickness?b.bevelThickness:6,x=void 0!==b.bevelSize?b.bevelSize:w-2,y=void 0!==b.bevelSegments?b.bevelSegments:3,z=b.extrudePath,A=void 0!==b.UVGenerator?b.UVGenerator:Dl;void 0!==b.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=b.amount);var B,C,D,E,F,G=!1;z&&(B=z.getSpacedPoints(t),G=!0,v=!1,C=z.computeFrenetFrames(t,!1),D=new f,E=new f,F=new f),v||(y=0,w=0,x=0);var H,I,J,K=a.extractPoints(s),L=K.shape,M=K.holes,N=!Cl.isClockWise(L);if(N)for(L=L.reverse(),I=0,J=M.length;J>I;I++)H=M[I],Cl.isClockWise(H)&&(M[I]=H.reverse());var O=Cl.triangulateShape(L,M),P=L;for(I=0,J=M.length;J>I;I++)H=M[I],L=L.concat(H);for(var Q,R,S,T,U,V,W=L.length,X=O.length,Y=[],Z=0,$=P.length,_=$-1,aa=Z+1;$>Z;Z++,_++,aa++)_===$&&(_=0),aa===$&&(aa=0),Y[Z]=i(P[Z],P[_],P[aa]);var ba,ca=[],da=Y.concat();for(I=0,J=M.length;J>I;I++){for(H=M[I],ba=[],Z=0,$=H.length,_=$-1,aa=Z+1;$>Z;Z++,_++,aa++)_===$&&(_=0),aa===$&&(aa=0),ba[Z]=i(H[Z],H[_],H[aa]);ca.push(ba),da=da.concat(ba)}for(Q=0;y>Q;Q++){for(S=Q/y,T=w*Math.cos(S*Math.PI/2),R=x*Math.sin(S*Math.PI/2),Z=0,$=P.length;$>Z;Z++)U=d(P[Z],Y[Z],R),m(U.x,U.y,-T);for(I=0,J=M.length;J>I;I++)for(H=M[I],ba=ca[I],Z=0,$=H.length;$>Z;Z++)U=d(H[Z],ba[Z],R),m(U.x,U.y,-T)}for(R=x,Z=0;W>Z;Z++)U=v?d(L[Z],da[Z],R):L[Z],G?(E.copy(C.normals[0]).multiplyScalar(U.x),D.copy(C.binormals[0]).multiplyScalar(U.y),F.copy(B[0]).add(E).add(D),m(F.x,F.y,F.z)):m(U.x,U.y,0);var ea;for(ea=1;t>=ea;ea++)for(Z=0;W>Z;Z++)U=v?d(L[Z],da[Z],R):L[Z],G?(E.copy(C.normals[ea]).multiplyScalar(U.x),D.copy(C.binormals[ea]).multiplyScalar(U.y),F.copy(B[ea]).add(E).add(D),m(F.x,F.y,F.z)):m(U.x,U.y,u/t*ea);for(Q=y-1;Q>=0;Q--){for(S=Q/y,T=w*Math.cos(S*Math.PI/2),R=x*Math.sin(S*Math.PI/2),Z=0,$=P.length;$>Z;Z++)U=d(P[Z],Y[Z],R),m(U.x,U.y,u+T);for(I=0,J=M.length;J>I;I++)for(H=M[I],ba=ca[I],Z=0,$=H.length;$>Z;Z++)U=d(H[Z],ba[Z],R),G?m(U.x,U.y+B[t-1].y,B[t-1].x+T):m(U.x,U.y,u+T)}j(),k()}N.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:a,options:b},a=Array.isArray(a)?a:[a];for(var e=this,g=[],h=[],i=0,j=a.length;j>i;i++){var k=a[i];d(k)}this.addAttribute("position",new J(g,3)),this.addAttribute("uv",new J(h,2)),this.computeVertexNormals()}function Xc(a,b,c){if(c.shapes=[],Array.isArray(a))for(var d=0,e=a.length;e>d;d++){var f=a[d];c.shapes.push(f.uuid)}else c.shapes.push(a.uuid);return void 0!==b.extrudePath&&(c.options.extrudePath=b.extrudePath.toJSON()),c}function Yc(a,b){A.call(this),this.type="TextGeometry",this.parameters={text:a,parameters:b},this.fromBufferGeometry(new Zc(a,b)),this.mergeVertices()}function Zc(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new A;var d=c.generateShapes(a,b.size);b.depth=void 0!==b.height?b.height:50,void 0===b.bevelThickness&&(b.bevelThickness=10),void 0===b.bevelSize&&(b.bevelSize=8),void 0===b.bevelEnabled&&(b.bevelEnabled=!1),Wc.call(this,d,b),this.type="TextBufferGeometry"}function $c(a,b,c,d,e,f,g){A.call(this),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g},this.fromBufferGeometry(new _c(a,b,c,d,e,f,g)),this.mergeVertices()}function _c(a,b,c,d,e,g,h){N.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h},a=a||1,b=Math.max(3,Math.floor(b)||8),c=Math.max(2,Math.floor(c)||6),d=void 0!==d?d:0,e=void 0!==e?e:2*Math.PI,g=void 0!==g?g:0,h=void 0!==h?h:Math.PI;var i,j,k=g+h,l=0,m=[],n=new f,o=new f,p=[],q=[],r=[],s=[];for(j=0;c>=j;j++){var t=[],u=j/c;for(i=0;b>=i;i++){var v=i/b;n.x=-a*Math.cos(d+v*e)*Math.sin(g+u*h),n.y=a*Math.cos(g+u*h),n.z=a*Math.sin(d+v*e)*Math.sin(g+u*h),q.push(n.x,n.y,n.z),o.set(n.x,n.y,n.z).normalize(),r.push(o.x,o.y,o.z),s.push(v,1-u),t.push(l++)}m.push(t)}for(j=0;c>j;j++)for(i=0;b>i;i++){var w=m[j][i+1],x=m[j][i],y=m[j+1][i],z=m[j+1][i+1];(0!==j||g>0)&&p.push(w,x,z),(j!==c-1||k<Math.PI)&&p.push(x,y,z)}this.setIndex(p),this.addAttribute("position",new J(q,3)),this.addAttribute("normal",new J(r,3)),this.addAttribute("uv",new J(s,2))}function ad(a,b,c,d,e,f){A.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f},this.fromBufferGeometry(new bd(a,b,c,d,e,f)),this.mergeVertices()}function bd(a,b,d,e,g,h){N.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:b,thetaSegments:d,phiSegments:e,thetaStart:g,thetaLength:h},a=a||.5,b=b||1,g=void 0!==g?g:0,h=void 0!==h?h:2*Math.PI,d=void 0!==d?Math.max(3,d):8,e=void 0!==e?Math.max(1,e):1;var i,j,k,l=[],m=[],n=[],o=[],p=a,q=(b-a)/e,r=new f,s=new c;for(j=0;e>=j;j++){for(k=0;d>=k;k++)i=g+k/d*h,r.x=p*Math.cos(i),r.y=p*Math.sin(i),m.push(r.x,r.y,r.z),n.push(0,0,1),s.x=(r.x/b+1)/2,s.y=(r.y/b+1)/2,o.push(s.x,s.y);p+=q}for(j=0;e>j;j++){var t=j*(d+1);for(k=0;d>k;k++){i=k+t;var u=i,v=i+d+1,w=i+d+2,x=i+1;l.push(u,v,x),l.push(v,w,x)}}this.setIndex(l),this.addAttribute("position",new J(m,3)),this.addAttribute("normal",new J(n,3)),this.addAttribute("uv",new J(o,2))}function cd(a,b,c,d){A.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:b,phiStart:c,phiLength:d},this.fromBufferGeometry(new dd(a,b,c,d)),this.mergeVertices()}function dd(a,b,d,e){N.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:b,phiStart:d,phiLength:e},b=Math.floor(b)||12,d=d||0,e=e||2*Math.PI,e=Ri.clamp(e,0,2*Math.PI);var g,h,i,j=[],k=[],l=[],m=1/b,n=new f,o=new c;for(h=0;b>=h;h++){var p=d+h*m*e,q=Math.sin(p),r=Math.cos(p);for(i=0;i<=a.length-1;i++)n.x=a[i].x*q,n.y=a[i].y,n.z=a[i].x*r,k.push(n.x,n.y,n.z),o.x=h/b,o.y=i/(a.length-1),l.push(o.x,o.y)}for(h=0;b>h;h++)for(i=0;i<a.length-1;i++){g=i+h*a.length;var s=g,t=g+a.length,u=g+a.length+1,v=g+1;j.push(s,t,v),j.push(t,u,v)}if(this.setIndex(j),this.addAttribute("position",new J(k,3)),this.addAttribute("uv",new J(l,2)),this.computeVertexNormals(),e===2*Math.PI){var w=this.attributes.normal.array,x=new f,y=new f,z=new f;for(g=b*a.length*3,h=0,i=0;h<a.length;h++,i+=3)x.x=w[i+0],x.y=w[i+1],x.z=w[i+2],y.x=w[g+i+0],y.y=w[g+i+1],y.z=w[g+i+2],z.addVectors(x,y).normalize(),w[i+0]=w[g+i+0]=z.x,w[i+1]=w[g+i+1]=z.y,w[i+2]=w[g+i+2]=z.z}}function ed(a,b){A.call(this),this.type="ShapeGeometry","object"==typeof b&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),b=b.curveSegments),this.parameters={shapes:a,curveSegments:b},this.fromBufferGeometry(new fd(a,b)),this.mergeVertices()}function fd(a,b){function c(a){var c,h,j,k=e.length/3,l=a.extractPoints(b),m=l.shape,n=l.holes;for(Cl.isClockWise(m)===!1&&(m=m.reverse()),c=0,h=n.length;h>c;c++)j=n[c],Cl.isClockWise(j)===!0&&(n[c]=j.reverse());var o=Cl.triangulateShape(m,n);for(c=0,h=n.length;h>c;c++)j=n[c],m=m.concat(j);for(c=0,h=m.length;h>c;c++){var p=m[c];e.push(p.x,p.y,0),f.push(0,0,1),g.push(p.x,p.y)}for(c=0,h=o.length;h>c;c++){var q=o[c],r=q[0]+k,s=q[1]+k,t=q[2]+k;d.push(r,s,t),i+=3}}N.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:a,curveSegments:b},b=b||12;var d=[],e=[],f=[],g=[],h=0,i=0;if(Array.isArray(a)===!1)c(a);else for(var j=0;j<a.length;j++)c(a[j]),this.addGroup(h,i,j),h+=i,i=0;this.setIndex(d),this.addAttribute("position",new J(e,3)),this.addAttribute("normal",new J(f,3)),this.addAttribute("uv",new J(g,2))}function gd(a,b){if(b.shapes=[],Array.isArray(a))for(var c=0,d=a.length;d>c;c++){var e=a[c];b.shapes.push(e.uuid)}else b.shapes.push(a.uuid);return b}function hd(a,b){N.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:b},b=void 0!==b?b:1;var c,d,e,f,g=[],h=Math.cos(Ri.DEG2RAD*b),i=[0,0],j={},k=["a","b","c"];a.isBufferGeometry?(f=new A,f.fromBufferGeometry(a)):f=a.clone(),f.mergeVertices(),f.computeFaceNormals();for(var l=f.vertices,m=f.faces,n=0,o=m.length;o>n;n++)for(var p=m[n],q=0;3>q;q++)c=p[k[q]],d=p[k[(q+1)%3]],i[0]=Math.min(c,d),i[1]=Math.max(c,d),e=i[0]+","+i[1],void 0===j[e]?j[e]={index1:i[0],index2:i[1],face1:n,face2:void 0}:j[e].face2=n;for(e in j){var r=j[e];if(void 0===r.face2||m[r.face1].normal.dot(m[r.face2].normal)<=h){var s=l[r.index1];g.push(s.x,s.y,s.z),s=l[r.index2],g.push(s.x,s.y,s.z)}}this.addAttribute("position",new J(g,3))}function id(a,b,c,d,e,f,g,h){A.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h},this.fromBufferGeometry(new jd(a,b,c,d,e,f,g,h)),this.mergeVertices()}function jd(a,b,d,e,g,h,i,j){function k(){var c,h,k=new f,l=new f,v=0,w=(b-a)/d;for(h=0;g>=h;h++){var x=[],y=h/g,z=y*(b-a)+a;for(c=0;e>=c;c++){var A=c/e,B=A*j+i,C=Math.sin(B),D=Math.cos(B);l.x=z*C,l.y=-y*d+t,l.z=z*D,o.push(l.x,l.y,l.z),k.set(C,w,D).normalize(),p.push(k.x,k.y,k.z),q.push(A,1-y),x.push(r++)}s.push(x)}for(c=0;e>c;c++)for(h=0;g>h;h++){var E=s[h][c],F=s[h+1][c],G=s[h+1][c+1],H=s[h][c+1];n.push(E,F,H),n.push(F,G,H),v+=6}m.addGroup(u,v,0),u+=v}function l(d){var g,h,k,l=new c,s=new f,v=0,w=d===!0?a:b,x=d===!0?1:-1;for(h=r,g=1;e>=g;g++)o.push(0,t*x,0),p.push(0,x,0),q.push(.5,.5),r++;for(k=r,g=0;e>=g;g++){var y=g/e,z=y*j+i,A=Math.cos(z),B=Math.sin(z);s.x=w*B,s.y=t*x,s.z=w*A,o.push(s.x,s.y,s.z),p.push(0,x,0),l.x=.5*A+.5,l.y=.5*B*x+.5,q.push(l.x,l.y),r++}for(g=0;e>g;g++){var C=h+g,D=k+g;d===!0?n.push(D,D+1,C):n.push(D+1,D,C),v+=3}m.addGroup(u,v,d===!0?1:2),u+=v}N.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:b,height:d,radialSegments:e,heightSegments:g,openEnded:h,thetaStart:i,thetaLength:j};var m=this;a=void 0!==a?a:1,b=void 0!==b?b:1,d=d||1,e=Math.floor(e)||8,g=Math.floor(g)||1,h=void 0!==h?h:!1,i=void 0!==i?i:0,j=void 0!==j?j:2*Math.PI;var n=[],o=[],p=[],q=[],r=0,s=[],t=d/2,u=0;k(),h===!1&&(a>0&&l(!0),b>0&&l(!1)),this.setIndex(n),this.addAttribute("position",new J(o,3)),this.addAttribute("normal",new J(p,3)),this.addAttribute("uv",new J(q,2))}function kd(a,b,c,d,e,f,g){id.call(this,0,a,b,c,d,e,f,g),this.type="ConeGeometry",this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function ld(a,b,c,d,e,f,g){jd.call(this,0,a,b,c,d,e,f,g),this.type="ConeBufferGeometry",this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function md(a,b,c,d){A.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d},this.fromBufferGeometry(new nd(a,b,c,d)),this.mergeVertices()}function nd(a,b,d,e){N.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:b,thetaStart:d,thetaLength:e},a=a||1,b=void 0!==b?Math.max(3,b):8,d=void 0!==d?d:0,e=void 0!==e?e:2*Math.PI;var g,h,i=[],j=[],k=[],l=[],m=new f,n=new c;for(j.push(0,0,0),k.push(0,0,1),l.push(.5,.5),h=0,g=3;b>=h;h++,g+=3){var o=d+h/b*e;m.x=a*Math.cos(o),m.y=a*Math.sin(o),j.push(m.x,m.y,m.z),k.push(0,0,1),n.x=(j[g]/a+1)/2,n.y=(j[g+1]/a+1)/2,l.push(n.x,n.y)}for(g=1;b>=g;g++)i.push(g,g+1,0);this.setIndex(i),this.addAttribute("position",new J(j,3)),this.addAttribute("normal",new J(k,3)),this.addAttribute("uv",new J(l,2))}function od(a){S.call(this),this.type="ShadowMaterial",this.color=new t(0),this.transparent=!0,this.setValues(a)}function pd(a){T.call(this,a),this.type="RawShaderMaterial"}function qd(a){S.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new t(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pi,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function rd(a){qd.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(a)}function sd(a){S.call(this),this.type="MeshPhongMaterial",this.color=new t(16777215),this.specular=new t(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pi,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function td(a){sd.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(a)}function ud(a){S.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pi,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function vd(a){S.call(this),this.type="MeshLambertMaterial",this.color=new t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function wd(a){S.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new t(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pi,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(a)}function xd(a){Qb.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}function yd(a,b,c,d){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==d?d:new b.constructor(c),this.sampleValues=b,this.valueSize=c}function zd(a,b,c,d){yd.call(this,a,b,c,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ad(a,b,c,d){yd.call(this,a,b,c,d)}function Bd(a,b,c,d){yd.call(this,a,b,c,d)}function Cd(a,b,c,d){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=Gl.convertArray(b,this.TimeBufferType),this.values=Gl.convertArray(c,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}function Dd(a,b,c){Cd.call(this,a,b,c)}function Ed(a,b,c,d){Cd.call(this,a,b,c,d)}function Fd(a,b,c,d){Cd.call(this,a,b,c,d)}function Gd(a,b,c,d){yd.call(this,a,b,c,d)}function Hd(a,b,c,d){Cd.call(this,a,b,c,d)}function Id(a,b,c,d){Cd.call(this,a,b,c,d)}function Jd(a,b,c,d){Cd.call(this,a,b,c,d)}function Kd(a,b,c){this.name=a,this.tracks=c,this.duration=void 0!==b?b:-1,this.uuid=Ri.generateUUID(),this.duration<0&&this.resetDuration()}function Ld(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fd;case"vector":case"vector2":case"vector3":case"vector4":return Jd;case"color":return Ed;case"quaternion":return Hd;case"bool":case"boolean":return Dd;case"string":return Id}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function Md(a){if(void 0===a.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var b=Ld(a.type);if(void 0===a.times){var c=[],d=[];Gl.flattenJSON(a.keys,c,d,"value"),a.times=c,a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)}function Nd(a,b,c){var d=this,e=!1,f=0,g=0,h=void 0;this.onStart=void 0,this.onLoad=a,this.onProgress=b,this.onError=c,this.itemStart=function(a){g++,e===!1&&void 0!==d.onStart&&d.onStart(a,f,g),e=!0},this.itemEnd=function(a){f++,void 0!==d.onProgress&&d.onProgress(a,f,g),f===g&&(e=!1,void 0!==d.onLoad&&d.onLoad())},this.itemError=function(a){void 0!==d.onError&&d.onError(a)},this.resolveURL=function(a){return h?h(a):a},this.setURLModifier=function(a){return h=a,this}}function Od(a){this.manager=void 0!==a?a:Il}function Pd(a){this.manager=void 0!==a?a:Il}function Qd(a){this.manager=void 0!==a?a:Il,this._parser=null}function Rd(a){this.manager=void 0!==a?a:Il,this._parser=null}function Sd(a){this.manager=void 0!==a?a:Il}function Td(a){this.manager=void 0!==a?a:Il}function Ud(a){this.manager=void 0!==a?a:Il}function Vd(){this.type="Curve",this.arcLengthDivisions=200}function Wd(a,b,c,d,e,f,g,h){Vd.call(this),this.type="EllipseCurve",this.aX=a||0,this.aY=b||0,this.xRadius=c||1,this.yRadius=d||1,this.aStartAngle=e||0,this.aEndAngle=f||2*Math.PI,this.aClockwise=g||!1,this.aRotation=h||0}function Xd(a,b,c,d,e,f){Wd.call(this,a,b,c,c,d,e,f),this.type="ArcCurve"}function Yd(){function a(a,f,g,h){b=a,c=g,d=-3*a+3*f-2*g-h,e=2*a-2*f+g+h}var b=0,c=0,d=0,e=0;return{initCatmullRom:function(b,c,d,e,f){a(c,d,f*(d-b),f*(e-c))},initNonuniformCatmullRom:function(b,c,d,e,f,g,h){var i=(c-b)/f-(d-b)/(f+g)+(d-c)/g,j=(d-c)/g-(e-c)/(g+h)+(e-d)/h;i*=g,j*=g,a(c,d,i,j)},calc:function(a){var f=a*a,g=f*a;return b+c*a+d*f+e*g}}}function Zd(a,b,c,d){Vd.call(this),this.type="CatmullRomCurve3",this.points=a||[],this.closed=b||!1,this.curveType=c||"centripetal",this.tension=d||.5}function $d(a,b,c,d,e){var f=.5*(d-b),g=.5*(e-c),h=a*a,i=a*h;return(2*c-2*d+f+g)*i+(-3*c+3*d-2*f-g)*h+f*a+c}function _d(a,b){var c=1-a;return c*c*b}function ae(a,b){return 2*(1-a)*a*b}function be(a,b){return a*a*b}function ce(a,b,c,d){return _d(a,b)+ae(a,c)+be(a,d)}function de(a,b){var c=1-a;return c*c*c*b}function ee(a,b){var c=1-a;return 3*c*c*a*b}function fe(a,b){return 3*(1-a)*a*a*b}function ge(a,b){return a*a*a*b}function he(a,b,c,d,e){return de(a,b)+ee(a,c)+fe(a,d)+ge(a,e)}function ie(a,b,d,e){Vd.call(this),this.type="CubicBezierCurve",this.v0=a||new c,this.v1=b||new c,this.v2=d||new c,this.v3=e||new c}function je(a,b,c,d){Vd.call(this),this.type="CubicBezierCurve3",this.v0=a||new f,this.v1=b||new f,this.v2=c||new f,this.v3=d||new f}function ke(a,b){Vd.call(this),this.type="LineCurve",this.v1=a||new c,this.v2=b||new c}function le(a,b){Vd.call(this),this.type="LineCurve3",this.v1=a||new f,this.v2=b||new f}function me(a,b,d){Vd.call(this),this.type="QuadraticBezierCurve",this.v0=a||new c,this.v1=b||new c,this.v2=d||new c}function ne(a,b,c){Vd.call(this),this.type="QuadraticBezierCurve3",this.v0=a||new f,this.v1=b||new f,this.v2=c||new f}function oe(a){Vd.call(this),this.type="SplineCurve",this.points=a||[]}function pe(){Vd.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function qe(a){pe.call(this),this.type="Path",this.currentPoint=new c,a&&this.setFromPoints(a)}function re(a){qe.call(this,a),this.uuid=Ri.generateUUID(),this.type="Shape",this.holes=[]}function se(a,b){z.call(this),this.type="Light",this.color=new t(a),this.intensity=void 0!==b?b:1,this.receiveShadow=void 0}function te(a,b,c){se.call(this,a,c),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(z.DefaultUp),this.updateMatrix(),this.groundColor=new t(b)}function ue(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new c(512,512),this.map=null,this.matrix=new d}function ve(){ue.call(this,new zb(50,1,.5,500))}function we(a,b,c,d,e,f){se.call(this,a,b),this.type="SpotLight",this.position.copy(z.DefaultUp),this.updateMatrix(),this.target=new z,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}}),this.distance=void 0!==c?c:0,this.angle=void 0!==d?d:Math.PI/3,this.penumbra=void 0!==e?e:0,this.decay=void 0!==f?f:1,this.shadow=new ve}function xe(a,b,c,d){se.call(this,a,b),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}}),this.distance=void 0!==c?c:0,this.decay=void 0!==d?d:1,this.shadow=new ue(new zb(90,1,.5,500))}function ye(a,b,c,d,e,f){yb.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==a?a:-1,this.right=void 0!==b?b:1,this.top=void 0!==c?c:1,this.bottom=void 0!==d?d:-1,this.near=void 0!==e?e:.1,this.far=void 0!==f?f:2e3,this.updateProjectionMatrix()}function ze(){ue.call(this,new ye(-5,5,5,-5,.5,500))}function Ae(a,b){se.call(this,a,b),this.type="DirectionalLight",this.position.copy(z.DefaultUp),this.updateMatrix(),this.target=new z,this.shadow=new ze}function Be(a,b){se.call(this,a,b),this.type="AmbientLight",this.castShadow=void 0}function Ce(a,b,c,d){se.call(this,a,b),this.type="RectAreaLight",this.width=void 0!==c?c:10,this.height=void 0!==d?d:10}function De(a){this.manager=void 0!==a?a:Il,this.textures={}}function Ee(a){this.manager=void 0!==a?a:Il}function Fe(a){this.manager=void 0!==a?a:Il,this.resourcePath=""}function Ge(a){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==a?a:Il,this.options=void 0}function He(){this.type="ShapePath",this.color=new t,this.subPaths=[],this.currentPath=null}function Ie(a){this.type="Font",this.data=a}function Je(a,b,c){for(var d=Array.from?Array.from(a):String(a).split(""),e=b/c.resolution,f=(c.boundingBox.yMax-c.boundingBox.yMin+c.underlineThickness)*e,g=[],h=0,i=0,j=0;j<d.length;j++){var k=d[j];if("\n"===k)h=0,i-=f;else{var l=Ke(k,e,h,i,c);h+=l.offsetX,g.push(l.path)}}return g}function Ke(a,b,c,d,e){var f=e.glyphs[a]||e.glyphs["?"];if(f){var g,h,i,j,k,l,m,n,o=new He;if(f.o)for(var p=f._cachedOutline||(f._cachedOutline=f.o.split(" ")),q=0,r=p.length;r>q;){var s=p[q++];switch(s){case"m":g=p[q++]*b+c,h=p[q++]*b+d,o.moveTo(g,h);break;case"l":g=p[q++]*b+c,h=p[q++]*b+d,o.lineTo(g,h);break;case"q":i=p[q++]*b+c,j=p[q++]*b+d,k=p[q++]*b+c,l=p[q++]*b+d,o.quadraticCurveTo(k,l,i,j);break;case"b":i=p[q++]*b+c,j=p[q++]*b+d,k=p[q++]*b+c,l=p[q++]*b+d,m=p[q++]*b+c,n=p[q++]*b+d,o.bezierCurveTo(k,l,m,n,i,j)}}return{offsetX:f.ha*b,path:o}}}function Le(a){this.manager=void 0!==a?a:Il}function Me(){}function Ne(a){this.manager=void 0!==a?a:Il}function Oe(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zb,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zb,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Pe(a,b,c,d){z.call(this),this.type="CubeCamera";var e=90,g=1,h=new zb(e,g,a,b);h.up.set(0,-1,0),h.lookAt(new f(1,0,0)),this.add(h);var i=new zb(e,g,a,b);i.up.set(0,-1,0),i.lookAt(new f(-1,0,0)),this.add(i);var j=new zb(e,g,a,b);j.up.set(0,0,1),j.lookAt(new f(0,1,0)),this.add(j);var k=new zb(e,g,a,b);k.up.set(0,0,-1),k.lookAt(new f(0,-1,0)),this.add(k);var m=new zb(e,g,a,b);m.up.set(0,-1,0),m.lookAt(new f(0,0,1)),this.add(m);var n=new zb(e,g,a,b);n.up.set(0,-1,0),n.lookAt(new f(0,0,-1)),this.add(n),d=d||{format:Qh,magFilter:Ah,minFilter:Ah},this.renderTarget=new l(c,c,d),this.renderTarget.texture.name="CubeCamera",this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=a.getRenderTarget(),d=this.renderTarget,e=d.texture.generateMipmaps;d.texture.generateMipmaps=!1,d.activeCubeFace=0,a.render(b,h,d),d.activeCubeFace=1,a.render(b,i,d),d.activeCubeFace=2,a.render(b,j,d),d.activeCubeFace=3,a.render(b,k,d),d.activeCubeFace=4,a.render(b,m,d),d.texture.generateMipmaps=e,d.activeCubeFace=5,a.render(b,n,d),a.setRenderTarget(c)},this.clear=function(a,b,c,d){for(var e=a.getRenderTarget(),f=this.renderTarget,g=0;6>g;g++)f.activeCubeFace=g,a.setRenderTarget(f),a.clear(b,c,d);a.setRenderTarget(e)}}function Qe(a){this.autoStart=void 0!==a?a:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Re(){z.call(this),this.type="AudioListener",this.context=Vl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Se(a){z.call(this),this.type="Audio",this.listener=a,this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Te(a){Se.call(this,a),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ue(a,b){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0!==b?b:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function Ve(a,b,c){this.binding=a,this.valueSize=c;var d,e=Float64Array;switch(b){case"quaternion":d=this._slerp;break;case"string":case"bool":e=Array,d=this._select;break;default:d=this._lerp}this.buffer=new e(4*c),this._mixBufferRegion=d,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function We(a,b,c){var d=c||Xe.parseTrackName(b);this._targetGroup=a,this._bindings=a.subscribe_(b,d)}function Xe(a,b,c){this.path=b,this.parsedPath=c||Xe.parseTrackName(b),this.node=Xe.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function Ye(){this.uuid=Ri.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=b;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function Ze(a,b,c){
this._mixer=a,this._clip=b,this._localRoot=c||null;for(var d=b.tracks,e=d.length,f=new Array(e),g={endingStart:zi,endingEnd:zi},h=0;h!==e;++h){var i=d[h].createInterpolant(null);f[h]=i,i.settings=g}this._interpolantSettings=g,this._interpolants=f,this._propertyBindings=new Array(e),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ui,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function $e(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function _e(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}function af(){N.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function bf(a,b,c){Ib.call(this,a,b),this.meshPerAttribute=c||1}function cf(a,b,c,d){"number"==typeof c&&(d=c,c=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),B.call(this,a,b,c),this.meshPerAttribute=d||1}function df(a,b,c,d){this.ray=new U(a,b),this.near=c||0,this.far=d||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ef(a,b){return a.distance-b.distance}function ff(a,b,c,d){if(a.visible!==!1&&(a.raycast(b,c),d===!0))for(var e=a.children,f=0,g=e.length;g>f;f++)ff(e[f],b,c,!0)}function gf(a,b,c){return this.radius=void 0!==a?a:1,this.phi=void 0!==b?b:0,this.theta=void 0!==c?c:0,this}function hf(a,b,c){return this.radius=void 0!==a?a:1,this.theta=void 0!==b?b:0,this.y=void 0!==c?c:0,this}function jf(a,b){this.min=void 0!==a?a:new c(+(1/0),+(1/0)),this.max=void 0!==b?b:new c(-(1/0),-(1/0))}function kf(a,b){this.start=void 0!==a?a:new f,this.end=void 0!==b?b:new f}function lf(a){z.call(this),this.material=a,this.render=function(){}}function mf(a,b,c,d){this.object=a,this.size=void 0!==b?b:1;var e=void 0!==c?c:16711680,f=void 0!==d?d:1,g=0,h=this.object.geometry;h&&h.isGeometry?g=3*h.faces.length:h&&h.isBufferGeometry&&(g=h.attributes.normal.count);var i=new N,j=new J(2*g*3,3);i.addAttribute("position",j),Sb.call(this,i,new Qb({color:e,linewidth:f})),this.matrixAutoUpdate=!1,this.update()}function nf(a,b){z.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=b;for(var c=new N,d=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],e=0,f=1,g=32;g>e;e++,f++){var h=e/g*Math.PI*2,i=f/g*Math.PI*2;d.push(Math.cos(h),Math.sin(h),1,Math.cos(i),Math.sin(i),1)}c.addAttribute("position",new J(d,3));var j=new Qb({fog:!1});this.cone=new Sb(c,j),this.add(this.cone),this.update()}function of(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,of(a.children[c]));return b}function pf(a){for(var b=of(a),c=new N,d=[],e=[],f=new t(0,0,1),g=new t(0,1,0),h=0;h<b.length;h++){var i=b[h];i.parent&&i.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute("position",new J(d,3)),c.addAttribute("color",new J(e,3));var j=new Qb({vertexColors:Ag,depthTest:!1,depthWrite:!1,transparent:!0});Sb.call(this,c,j),this.root=a,this.bones=b,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1}function qf(a,b,c){this.light=a,this.light.updateMatrixWorld(),this.color=c;var d=new _c(b,4,2),e=new W({wireframe:!0,fog:!1});X.call(this,d,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function rf(a,b){this.type="RectAreaLightHelper",this.light=a,this.color=b;var c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],d=new N;d.addAttribute("position",new J(c,3)),d.computeBoundingSphere();var e=new Qb({fog:!1});Rb.call(this,d,e);var f=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],g=new N;g.addAttribute("position",new J(f,3)),g.computeBoundingSphere(),this.add(new X(g,new W({side:ug,fog:!1}))),this.update()}function sf(a,b,c){z.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=c;var d=new gc(b);d.rotateY(.5*Math.PI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Ag);var e=d.getAttribute("position"),f=new Float32Array(3*e.count);d.addAttribute("color",new B(f,3)),this.add(new X(d,this.material)),this.update()}function tf(a,b,c,d){a=a||10,b=b||10,c=new t(void 0!==c?c:4473924),d=new t(void 0!==d?d:8947848);for(var e=b/2,f=a/b,g=a/2,h=[],i=[],j=0,k=0,l=-g;b>=j;j++,l+=f){h.push(-g,0,l,g,0,l),h.push(l,0,-g,l,0,g);var m=j===e?c:d;m.toArray(i,k),k+=3,m.toArray(i,k),k+=3,m.toArray(i,k),k+=3,m.toArray(i,k),k+=3}var n=new N;n.addAttribute("position",new J(h,3)),n.addAttribute("color",new J(i,3));var o=new Qb({vertexColors:Ag});Sb.call(this,n,o)}function uf(a,b,c,d,e,f){a=a||10,b=b||16,c=c||8,d=d||64,e=new t(void 0!==e?e:4473924),f=new t(void 0!==f?f:8947848);var g,h,i,j,k,l,m,n=[],o=[];for(j=0;b>=j;j++)i=j/b*(2*Math.PI),g=Math.sin(i)*a,h=Math.cos(i)*a,n.push(0,0,0),n.push(g,0,h),m=1&j?e:f,o.push(m.r,m.g,m.b),o.push(m.r,m.g,m.b);for(j=0;c>=j;j++)for(m=1&j?e:f,l=a-a/c*j,k=0;d>k;k++)i=k/d*(2*Math.PI),g=Math.sin(i)*l,h=Math.cos(i)*l,n.push(g,0,h),o.push(m.r,m.g,m.b),i=(k+1)/d*(2*Math.PI),g=Math.sin(i)*l,h=Math.cos(i)*l,n.push(g,0,h),o.push(m.r,m.g,m.b);var p=new N;p.addAttribute("position",new J(n,3)),p.addAttribute("color",new J(o,3));var q=new Qb({vertexColors:Ag});Sb.call(this,p,q)}function vf(a,b,c,d){this.object=a,this.size=void 0!==b?b:1;var e=void 0!==c?c:16776960,f=void 0!==d?d:1,g=0,h=this.object.geometry;h&&h.isGeometry?g=h.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var i=new N,j=new J(2*g*3,3);i.addAttribute("position",j),Sb.call(this,i,new Qb({color:e,linewidth:f})),this.matrixAutoUpdate=!1,this.update()}function wf(a,b,c){z.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=c,void 0===b&&(b=1);var d=new N;d.addAttribute("position",new J([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));var e=new Qb({fog:!1});this.lightPlane=new Rb(d,e),this.add(this.lightPlane),d=new N,d.addAttribute("position",new J([0,0,0,0,0,1],3)),this.targetLine=new Rb(d,e),this.add(this.targetLine),this.update()}function xf(a){function b(a,b,d){c(a,d),c(b,d)}function c(a,b){f.push(0,0,0),g.push(b.r,b.g,b.b),void 0===h[a]&&(h[a]=[]),h[a].push(f.length/3-1)}var d=new N,e=new Qb({color:16777215,vertexColors:zg}),f=[],g=[],h={},i=new t(16755200),j=new t(16711680),k=new t(43775),l=new t(16777215),m=new t(3355443);b("n1","n2",i),b("n2","n4",i),b("n4","n3",i),b("n3","n1",i),b("f1","f2",i),b("f2","f4",i),b("f4","f3",i),b("f3","f1",i),b("n1","f1",i),b("n2","f2",i),b("n3","f3",i),b("n4","f4",i),b("p","n1",j),b("p","n2",j),b("p","n3",j),b("p","n4",j),b("u1","u2",k),b("u2","u3",k),b("u3","u1",k),b("c","t",l),b("p","c",m),b("cn1","cn2",m),b("cn3","cn4",m),b("cf1","cf2",m),b("cf3","cf4",m),d.addAttribute("position",new J(f,3)),d.addAttribute("color",new J(g,3)),Sb.call(this,d,e),this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=h,this.update()}function yf(a,b){this.object=a,void 0===b&&(b=16776960);var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new N;e.setIndex(new B(c,1)),e.addAttribute("position",new B(d,3)),Sb.call(this,e,new Qb({color:b})),this.matrixAutoUpdate=!1,this.update()}function zf(a,b){this.type="Box3Helper",this.box=a;var c=void 0!==b?b:16776960,d=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),e=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],f=new N;f.setIndex(new B(d,1)),f.addAttribute("position",new J(e,3)),Sb.call(this,f,new Qb({color:c})),this.geometry.computeBoundingSphere()}function Af(a,b,c){this.type="PlaneHelper",this.plane=a,this.size=void 0===b?1:b;var d=void 0!==c?c:16776960,e=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],f=new N;f.addAttribute("position",new J(e,3)),f.computeBoundingSphere(),Rb.call(this,f,new Qb({color:d}));var g=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],h=new N;h.addAttribute("position",new J(g,3)),h.computeBoundingSphere(),this.add(new X(h,new W({color:d,opacity:.2,transparent:!0,depthWrite:!1})))}function Bf(a,b,c,d,e,g){z.call(this),void 0===a&&(a=new f(0,0,1)),void 0===b&&(b=new f(0,0,0)),void 0===c&&(c=1),void 0===d&&(d=16776960),void 0===e&&(e=.2*c),void 0===g&&(g=.2*e),void 0===Xl&&(Xl=new N,Xl.addAttribute("position",new J([0,0,0,0,1,0],3)),Yl=new jd(0,.5,1,5,1),Yl.translate(0,-.5,0)),this.position.copy(b),this.line=new Rb(Xl,new Qb({color:d})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new X(Yl,new W({color:d})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(c,e,g)}function Cf(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a],c=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],d=new N;d.addAttribute("position",new J(b,3)),d.addAttribute("color",new J(c,3));var e=new Qb({vertexColors:Ag});Sb.call(this,d,e)}function Df(a,b,c,d,e,f,g){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new w(a,b,c,e,f,g)}function Ef(a){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),a}function Ff(a){return void 0===a&&(a=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),a.isMultiMaterial=!0,a.materials=a,a.clone=function(){return a.slice()},a}function Gf(a,b){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Vb(a,b)}function Hf(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Lb(a)}function If(a,b){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Vb(a,b)}function Jf(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ub(a)}function Kf(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ub(a)}function Lf(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ub(a)}function Mf(a,b,c){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new f(a,b,c)}function Nf(a,b){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new B(a,b).setDynamic(!0)}function Of(a,b){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(a,b)}function Pf(a,b){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new D(a,b)}function Qf(a,b){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new E(a,b)}function Rf(a,b){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new F(a,b)}function Sf(a,b){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new G(a,b)}function Tf(a,b){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new H(a,b)}function Uf(a,b){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new I(a,b)}function Vf(a,b){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new J(a,b)}function Wf(a,b){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new K(a,b)}function Xf(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Zd.call(this,a),this.type="catmullrom",this.closed=!0}function Yf(a){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Zd.call(this,a),this.type="catmullrom"}function Zf(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Zd.call(this,a),this.type="catmullrom"}function $f(a){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Cf(a)}function _f(a,b){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new yf(a,b)}function ag(a,b){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Sb(new hd(a.geometry),new Qb({color:void 0!==b?b:16777215}))}function bg(a,b){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Sb(new $b(a.geometry),new Qb({color:void 0!==b?b:16777215}))}function cg(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Od(a)}function dg(a){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Rd(a)}function eg(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project()."),a.project(b)},this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),a.unproject(b)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function fg(){console.error("THREE.CanvasRenderer has been removed")}function gg(){console.error("THREE.JSONLoader has been removed.")}function hg(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a}),void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:a>0?1:+a}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}(),Object.assign(b.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]),-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners,d=c[a];if(void 0!==d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners,c=b[a.type];if(void 0!==c){a.target=this;for(var d=c.slice(0),e=0,f=d.length;f>e;e++)d[e].call(this,a)}}}});var ig="101",jg={LEFT:0,MIDDLE:1,RIGHT:2},kg=0,lg=1,mg=2,ng=3,og=0,pg=1,qg=0,rg=1,sg=2,tg=0,ug=1,vg=2,wg=1,xg=2,yg=0,zg=1,Ag=2,Bg=0,Cg=1,Dg=2,Eg=3,Fg=4,Gg=5,Hg=100,Ig=101,Jg=102,Kg=103,Lg=104,Mg=200,Ng=201,Og=202,Pg=203,Qg=204,Rg=205,Sg=206,Tg=207,Ug=208,Vg=209,Wg=210,Xg=0,Yg=1,Zg=2,$g=3,_g=4,ah=5,bh=6,ch=7,dh=0,eh=1,fh=2,gh=0,hh=1,ih=2,jh=3,kh=4,lh=5,mh=300,nh=301,oh=302,ph=303,qh=304,rh=305,sh=306,th=307,uh=1e3,vh=1001,wh=1002,xh=1003,yh=1004,zh=1005,Ah=1006,Bh=1007,Ch=1008,Dh=1009,Eh=1010,Fh=1011,Gh=1012,Hh=1013,Ih=1014,Jh=1015,Kh=1016,Lh=1017,Mh=1018,Nh=1019,Oh=1020,Ph=1021,Qh=1022,Rh=1023,Sh=1024,Th=1025,Uh=Rh,Vh=1026,Wh=1027,Xh=1028,Yh=33776,Zh=33777,$h=33778,_h=33779,ai=35840,bi=35841,ci=35842,di=35843,ei=36196,fi=37808,gi=37809,hi=37810,ii=37811,ji=37812,ki=37813,li=37814,mi=37815,ni=37816,oi=37817,pi=37818,qi=37819,ri=37820,si=37821,ti=2200,ui=2201,vi=2202,wi=2300,xi=2301,yi=2302,zi=2400,Ai=2401,Bi=2402,Ci=0,Di=1,Ei=2,Fi=3e3,Gi=3001,Hi=3007,Ii=3002,Ji=3003,Ki=3004,Li=3005,Mi=3006,Ni=3200,Oi=3201,Pi=0,Qi=1,Ri={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?"0":"")+b.toString(16);return function(){var b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=a[255&b]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[255&c]+a[c>>8&255]+"-"+a[c>>16&15|64]+a[c>>24&255]+"-"+a[63&d|128]+a[d>>8&255]+"-"+a[d>>16&255]+a[d>>24&255]+a[255&e]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255];return f.toUpperCase()}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*(3-2*a))},smootherstep:function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*a*(a*(6*a-15)+10))},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*Ri.DEG2RAD},radToDeg:function(a){return a*Ri.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}};Object.defineProperties(c.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}}),Object.assign(c.prototype,{isVector2:!0,set:function(a,b){return this.x=a,this.y=b,this},setScalar:function(a){return this.x=a,this.y=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y,d=a.elements;return this.x=d[0]*b+d[3]*c+d[6],this.y=d[1]*b+d[4]*c+d[7],this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,b){return this.x=Math.max(a.x,Math.min(b.x,this.x)),this.y=Math.max(a.y,Math.min(b.y,this.y)),this},clampScalar:function(){var a=new c,b=new c;return function(c,d){return a.set(c,c),b.set(d,d),this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=Math.atan2(this.y,this.x);return 0>a&&(a+=2*Math.PI),a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a},fromBufferAttribute:function(a,b,c){return void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(b),this.y=a.getY(b),this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-a.x,f=this.y-a.y;return this.x=e*c-f*d+a.x,this.y=e*d+f*c+a.y,this}}),Object.assign(d.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new d).fromArray(this.elements)},copy:function(a){var b=this.elements,c=a.elements;return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],this},copyPosition:function(a){var b=this.elements,c=a.elements;return b[12]=c[12],b[13]=c[13],b[14]=c[14],this},extractBasis:function(a,b,c){return a.setFromMatrixColumn(this,0),b.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this},makeBasis:function(a,b,c){return this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1),this},extractRotation:function(){var a=new f;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length(),g=1/a.setFromMatrixColumn(b,2).length();return c[0]=d[0]*e,c[1]=d[1]*e,c[2]=d[2]*e,c[3]=0,c[4]=d[4]*f,c[5]=d[5]*f,c[6]=d[6]*f,c[7]=0,c[8]=d[8]*g,c[9]=d[9]*g,c[10]=d[10]*g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),g=Math.sin(c),h=Math.cos(d),i=Math.sin(d),j=Math.cos(e),k=Math.sin(e);if("XYZ"===a.order){var l=f*j,m=f*k,n=g*j,o=g*k;b[0]=h*j,b[4]=-h*k,b[8]=i,b[1]=m+n*i,b[5]=l-o*i,b[9]=-g*h,b[2]=o-l*i,b[6]=n+m*i,b[10]=f*h}else if("YXZ"===a.order){var p=h*j,q=h*k,r=i*j,s=i*k;b[0]=p+s*g,b[4]=r*g-q,b[8]=f*i,b[1]=f*k,b[5]=f*j,b[9]=-g,b[2]=q*g-r,b[6]=s+p*g,b[10]=f*h}else if("ZXY"===a.order){var p=h*j,q=h*k,r=i*j,s=i*k;b[0]=p-s*g,b[4]=-f*k,b[8]=r+q*g,b[1]=q+r*g,b[5]=f*j,b[9]=s-p*g,b[2]=-f*i,b[6]=g,b[10]=f*h}else if("ZYX"===a.order){var l=f*j,m=f*k,n=g*j,o=g*k;b[0]=h*j,b[4]=n*i-m,b[8]=l*i+o,b[1]=h*k,b[5]=o*i+l,b[9]=m*i-n,b[2]=-i,b[6]=g*h,b[10]=f*h}else if("YZX"===a.order){var t=f*h,u=f*i,v=g*h,w=g*i;b[0]=h*j,b[4]=w-t*k,b[8]=v*k+u,b[1]=k,b[5]=f*j,b[9]=-g*j,b[2]=-i*j,b[6]=u*k+v,b[10]=t-w*k}else if("XZY"===a.order){var t=f*h,u=f*i,v=g*h,w=g*i;b[0]=h*j,b[4]=-k,b[8]=i*j,b[1]=t*k+w,b[5]=f*j,b[9]=u*k-v,b[2]=v*k-u,b[6]=g*j,b[10]=w*k+t}return b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},makeRotationFromQuaternion:function(){var a=new f(0,0,0),b=new f(1,1,1);return function(c){return this.compose(a,c,b)}}(),lookAt:function(){var a=new f,b=new f,c=new f;return function(d,e,f){var g=this.elements;return c.subVectors(d,e),0===c.lengthSq()&&(c.z=1),c.normalize(),a.crossVectors(f,c),0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),a.crossVectors(f,c)),a.normalize(),b.crossVectors(c,a),g[0]=a.x,g[4]=b.x,g[8]=c.x,g[1]=a.y,g[5]=b.y,g[9]=c.y,g[2]=a.z,g[6]=b.z,g[10]=c.z,this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],k=c[5],l=c[9],m=c[13],n=c[2],o=c[6],p=c[10],q=c[14],r=c[3],s=c[7],t=c[11],u=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],K=d[15];return e[0]=f*v+g*z+h*D+i*H,e[4]=f*w+g*A+h*E+i*I,e[8]=f*x+g*B+h*F+i*J,e[12]=f*y+g*C+h*G+i*K,e[1]=j*v+k*z+l*D+m*H,e[5]=j*w+k*A+l*E+m*I,e[9]=j*x+k*B+l*F+m*J,e[13]=j*y+k*C+l*G+m*K,e[2]=n*v+o*z+p*D+q*H,e[6]=n*w+o*A+p*E+q*I,e[10]=n*x+o*B+p*F+q*J,e[14]=n*y+o*C+p*G+q*K,e[3]=r*v+s*z+t*D+u*H,e[7]=r*w+s*A+t*E+u*I,e[11]=r*x+s*B+t*F+u*J,e[15]=r*y+s*C+t*G+u*K,this},multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},applyToBufferAttribute:function(){var a=new f;return function(b){for(var c=0,d=b.count;d>c;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15];return n*(+e*h*k-d*i*k-e*g*l+c*i*l+d*g*m-c*h*m)+o*(+b*h*m-b*i*l+e*f*l-d*f*m+d*i*j-e*h*j)+p*(+b*i*k-b*g*m-e*f*k+c*f*m+e*g*j-c*i*j)+q*(-d*g*j-b*h*k+b*g*l+d*f*k-c*f*l+c*h*j)},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},setPosition:function(a){var b=this.elements;return b[12]=a.x,b[13]=a.y,b[14]=a.z,this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[1],g=d[2],h=d[3],i=d[4],j=d[5],k=d[6],l=d[7],m=d[8],n=d[9],o=d[10],p=d[11],q=d[12],r=d[13],s=d[14],t=d[15],u=n*s*l-r*o*l+r*k*p-j*s*p-n*k*t+j*o*t,v=q*o*l-m*s*l-q*k*p+i*s*p+m*k*t-i*o*t,w=m*r*l-q*n*l+q*j*p-i*r*p-m*j*t+i*n*t,x=q*n*k-m*r*k-q*j*o+i*r*o+m*j*s-i*n*s,y=e*u+f*v+g*w+h*x;if(0===y){var z="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(b===!0)throw new Error(z);return console.warn(z),this.identity()}var A=1/y;return c[0]=u*A,c[1]=(r*o*h-n*s*h-r*g*p+f*s*p+n*g*t-f*o*t)*A,c[2]=(j*s*h-r*k*h+r*g*l-f*s*l-j*g*t+f*k*t)*A,c[3]=(n*k*h-j*o*h-n*g*l+f*o*l+j*g*p-f*k*p)*A,c[4]=v*A,c[5]=(m*s*h-q*o*h+q*g*p-e*s*p-m*g*t+e*o*t)*A,c[6]=(q*k*h-i*s*h-q*g*l+e*s*l+i*g*t-e*k*t)*A,c[7]=(i*o*h-m*k*h+m*g*l-e*o*l-i*g*p+e*k*p)*A,c[8]=w*A,c[9]=(q*n*h-m*r*h-q*f*p+e*r*p+m*f*t-e*n*t)*A,c[10]=(i*r*h-q*j*h+q*f*l-e*r*l-i*f*t+e*j*t)*A,c[11]=(m*j*h-i*n*h-m*f*l+e*n*l+i*f*p-e*j*p)*A,c[12]=x*A,c[13]=(m*r*g-q*n*g+q*f*o-e*r*o-m*f*s+e*n*s)*A,c[14]=(q*j*g-i*r*g-q*f*k+e*r*k+i*f*s-e*j*s)*A,c[15]=(i*n*g-m*j*g+m*f*k-e*n*k-i*f*o+e*j*o)*A,this},scale:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;return b[0]*=c,b[4]*=d,b[8]*=e,b[1]*=c,b[5]*=d,b[9]*=e,b[2]*=c,b[6]*=d,b[10]*=e,b[3]*=c,b[7]*=d,b[11]*=e,this},getMaxScaleOnAxis:function(){var a=this.elements,b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],c=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],d=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(b,c,d))},makeTranslation:function(a,b,c){return this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1),this},makeRotationX:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(1,0,0,0,0,b,-c,0,0,c,b,0,0,0,0,1),this},makeRotationY:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(b,0,c,0,0,1,0,0,-c,0,b,0,0,0,0,1),this},makeRotationZ:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(b,-c,0,0,c,b,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1),this},makeScale:function(a,b,c){return this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1),this},makeShear:function(a,b,c){return this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1),this},compose:function(a,b,c){var d=this.elements,e=b._x,f=b._y,g=b._z,h=b._w,i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=c.x,v=c.y,w=c.z;return d[0]=(1-(o+q))*u,d[1]=(m+t)*u,d[2]=(n-s)*u,d[3]=0,d[4]=(m-t)*v,d[5]=(1-(l+q))*v,d[6]=(p+r)*v,d[7]=0,d[8]=(n+s)*w,d[9]=(p-r)*w,d[10]=(1-(l+o))*w,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,this},decompose:function(){var a=new f,b=new d;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),i=a.set(f[8],f[9],f[10]).length(),j=this.determinant();0>j&&(g=-g),c.x=f[12],c.y=f[13],c.z=f[14],b.copy(this);var k=1/g,l=1/h,m=1/i;return b.elements[0]*=k,b.elements[1]*=k,b.elements[2]*=k,b.elements[4]*=l,b.elements[5]*=l,b.elements[6]*=l,b.elements[8]*=m,b.elements[9]*=m,b.elements[10]*=m,d.setFromRotationMatrix(b),e.x=g,e.y=h,e.z=i,this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements,h=2*e/(b-a),i=2*e/(c-d),j=(b+a)/(b-a),k=(c+d)/(c-d),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),i=1/(c-d),j=1/(f-e),k=(b+a)*h,l=(c+d)*i,m=(f+e)*j;return g[0]=2*h,g[4]=0,g[8]=0,g[12]=-k,g[1]=0,g[5]=2*i,g[9]=0,g[13]=-l,g[2]=0,g[6]=0,g[10]=-2*j,g[14]=-m,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this},equals:function(a){for(var b=this.elements,c=a.elements,d=0;16>d;d++)if(b[d]!==c[d])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a[b+9]=c[9],a[b+10]=c[10],a[b+11]=c[11],a[b+12]=c[12],a[b+13]=c[13],a[b+14]=c[14],a[b+15]=c[15],a}}),Object.assign(e,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],i=c[d+1],j=c[d+2],k=c[d+3],l=e[f+0],m=e[f+1],n=e[f+2],o=e[f+3];if(k!==o||h!==l||i!==m||j!==n){var p=1-g,q=h*l+i*m+j*n+k*o,r=q>=0?1:-1,s=1-q*q;if(s>Number.EPSILON){var t=Math.sqrt(s),u=Math.atan2(t,q*r);p=Math.sin(p*u)/t,g=Math.sin(g*u)/t}var v=g*r;if(h=h*p+l*v,i=i*p+m*v,j=j*p+n*v,k=k*p+o*v,p===1-g){var w=1/Math.sqrt(h*h+i*i+j*j+k*k);h*=w,i*=w,j*=w,k*=w}}a[b]=h,a[b+1]=i,a[b+2]=j,a[b+3]=k}}),Object.defineProperties(e.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a,
this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a,this.onChangeCallback()}}}),Object.assign(e.prototype,{isQuaternion:!0,set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._w=d,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z,f=a.order,g=Math.cos,h=Math.sin,i=g(c/2),j=g(d/2),k=g(e/2),l=h(c/2),m=h(d/2),n=h(e/2);return"XYZ"===f?(this._x=l*j*k+i*m*n,this._y=i*m*k-l*j*n,this._z=i*j*n+l*m*k,this._w=i*j*k-l*m*n):"YXZ"===f?(this._x=l*j*k+i*m*n,this._y=i*m*k-l*j*n,this._z=i*j*n-l*m*k,this._w=i*j*k+l*m*n):"ZXY"===f?(this._x=l*j*k-i*m*n,this._y=i*m*k+l*j*n,this._z=i*j*n+l*m*k,this._w=i*j*k-l*m*n):"ZYX"===f?(this._x=l*j*k-i*m*n,this._y=i*m*k+l*j*n,this._z=i*j*n-l*m*k,this._w=i*j*k+l*m*n):"YZX"===f?(this._x=l*j*k+i*m*n,this._y=i*m*k+l*j*n,this._z=i*j*n-l*m*k,this._w=i*j*k-l*m*n):"XZY"===f&&(this._x=l*j*k-i*m*n,this._y=i*m*k-l*j*n,this._z=i*j*n+l*m*k,this._w=i*j*k+l*m*n),b!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(c),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var b,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[1],h=c[5],i=c[9],j=c[2],k=c[6],l=c[10],m=d+h+l;return m>0?(b=.5/Math.sqrt(m+1),this._w=.25/b,this._x=(k-i)*b,this._y=(f-j)*b,this._z=(g-e)*b):d>h&&d>l?(b=2*Math.sqrt(1+d-h-l),this._w=(k-i)/b,this._x=.25*b,this._y=(e+g)/b,this._z=(f+j)/b):h>l?(b=2*Math.sqrt(1+h-d-l),this._w=(f-j)/b,this._x=(e+g)/b,this._y=.25*b,this._z=(i+k)/b):(b=2*Math.sqrt(1+l-d-h),this._w=(g-e)/b,this._x=(f+j)/b,this._y=(i+k)/b,this._z=.25*b),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,b=new f,c=1e-6;return function(d,e){return void 0===b&&(b=new f),a=d.dot(e)+1,c>a?(a=0,Math.abs(d.x)>Math.abs(d.z)?b.set(-d.y,d.x,0):b.set(0,-d.z,d.y)):b.crossVectors(d,e),this._x=b.x,this._y=b.y,this._z=b.z,this._w=a,this.normalize()}}(),angleTo:function(a){return 2*Math.acos(Math.abs(Ri.clamp(this.dot(a),-1,1)))},rotateTowards:function(a,b){var c=this.angleTo(a);if(0===c)return this;var d=Math.min(1,b/c);return this.slerp(a,d),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,i=b._z,j=b._w;return this._x=c*j+f*g+d*i-e*h,this._y=d*j+f*h+e*g-c*i,this._z=e*j+f*i+c*h-d*g,this._w=f*j-c*g-d*h-e*i,this.onChangeCallback(),this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;if(0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a),g>=1)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=1-g*g;if(h<=Number.EPSILON){var i=1-b;return this._w=i*f+b*this._w,this._x=i*c+b*this._x,this._y=i*d+b*this._y,this._z=i*e+b*this._z,this.normalize()}var j=Math.sqrt(h),k=Math.atan2(j,g),l=Math.sin((1-b)*k)/j,m=Math.sin(b*k)/j;return this._w=f*l+this._w*m,this._x=c*l+this._x*m,this._y=d*l+this._y*m,this._z=e*l+this._z*m,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){return void 0===b&&(b=0),this._x=a[b],this._y=a[b+1],this._z=a[b+2],this._w=a[b+3],this.onChangeCallback(),this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this._x,a[b+1]=this._y,a[b+2]=this._z,a[b+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}}),Object.assign(f.prototype,{isVector3:!0,set:function(a,b,c){return this.x=a,this.y=b,this.z=c,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this},multiplyVectors:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},applyEuler:function(){var a=new e;return function(b){return b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new e;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements,f=1/(e[3]*b+e[7]*c+e[11]*d+e[15]);return this.x=(e[0]*b+e[4]*c+e[8]*d+e[12])*f,this.y=(e[1]*b+e[5]*c+e[9]*d+e[13])*f,this.z=(e[2]*b+e[6]*c+e[10]*d+e[14])*f,this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},project:function(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)},unproject:function(){var a=new d;return function(b){return this.applyMatrix4(a.getInverse(b.projectionMatrix)).applyMatrix4(b.matrixWorld)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d,this.y=e[1]*b+e[5]*c+e[9]*d,this.z=e[2]*b+e[6]*c+e[10]*d,this.normalize()},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,b){return this.x=Math.max(a.x,Math.min(b.x,this.x)),this.y=Math.max(a.y,Math.min(b.y,this.y)),this.z=Math.max(a.z,Math.min(b.z,this.z)),this},clampScalar:function(){var a=new f,b=new f;return function(c,d){return a.set(c,c,c),b.set(d,d,d),this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=d*h-e*g,this.y=e*f-c*h,this.z=c*g-d*f,this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new f;return function(b){return a.copy(this).projectOnVector(b),this.sub(a)}}(),reflect:function(){var a=new f;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){var b=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(Ri.clamp(b,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)},setFromSphericalCoords:function(a,b,c){var d=Math.sin(b)*a;return this.x=d*Math.sin(c),this.y=Math.cos(b)*a,this.z=d*Math.cos(c),this},setFromCylindrical:function(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)},setFromCylindricalCoords:function(a,b,c){return this.x=a*Math.sin(b),this.y=c,this.z=a*Math.cos(b),this},setFromMatrixPosition:function(a){var b=a.elements;return this.x=b[12],this.y=b[13],this.z=b[14],this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length(),d=this.setFromMatrixColumn(a,2).length();return this.x=b,this.y=c,this.z=d,this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this.z=a[b+2],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a[b+2]=this.z,a},fromBufferAttribute:function(a,b,c){return void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(b),this.y=a.getY(b),this.z=a.getZ(b),this}}),Object.assign(g.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[1]=d,j[2]=g,j[3]=b,j[4]=e,j[5]=h,j[6]=c,j[7]=f,j[8]=i,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements,c=a.elements;return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],this},setFromMatrix4:function(a){var b=a.elements;return this.set(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10]),this},applyToBufferAttribute:function(){var a=new f;return function(b){for(var c=0,d=b.count;d>c;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[3],h=c[6],i=c[1],j=c[4],k=c[7],l=c[2],m=c[5],n=c[8],o=d[0],p=d[3],q=d[6],r=d[1],s=d[4],t=d[7],u=d[2],v=d[5],w=d[8];return e[0]=f*o+g*r+h*u,e[3]=f*p+g*s+h*v,e[6]=f*q+g*t+h*w,e[1]=i*o+j*r+k*u,e[4]=i*p+j*s+k*v,e[7]=i*q+j*t+k*w,e[2]=l*o+m*r+n*u,e[5]=l*p+m*s+n*v,e[8]=l*q+m*t+n*w,this},multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*f*j-b*g*i-c*e*j+c*g*h+d*e*i-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var c=a.elements,d=this.elements,e=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=c[8],n=m*i-j*l,o=j*k-m*h,p=l*h-i*k,q=e*n+f*o+g*p;if(0===q){var r="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(b===!0)throw new Error(r);return console.warn(r),this.identity()}var s=1/q;return d[0]=n*s,d[1]=(g*l-m*f)*s,d[2]=(j*f-g*i)*s,d[3]=o*s,d[4]=(m*e-g*k)*s,d[5]=(g*h-j*e)*s,d[6]=p*s,d[7]=(f*k-l*e)*s,d[8]=(i*e-f*h)*s,this},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;return a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8],this},setUvTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e),i=Math.sin(e);this.set(c*h,c*i,-c*(h*f+i*g)+f+a,-d*i,d*h,-d*(-i*f+h*g)+g+b,0,0,1)},scale:function(a,b){var c=this.elements;return c[0]*=a,c[3]*=a,c[6]*=a,c[1]*=b,c[4]*=b,c[7]*=b,this},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=this.elements,e=d[0],f=d[3],g=d[6],h=d[1],i=d[4],j=d[7];return d[0]=b*e+c*h,d[3]=b*f+c*i,d[6]=b*g+c*j,d[1]=-c*e+b*h,d[4]=-c*f+b*i,d[7]=-c*g+b*j,this},translate:function(a,b){var c=this.elements;return c[0]+=a*c[2],c[3]+=a*c[5],c[6]+=a*c[8],c[1]+=b*c[2],c[4]+=b*c[5],c[7]+=b*c[8],this},equals:function(a){for(var b=this.elements,c=a.elements,d=0;9>d;d++)if(b[d]!==c[d])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a}});var Si,Ti={getDataURL:function(a){var b;if("undefined"==typeof HTMLCanvasElement)return a.src;if(a instanceof HTMLCanvasElement)b=a;else{void 0===Si&&(Si=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Si.width=a.width,Si.height=a.height;var c=Si.getContext("2d");a instanceof ImageData?c.putImageData(a,0,0):c.drawImage(a,0,0,a.width,a.height),b=Si}return b.width>2048||b.height>2048?b.toDataURL("image/jpeg",.6):b.toDataURL("image/png")}},Ui=0;h.DEFAULT_IMAGE=void 0,h.DEFAULT_MAPPING=mh,h.prototype=Object.assign(Object.create(b.prototype),{constructor:h,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.name=a.name,this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this},toJSON:function(a){var b=void 0===a||"string"==typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var d=this.image;if(void 0===d.uuid&&(d.uuid=Ri.generateUUID()),!b&&void 0===a.images[d.uuid]){var e;if(Array.isArray(d)){e=[];for(var f=0,g=d.length;g>f;f++)e.push(Ti.getDataURL(d[f]))}else e=Ti.getDataURL(d);a.images[d.uuid]={uuid:d.uuid,url:e}}c.image=d.uuid}return b||(a.textures[this.uuid]=c),c},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping!==mh)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case uh:a.x=a.x-Math.floor(a.x);break;case vh:a.x=a.x<0?0:1;break;case wh:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x=a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case uh:a.y=a.y-Math.floor(a.y);break;case vh:a.y=a.y<0?0:1;break;case wh:1===Math.abs(Math.floor(a.y)%2)?a.y=Math.ceil(a.y)-a.y:a.y=a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}}),Object.defineProperty(h.prototype,"needsUpdate",{set:function(a){a===!0&&this.version++}}),Object.assign(i.prototype,{isVector4:!0,set:function(a,b,c,d){return this.x=a,this.y=b,this.z=c,this.w=d,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this.w=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.w+=a.w*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.elements;return this.x=f[0]*b+f[4]*c+f[8]*d+f[12]*e,this.y=f[1]*b+f[5]*c+f[9]*d+f[13]*e,this.z=f[2]*b+f[6]*c+f[10]*d+f[14]*e,this.w=f[3]*b+f[7]*c+f[11]*d+f[15]*e,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);return 1e-4>b?(this.x=1,this.y=0,this.z=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b),this},setAxisAngleFromRotationMatrix:function(a){var b,c,d,e,f=.01,g=.1,h=a.elements,i=h[0],j=h[4],k=h[8],l=h[1],m=h[5],n=h[9],o=h[2],p=h[6],q=h[10];if(Math.abs(j-l)<f&&Math.abs(k-o)<f&&Math.abs(n-p)<f){if(Math.abs(j+l)<g&&Math.abs(k+o)<g&&Math.abs(n+p)<g&&Math.abs(i+m+q-3)<g)return this.set(1,0,0,0),this;b=Math.PI;var r=(i+1)/2,s=(m+1)/2,t=(q+1)/2,u=(j+l)/4,v=(k+o)/4,w=(n+p)/4;return r>s&&r>t?f>r?(c=0,d=.707106781,e=.707106781):(c=Math.sqrt(r),d=u/c,e=v/c):s>t?f>s?(c=.707106781,d=0,e=.707106781):(d=Math.sqrt(s),c=u/d,e=w/d):f>t?(c=.707106781,d=.707106781,e=0):(e=Math.sqrt(t),c=v/e,d=w/e),this.set(c,d,e,b),this}var x=Math.sqrt((p-n)*(p-n)+(k-o)*(k-o)+(l-j)*(l-j));return Math.abs(x)<.001&&(x=1),this.x=(p-n)/x,this.y=(k-o)/x,this.z=(l-j)/x,this.w=Math.acos((i+m+q-1)/2),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,b){return this.x=Math.max(a.x,Math.min(b.x,this.x)),this.y=Math.max(a.y,Math.min(b.y,this.y)),this.z=Math.max(a.z,Math.min(b.z,this.z)),this.w=Math.max(a.w,Math.min(b.w,this.w)),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new i,b=new i),a.set(c,c,c,c),b.set(d,d,d,d),this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this.z=a[b+2],this.w=a[b+3],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a[b+2]=this.z,a[b+3]=this.w,a},fromBufferAttribute:function(a,b,c){return void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(b),this.y=a.getY(b),this.z=a.getZ(b),this.w=a.getW(b),this}}),j.prototype=Object.assign(Object.create(b.prototype),{constructor:j,isWebGLRenderTarget:!0,setSize:function(a,b){(this.width!==a||this.height!==b)&&(this.width=a,this.height=b,this.dispose()),this.viewport.set(0,0,a,b),this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),k.prototype=Object.assign(Object.create(j.prototype),{constructor:k,isWebGLMultisampleRenderTarget:!0,copy:function(a){return j.prototype.copy.call(this,a),this.samples=a.samples,this}}),l.prototype=Object.create(j.prototype),l.prototype.constructor=l,l.prototype.isWebGLRenderTargetCube=!0,m.prototype=Object.create(h.prototype),m.prototype.constructor=m,m.prototype.isDataTexture=!0,Object.assign(n.prototype,{isBox3:!0,set:function(a,b){return this.min.copy(a),this.max.copy(b),this},setFromArray:function(a){for(var b=+(1/0),c=+(1/0),d=+(1/0),e=-(1/0),f=-(1/0),g=-(1/0),h=0,i=a.length;i>h;h+=3){var j=a[h],k=a[h+1],l=a[h+2];b>j&&(b=j),c>k&&(c=k),d>l&&(d=l),j>e&&(e=j),k>f&&(f=k),l>g&&(g=l)}return this.min.set(b,c,d),this.max.set(e,f,g),this},setFromBufferAttribute:function(a){for(var b=+(1/0),c=+(1/0),d=+(1/0),e=-(1/0),f=-(1/0),g=-(1/0),h=0,i=a.count;i>h;h++){var j=a.getX(h),k=a.getY(h),l=a.getZ(h);b>j&&(b=j),c>k&&(c=k),d>l&&(d=l),j>e&&(e=j),k>f&&(f=k),l>g&&(g=l)}return this.min.set(b,c,d),this.max.set(e,f,g),this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;c>b;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new f;return function(b,c){var d=a.copy(c).multiplyScalar(.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),setFromObject:function(a){return this.makeEmpty(),this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){return void 0===a&&(console.warn("THREE.Box3: .getCenter() target is now required"),a=new f),this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){return void 0===a&&(console.warn("THREE.Box3: .getSize() target is now required"),a=new f),this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},expandByObject:function(){function a(a){var f=a.geometry;if(void 0!==f)if(f.isGeometry){var g=f.vertices;for(c=0,d=g.length;d>c;c++)e.copy(g[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e)}else if(f.isBufferGeometry){var h=f.attributes.position;if(void 0!==h)for(c=0,d=h.count;d>c;c++)e.fromBufferAttribute(h,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}}var b,c,d,e=new f;return function(c){return b=this,c.updateMatrixWorld(!0),c.traverse(a),this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){return void 0===b&&(console.warn("THREE.Box3: .getParameter() target is now required"),b=new f),b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new f;return function(b){return this.clampPoint(b.center,a),a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){var b,c;return a.normal.x>0?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x),a.normal.y>0?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y),a.normal.z>0?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z),b<=-a.constant&&c>=-a.constant},intersectsTriangle:function(){function a(a){var e,f;for(e=0,f=a.length-3;f>=e;e+=3){i.fromArray(a,e);var g=k.x*Math.abs(i.x)+k.y*Math.abs(i.y)+k.z*Math.abs(i.z),h=b.dot(i),j=c.dot(i),l=d.dot(i);if(Math.max(-Math.max(h,j,l),Math.min(h,j,l))>g)return!1}return!0}var b=new f,c=new f,d=new f,e=new f,g=new f,h=new f,i=new f,j=new f,k=new f,l=new f;return function(f){if(this.isEmpty())return!1;this.getCenter(j),k.subVectors(this.max,j),b.subVectors(f.a,j),c.subVectors(f.b,j),d.subVectors(f.c,j),e.subVectors(c,b),g.subVectors(d,c),h.subVectors(b,d);var i=[0,-e.z,e.y,0,-g.z,g.y,0,-h.z,h.y,e.z,0,-e.x,g.z,0,-g.x,h.z,0,-h.x,-e.y,e.x,0,-g.y,g.x,0,-h.y,h.x,0];return a(i)?(i=[1,0,0,0,1,0,0,0,1],a(i)?(l.crossVectors(e,g),i=[l.x,l.y,l.z],a(i)):!1):!1}}(),clampPoint:function(a,b){return void 0===b&&(console.warn("THREE.Box3: .clampPoint() target is now required"),b=new f),b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new f;return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),getBoundingSphere:function(){var a=new f;return function(b){return void 0===b&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),b=new o),this.getCenter(b.center),b.radius=.5*this.getSize(a).length(),b}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new f,new f,new f,new f,new f,new f,new f,new f];return function(b){return this.isEmpty()?this:(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b),this.setFromPoints(a),this)}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}),Object.assign(o.prototype,{set:function(a,b){return this.center.copy(a),this.radius=b,this},setFromPoints:function(){var a=new n;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=0,f=0,g=b.length;g>f;f++)e=Math.max(e,d.distanceToSquared(b[f]));return this.radius=Math.sqrt(e),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){
return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);return void 0===b&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),b=new f),b.copy(a),c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center)),b},getBoundingBox:function(a){return void 0===a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new n),a.set(this.center,this.center),a.expandByScalar(this.radius),a},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}}),Object.assign(p.prototype,{set:function(a,b){return this.normal.copy(a),this.constant=b,this},setComponents:function(a,b,c,d){return this.normal.set(a,b,c),this.constant=d,this},setFromNormalAndCoplanarPoint:function(a,b){return this.normal.copy(a),this.constant=-b.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new f,b=new f;return function(c,d,e){var f=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();return this.setFromNormalAndCoplanarPoint(f,c),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return void 0===b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new f),b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new f;return function(b,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new f);var d=b.delta(a),e=this.normal.dot(d);if(0===e)return 0===this.distanceToPoint(b.start)?c.copy(b.start):void 0;var g=-(b.start.dot(this.normal)+this.constant)/e;return 0>g||g>1?void 0:c.copy(d).multiplyScalar(g).add(b.start)}}(),intersectsLine:function(a){var b=this.distanceToPoint(a.start),c=this.distanceToPoint(a.end);return 0>b&&c>0||0>c&&b>0},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return void 0===a&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),a=new f),a.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new f,b=new g;return function(c,d){var e=d||b.getNormalMatrix(c),f=this.coplanarPoint(a).applyMatrix4(c),g=this.normal.applyMatrix3(e).normalize();return this.constant=-f.dot(g),this}}(),translate:function(a){return this.constant-=a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}}),Object.assign(q.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;return g[0].copy(a),g[1].copy(b),g[2].copy(c),g[3].copy(d),g[4].copy(e),g[5].copy(f),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=c[7],l=c[8],m=c[9],n=c[10],o=c[11],p=c[12],q=c[13],r=c[14],s=c[15];return b[0].setComponents(g-d,k-h,o-l,s-p).normalize(),b[1].setComponents(g+d,k+h,o+l,s+p).normalize(),b[2].setComponents(g+e,k+i,o+m,s+q).normalize(),b[3].setComponents(g-e,k-i,o-m,s-q).normalize(),b[4].setComponents(g-f,k-j,o-n,s-r).normalize(),b[5].setComponents(g+f,k+j,o+n,s+r).normalize(),this},intersectsObject:function(){var a=new o;return function(b){var c=b.geometry;return null===c.boundingSphere&&c.computeBoundingSphere(),a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new o;return function(b){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(b.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var b=this.planes,c=a.center,d=-a.radius,e=0;6>e;e++){var f=b[e].distanceToPoint(c);if(d>f)return!1}return!0},intersectsBox:function(){var a=new f;return function(b){for(var c=this.planes,d=0;6>d;d++){var e=c[d];if(a.x=e.normal.x>0?b.max.x:b.min.x,a.y=e.normal.y>0?b.max.y:b.min.y,a.z=e.normal.z>0?b.max.z:b.min.z,e.distanceToPoint(a)<0)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(b[c].distanceToPoint(a)<0)return!1;return!0}});var Vi="#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Wi="#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",Xi="#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif",Yi="#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif",Zi="#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",$i="vec3 transformed = vec3( position );",_i="vec3 objectNormal = vec3( normal );",aj="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	return vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n#else\n	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n	}\n	return 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE  = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS  = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n	return specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	vec3 F = F_Schlick( specularColor, dotNV );\n	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n	vec3 FssEss = F * brdf.x + brdf.y;\n	float Ess = brdf.x + brdf.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bj="#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",cj="#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		if ( clipped ) discard;\n	#endif\n#endif",dj="#if NUM_CLIPPING_PLANES > 0\n	#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n		varying vec3 vViewPosition;\n	#endif\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",ej="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n	varying vec3 vViewPosition;\n#endif",fj="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n	vViewPosition = - mvPosition.xyz;\n#endif",gj="#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",hj="#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",ij="#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",jj="#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",kj="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n	return dot( weights, color.rgb );\n}",lj="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n	vec3 absDirection = abs(direction);\n	int face = -1;\n	if( absDirection.x > absDirection.z ) {\n		if(absDirection.x > absDirection.y )\n			face = direction.x > 0.0 ? 0 : 3;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	else {\n		if(absDirection.z > absDirection.y )\n			face = direction.z > 0.0 ? 2 : 5;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	return face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n	float dxRoughness = dFdx(roughness);\n	float dyRoughness = dFdy(roughness);\n	vec3 dx = dFdx( vec * scale * dxRoughness );\n	vec3 dy = dFdy( vec * scale * dyRoughness );\n	float d = max( dot( dx, dx ), dot( dy, dy ) );\n	d = clamp(d, 1.0, cubeUV_rangeClamp);\n	float mipLevel = 0.5 * log2(d);\n	return vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n	float a = 16.0 * cubeUV_rcpTextureSize;\n	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n	float powScale = exp2_packed.x * exp2_packed.y;\n	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n	bool bRes = mipLevel == 0.0;\n	scale =  bRes && (scale < a) ? a : scale;\n	vec3 r;\n	vec2 offset;\n	int face = getFaceFromDirection(direction);\n	float rcpPowScale = 1.0 / powScale;\n	if( face == 0) {\n		r = vec3(direction.x, -direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 1) {\n		r = vec3(direction.y, direction.x, direction.z);\n		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 2) {\n		r = vec3(direction.z, direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 3) {\n		r = vec3(direction.x, direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else if( face == 4) {\n		r = vec3(direction.y, direction.x, -direction.z);\n		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else {\n		r = vec3(direction.z, -direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	r = normalize(r);\n	float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n	vec2 base = offset + vec2( texelOffset );\n	return base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n	float roughnessVal = roughness* cubeUV_maxLods3;\n	float r1 = floor(roughnessVal);\n	float r2 = r1 + 1.0;\n	float t = fract(roughnessVal);\n	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n	float s = mipInfo.y;\n	float level0 = mipInfo.x;\n	float level1 = level0 + 1.0;\n	level1 = level1 > 5.0 ? 5.0 : level1;\n	level0 += min( floor( s + 0.5 ), 5.0 );\n	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n	vec4 result = mix(color10, color20, t);\n	return vec4(result.rgb, 1.0);\n}\n#endif",mj="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif",nj="#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",oj="#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",pj="#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",qj="#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",rj="gl_FragColor = linearToOutputTexel( gl_FragColor );",sj="\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n	float maxComponent = max( max( value.r, value.g ), value.b );\n	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.r, max( value.g, value.b ) );\n	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n	M = ceil( M * 255.0 ) / 255.0;\n	return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.r, max( value.g, value.b ) );\n	float D = max( maxRange / maxRGB, 1.0 );\n	D = min( floor( D ) / 255.0, 1.0 );\n	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n	vec4 vResult;\n	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n	vResult.w = fract( Le );\n	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n	return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n	float Le = value.z * 255.0 + value.w;\n	vec3 Xp_Y_XYZp;\n	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n	return vec4( max( vRGB, 0.0 ), 1.0 );\n}",tj="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		reflectVec = normalize( reflectVec );\n		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		reflectVec = normalize( reflectVec );\n		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",uj="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n	uniform float reflectivity;\n	uniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n		varying vec3 vWorldPosition;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	uniform int maxMipLevel;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",vj="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",wj="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",xj="#ifdef USE_FOG\n	fogDepth = -mvPosition.z;\n#endif",yj="#ifdef USE_FOG\n	varying float fogDepth;\n#endif",zj="#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Aj="#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float fogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",Bj="#ifdef TOON\n	uniform sampler2D gradientMap;\n	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n		float dotNL = dot( normal, lightDirection );\n		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n		#ifdef USE_GRADIENTMAP\n			return texture2D( gradientMap, coord ).rgb;\n		#else\n			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n		#endif\n	}\n#endif",Cj="#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",Dj="#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",Ej="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n	vIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif",Fj="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n		float shadowCameraNear;\n		float shadowCameraFar;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		directLight.color = pointLight.color;\n		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n		directLight.visible = ( directLight.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( angleCos > spotLight.coneCos ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif",Gj="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif",Hj="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Ij="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifdef TOON\n		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	#else\n		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n		vec3 irradiance = dotNL * directLight.color;\n	#endif\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)",Jj="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",Kj="struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n	#ifndef STANDARD\n		float clearCoat;\n		float clearCoatRoughness;\n	#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.specularRoughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifndef STANDARD\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#ifndef STANDARD\n		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifndef ENVMAP_TYPE_CUBE_UV\n		reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifndef STANDARD\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		float dotNL = dotNV;\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	float clearCoatInv = 1.0 - clearCoatDHR;\n	#if defined( ENVMAP_TYPE_CUBE_UV )\n		vec3 singleScattering = vec3( 0.0 );\n		vec3 multiScattering = vec3( 0.0 );\n		vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n		BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n		vec3 diffuse = material.diffuseColor;\n		reflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n		reflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n		reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n	#else\n		reflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n	#endif\n	#ifndef STANDARD\n		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Lj="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearCoatRadiance = vec3( 0.0 );\n#endif",Mj="#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n		irradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	radiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n	#ifndef STANDARD\n		clearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n	#endif\n#endif",Nj="#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",Oj="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Pj="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n#endif",Qj="#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",Rj="#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n		gl_Position.z *= gl_Position.w;\n	#endif\n#endif",Sj="#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif",Tj="#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",Uj="#ifdef USE_MAP\n	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	vec4 mapTexel = texture2D( map, uv );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif",Vj="#ifdef USE_MAP\n	uniform mat3 uvTransform;\n	uniform sampler2D map;\n#endif",Wj="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",Xj="#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",Yj="#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",Zj="#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",$j="#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif",_j="#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#endif\n#endif",ak="#ifdef USE_NORMALMAP\n	#ifdef OBJECTSPACE_NORMALMAP\n		normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		#ifdef FLIP_SIDED\n			normal = - normal;\n		#endif\n		#ifdef DOUBLE_SIDED\n			normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#endif\n		normal = normalize( normalMatrix * normal );\n	#else\n		normal = perturbNormal2Arb( -vViewPosition, normal );\n	#endif\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",bk="#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	#ifdef OBJECTSPACE_NORMALMAP\n		uniform mat3 normalMatrix;\n	#else\n		vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n			vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n			vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n			vec2 st0 = dFdx( vUv.st );\n			vec2 st1 = dFdy( vUv.st );\n			float scale = sign( st1.t * st0.s - st0.t * st1.s );\n			vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n			vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n			vec3 N = normalize( surf_norm );\n			mat3 tsn = mat3( S, T, N );\n			vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n			mapN.xy *= normalScale;\n			mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n			return normalize( tsn * mapN );\n		}\n	#endif\n#endif",ck="vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",dk="#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",ek="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",fk="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",gk="#if defined( DITHERING )\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",hk="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",ik="#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",jk="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",kk="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif",lk="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif",mk="float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}",nk="#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",ok="#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureSize;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureSize ) );\n			float y = floor( j / float( boneTextureSize ) );\n			float dx = 1.0 / float( boneTextureSize );\n			float dy = 1.0 / float( boneTextureSize );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif",pk="#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",qk="#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",rk="float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",sk="#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tk="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",uk="#ifndef saturate\n	#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",vk="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",wk="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif",xk="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",yk="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",zk="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",Ak="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",Bk="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",Ck="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	gl_FragColor = mapTexelToLinear( texColor );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",Dk="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ek="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = mapTexelToLinear( texColor );\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",Fk="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",Gk="#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n	#endif\n}",Hk="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}",Ik="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",Jk="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",Kk="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV;\n	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	vec4 texColor = texture2D( tEquirect, sampleUV );\n	gl_FragColor = mapTexelToLinear( texColor );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",Lk="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",Mk="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",Nk="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",Ok="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",Pk="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",Qk="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n	varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n	#else\n		reflectedLight.indirectDiffuse += vIndirectFront;\n	#endif\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",Rk="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n	varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",Sk="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n		matcapColor = matcapTexelToLinear( matcapColor );\n	#else\n		vec4 matcapColor = vec4( 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",Tk="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#ifndef FLAT_SHADED\n		vNormal = normalize( transformedNormal );\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",Uk="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",Vk="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",Wk="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n	uniform float clearCoat;\n	uniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",Xk="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",Yk="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",Zk="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",$k="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",_k="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",al="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <fog_fragment>\n}",bl="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",cl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",dl="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",el={
alphamap_fragment:Vi,alphamap_pars_fragment:Wi,alphatest_fragment:Xi,aomap_fragment:Yi,aomap_pars_fragment:Zi,begin_vertex:$i,beginnormal_vertex:_i,bsdfs:aj,bumpmap_pars_fragment:bj,clipping_planes_fragment:cj,clipping_planes_pars_fragment:dj,clipping_planes_pars_vertex:ej,clipping_planes_vertex:fj,color_fragment:gj,color_pars_fragment:hj,color_pars_vertex:ij,color_vertex:jj,common:kj,cube_uv_reflection_fragment:lj,defaultnormal_vertex:mj,displacementmap_pars_vertex:nj,displacementmap_vertex:oj,emissivemap_fragment:pj,emissivemap_pars_fragment:qj,encodings_fragment:rj,encodings_pars_fragment:sj,envmap_fragment:tj,envmap_pars_fragment:uj,envmap_pars_vertex:vj,envmap_physical_pars_fragment:Gj,envmap_vertex:wj,fog_vertex:xj,fog_pars_vertex:yj,fog_fragment:zj,fog_pars_fragment:Aj,gradientmap_pars_fragment:Bj,lightmap_fragment:Cj,lightmap_pars_fragment:Dj,lights_lambert_vertex:Ej,lights_pars_begin:Fj,lights_phong_fragment:Hj,lights_phong_pars_fragment:Ij,lights_physical_fragment:Jj,lights_physical_pars_fragment:Kj,lights_fragment_begin:Lj,lights_fragment_maps:Mj,lights_fragment_end:Nj,logdepthbuf_fragment:Oj,logdepthbuf_pars_fragment:Pj,logdepthbuf_pars_vertex:Qj,logdepthbuf_vertex:Rj,map_fragment:Sj,map_pars_fragment:Tj,map_particle_fragment:Uj,map_particle_pars_fragment:Vj,metalnessmap_fragment:Wj,metalnessmap_pars_fragment:Xj,morphnormal_vertex:Yj,morphtarget_pars_vertex:Zj,morphtarget_vertex:$j,normal_fragment_begin:_j,normal_fragment_maps:ak,normalmap_pars_fragment:bk,packing:ck,premultiplied_alpha_fragment:dk,project_vertex:ek,dithering_fragment:fk,dithering_pars_fragment:gk,roughnessmap_fragment:hk,roughnessmap_pars_fragment:ik,shadowmap_pars_fragment:jk,shadowmap_pars_vertex:kk,shadowmap_vertex:lk,shadowmask_pars_fragment:mk,skinbase_vertex:nk,skinning_pars_vertex:ok,skinning_vertex:pk,skinnormal_vertex:qk,specularmap_fragment:rk,specularmap_pars_fragment:sk,tonemapping_fragment:tk,tonemapping_pars_fragment:uk,uv_pars_fragment:vk,uv_pars_vertex:wk,uv_vertex:xk,uv2_pars_fragment:yk,uv2_pars_vertex:zk,uv2_vertex:Ak,worldpos_vertex:Bk,background_frag:Ck,background_vert:Dk,cube_frag:Ek,cube_vert:Fk,depth_frag:Gk,depth_vert:Hk,distanceRGBA_frag:Ik,distanceRGBA_vert:Jk,equirect_frag:Kk,equirect_vert:Lk,linedashed_frag:Mk,linedashed_vert:Nk,meshbasic_frag:Ok,meshbasic_vert:Pk,meshlambert_frag:Qk,meshlambert_vert:Rk,meshmatcap_frag:Sk,meshmatcap_vert:Tk,meshphong_frag:Uk,meshphong_vert:Vk,meshphysical_frag:Wk,meshphysical_vert:Xk,normal_frag:Yk,normal_vert:Zk,points_frag:$k,points_vert:_k,shadow_frag:al,shadow_vert:bl,sprite_frag:cl,sprite_vert:dl},fl={clone:r,merge:s},gl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(t.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setScalar:function(a){return this.r=a,this.g=a,this.b=a,this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,b,c){return this.r=a,this.g=b,this.b=c,this},setHSL:function(){function a(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+6*(b-a)*(2/3-c):a}return function(b,c,d){if(b=Ri.euclideanModulo(b,1),c=Ri.clamp(c,0,1),d=Ri.clamp(d,0,1),0===c)this.r=this.g=this.b=d;else{var e=.5>=d?d*(1+c):d+c-d*c,f=2*d-e;this.r=a(f,e,b+1/3),this.g=a(f,e,b),this.b=a(f,e,b-1/3)}return this}}(),setStyle:function(a){function b(b){void 0!==b&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d,e=c[1],f=c[2];switch(e){case"rgb":case"rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(f))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,b(d[5]),this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(f))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,b(d[5]),this;break;case"hsl":case"hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(f)){var g=parseFloat(d[1])/360,h=parseInt(d[2],10)/100,i=parseInt(d[3],10)/100;return b(d[5]),this.setHSL(g,h,i)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){var j=c[1],k=j.length;if(3===k)return this.r=parseInt(j.charAt(0)+j.charAt(0),16)/255,this.g=parseInt(j.charAt(1)+j.charAt(1),16)/255,this.b=parseInt(j.charAt(2)+j.charAt(2),16)/255,this;if(6===k)return this.r=parseInt(j.charAt(0)+j.charAt(1),16)/255,this.g=parseInt(j.charAt(2)+j.charAt(3),16)/255,this.b=parseInt(j.charAt(4)+j.charAt(5),16)/255,this}if(a&&a.length>0){var j=gl[a];void 0!==j?this.setHex(j):console.warn("THREE.Color: Unknown color "+a)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,b){return void 0===b&&(b=2),this.r=Math.pow(a.r,b),this.g=Math.pow(a.g,b),this.b=Math.pow(a.b,b),this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=b>0?1/b:1;return this.r=Math.pow(a.r,c),this.g=Math.pow(a.g,c),this.b=Math.pow(a.b,c),this},convertGammaToLinear:function(a){return this.copyGammaToLinear(this,a),this},convertLinearToGamma:function(a){return this.copyLinearToGamma(this,a),this},copySRGBToLinear:function(){function a(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}return function(b){return this.r=a(b.r),this.g=a(b.g),this.b=a(b.b),this}}(),copyLinearToSRGB:function(){function a(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}return function(b){return this.r=a(b.r),this.g=a(b.g),this.b=a(b.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){void 0===a&&(console.warn("THREE.Color: .getHSL() target is now required"),a={h:0,s:0,l:0});var b,c,d=this.r,e=this.g,f=this.b,g=Math.max(d,e,f),h=Math.min(d,e,f),i=(h+g)/2;if(h===g)b=0,c=0;else{var j=g-h;switch(c=.5>=i?j/(g+h):j/(2-g-h),g){case d:b=(e-f)/j+(f>e?6:0);break;case e:b=(f-d)/j+2;break;case f:b=(d-e)/j+4}b/=6}return a.h=b,a.s=c,a.l=i,a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var a={};return function(b,c,d){return this.getHSL(a),a.h+=b,a.s+=c,a.l+=d,this.setHSL(a.h,a.s,a.l),this}}(),add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,b){return this.r=a.r+b.r,this.g=a.g+b.g,this.b=a.b+b.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},sub:function(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,b){return this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this},lerpHSL:function(){var a={h:0,s:0,l:0},b={h:0,s:0,l:0};return function(c,d){this.getHSL(a),c.getHSL(b);var e=Ri.lerp(a.h,b.h,d),f=Ri.lerp(a.s,b.s,d),g=Ri.lerp(a.l,b.l,d);return this.setHSL(e,f,g),this}}(),equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){return void 0===b&&(b=0),this.r=a[b],this.g=a[b+1],this.b=a[b+2],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.r,a[b+1]=this.g,a[b+2]=this.b,a},toJSON:function(){return this.getHex()}});var hl={common:{diffuse:{value:new t(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new g},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new c(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new t(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new t(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new g}},sprite:{diffuse:{value:new t(15658734)},opacity:{value:1},center:{value:new c(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new g}}},il={basic:{uniforms:s([hl.common,hl.specularmap,hl.envmap,hl.aomap,hl.lightmap,hl.fog]),vertexShader:el.meshbasic_vert,fragmentShader:el.meshbasic_frag},lambert:{uniforms:s([hl.common,hl.specularmap,hl.envmap,hl.aomap,hl.lightmap,hl.emissivemap,hl.fog,hl.lights,{emissive:{value:new t(0)}}]),vertexShader:el.meshlambert_vert,fragmentShader:el.meshlambert_frag},phong:{uniforms:s([hl.common,hl.specularmap,hl.envmap,hl.aomap,hl.lightmap,hl.emissivemap,hl.bumpmap,hl.normalmap,hl.displacementmap,hl.gradientmap,hl.fog,hl.lights,{emissive:{value:new t(0)},specular:{value:new t(1118481)},shininess:{value:30}}]),vertexShader:el.meshphong_vert,fragmentShader:el.meshphong_frag},standard:{uniforms:s([hl.common,hl.envmap,hl.aomap,hl.lightmap,hl.emissivemap,hl.bumpmap,hl.normalmap,hl.displacementmap,hl.roughnessmap,hl.metalnessmap,hl.fog,hl.lights,{emissive:{value:new t(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:el.meshphysical_vert,fragmentShader:el.meshphysical_frag},matcap:{uniforms:s([hl.common,hl.bumpmap,hl.normalmap,hl.displacementmap,hl.fog,{matcap:{value:null}}]),vertexShader:el.meshmatcap_vert,fragmentShader:el.meshmatcap_frag},points:{uniforms:s([hl.points,hl.fog]),vertexShader:el.points_vert,fragmentShader:el.points_frag},dashed:{uniforms:s([hl.common,hl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:el.linedashed_vert,fragmentShader:el.linedashed_frag},depth:{uniforms:s([hl.common,hl.displacementmap]),vertexShader:el.depth_vert,fragmentShader:el.depth_frag},normal:{uniforms:s([hl.common,hl.bumpmap,hl.normalmap,hl.displacementmap,{opacity:{value:1}}]),vertexShader:el.normal_vert,fragmentShader:el.normal_frag},sprite:{uniforms:s([hl.sprite,hl.fog]),vertexShader:el.sprite_vert,fragmentShader:el.sprite_frag},background:{uniforms:{uvTransform:{value:new g},t2D:{value:null}},vertexShader:el.background_vert,fragmentShader:el.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:el.cube_vert,fragmentShader:el.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:el.equirect_vert,fragmentShader:el.equirect_frag},distanceRGBA:{uniforms:s([hl.common,hl.displacementmap,{referencePosition:{value:new f},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:el.distanceRGBA_vert,fragmentShader:el.distanceRGBA_frag},shadow:{uniforms:s([hl.lights,hl.fog,{color:{value:new t(0)},opacity:{value:1}}]),vertexShader:el.shadow_vert,fragmentShader:el.shadow_frag}};il.physical={uniforms:s([il.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:el.meshphysical_vert,fragmentShader:el.meshphysical_frag},Object.assign(w.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;c>b;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();for(var b=0,c=a.vertexColors.length;c>b;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}}),x.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],x.DefaultOrder="XYZ",Object.defineProperties(x.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=a,this.onChangeCallback()}}}),Object.assign(x.prototype,{isEuler:!0,set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._order=d||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,b,c){var d=Ri.clamp,e=a.elements,f=e[0],g=e[4],h=e[8],i=e[1],j=e[5],k=e[9],l=e[2],m=e[6],n=e[10];return b=b||this._order,"XYZ"===b?(this._y=Math.asin(d(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-k,n),this._z=Math.atan2(-g,f)):(this._x=Math.atan2(m,j),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(k,-1,1)),Math.abs(k)<.99999?(this._y=Math.atan2(h,n),this._z=Math.atan2(i,j)):(this._y=Math.atan2(-l,f),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(m,-1,1)),Math.abs(m)<.99999?(this._y=Math.atan2(-l,n),this._z=Math.atan2(-g,j)):(this._y=0,this._z=Math.atan2(i,f))):"ZYX"===b?(this._y=Math.asin(-d(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(m,n),this._z=Math.atan2(i,f)):(this._x=0,this._z=Math.atan2(-g,j))):"YZX"===b?(this._z=Math.asin(d(i,-1,1)),Math.abs(i)<.99999?(this._x=Math.atan2(-k,j),this._y=Math.atan2(-l,f)):(this._x=0,this._y=Math.atan2(h,n))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),Math.abs(g)<.99999?(this._x=Math.atan2(m,j),this._y=Math.atan2(h,f)):(this._x=Math.atan2(-k,n),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b),this._order=b,c!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var a=new d;return function(b,c,d){return a.makeRotationFromQuaternion(b),this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new e;return function(b){return a.setFromEuler(this),this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this._x,a[b+1]=this._y,a[b+2]=this._z,a[b+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new f(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}}),Object.assign(y.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask|=1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&a.mask)}});var jl=0;z.DefaultUp=new f(0,1,0),z.DefaultMatrixAutoUpdate=!0,z.prototype=Object.assign(Object.create(b.prototype),{constructor:z,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){return this.quaternion.premultiply(a),this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new e;return function(b,c){return a.setFromAxisAngle(b,c),this.quaternion.multiply(a),this}}(),rotateOnWorldAxis:function(){var a=new e;return function(b,c){return a.setFromAxisAngle(b,c),this.quaternion.premultiply(a),this}}(),rotateX:function(){var a=new f(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new f(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new f(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new f;return function(b,c){return a.copy(b).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(c)),this}}(),translateX:function(){var a=new f(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new f(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new f(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new d;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new e,b=new d,c=new f,g=new f;return function(d,e,f){d.isVector3?c.copy(d):c.set(d,e,f);var h=this.parent;this.updateWorldMatrix(!0,!1),g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?b.lookAt(g,c,this.up):b.lookAt(c,g,this.up),this.quaternion.setFromRotationMatrix(b),h&&(b.extractRotation(h.matrixWorld),a.setFromRotationMatrix(b),this.quaternion.premultiply(a.inverse()))}}(),add:function(a){if(arguments.length>1){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(arguments.length>1){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}var c=this.children.indexOf(a);return-1!==c&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(c,1)),this},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;d>c;c++){var e=this.children[c],f=e.getObjectByProperty(a,b);if(void 0!==f)return f}return void 0},getWorldPosition:function(a){return void 0===a&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),a=new f),this.updateMatrixWorld(!0),a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new f,b=new f;return function(c){return void 0===c&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),c=new e),this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,c,b),c}}(),getWorldScale:function(){var a=new f,b=new e;return function(c){return void 0===c&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),c=new f),this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,b,c),c}}(),getWorldDirection:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),a=new f),this.updateMatrixWorld(!0);var b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()},raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;d>c;c++)b[c].traverse(a)},traverseVisible:function(a){if(this.visible!==!1){a(this);for(var b=this.children,c=0,d=b.length;d>c;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var b=this.children,c=0,d=b.length;d>c;c++)b[c].updateMatrixWorld(a)},updateWorldMatrix:function(a,b){var c=this.parent;if(a===!0&&null!==c&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),b===!0)for(var d=this.children,e=0,f=d.length;f>e;e++)d[e].updateWorldMatrix(!1,!0)},toJSON:function(a){function b(b,c){return void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a)),c.uuid}function c(a){var b=[];for(var c in a){var d=a[c];delete d.metadata,b.push(d)}return b}var d=void 0===a||"string"==typeof a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var f={};if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),this.castShadow===!0&&(f.castShadow=!0),this.receiveShadow===!0&&(f.receiveShadow=!0),this.visible===!1&&(f.visible=!1),this.frustumCulled===!1&&(f.frustumCulled=!1),0!==this.renderOrder&&(f.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(f.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ci&&(f.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes){var h=g.shapes;if(Array.isArray(h))for(var i=0,j=h.length;j>i;i++){var k=h[i];b(a.shapes,k)}else b(a.shapes,h)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],i=0,j=this.material.length;j>i;i++)l.push(b(a.materials,this.material[i]));f.material=l}else f.material=b(a.materials,this.material);if(this.children.length>0){f.children=[];for(var i=0;i<this.children.length;i++)f.children.push(this.children[i].toJSON(a).object)}if(d){var m=c(a.geometries),n=c(a.materials),o=c(a.textures),p=c(a.images),h=c(a.shapes);m.length>0&&(e.geometries=m),n.length>0&&(e.materials=n),o.length>0&&(e.textures=o),p.length>0&&(e.images=p),h.length>0&&(e.shapes=h)}return e.object=f,e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){if(void 0===b&&(b=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),b===!0)for(var c=0;c<a.children.length;c++){var d=a.children[c];this.add(d.clone())}return this}});var kl=0;A.prototype=Object.assign(Object.create(b.prototype),{constructor:A,isGeometry:!0,applyMatrix:function(a){for(var b=(new g).getNormalMatrix(a),c=0,d=this.vertices.length;d>c;c++){var e=this.vertices[c];e.applyMatrix4(a)}for(var c=0,d=this.faces.length;d>c;c++){var f=this.faces[c];f.normal.applyMatrix3(b).normalize();for(var h=0,i=f.vertexNormals.length;i>h;h++)f.vertexNormals[h].applyMatrix3(b).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a=new d;return function(b){return a.makeRotationX(b),this.applyMatrix(a),this}}(),rotateY:function(){var a=new d;return function(b){return a.makeRotationY(b),this.applyMatrix(a),this}}(),rotateZ:function(){var a=new d;return function(b){return a.makeRotationZ(b),this.applyMatrix(a),this}}(),translate:function(){var a=new d;return function(b,c,d){return a.makeTranslation(b,c,d),this.applyMatrix(a),this}}(),scale:function(){var a=new d;return function(b,c,d){return a.makeScale(b,c,d),this.applyMatrix(a),this}}(),lookAt:function(){var a=new z;return function(b){a.lookAt(b),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,e,g){var h=void 0===j?[]:[d.colors[a].clone(),d.colors[b].clone(),d.colors[e].clone()],m=void 0===i?[]:[(new f).fromArray(i,3*a),(new f).fromArray(i,3*b),(new f).fromArray(i,3*e)],n=new w(a,b,e,m,h,g);d.faces.push(n),void 0!==k&&d.faceVertexUvs[0].push([(new c).fromArray(k,2*a),(new c).fromArray(k,2*b),(new c).fromArray(k,2*e)]),void 0!==l&&d.faceVertexUvs[1].push([(new c).fromArray(l,2*a),(new c).fromArray(l,2*b),(new c).fromArray(l,2*e)])}var d=this,e=null!==a.index?a.index.array:void 0,g=a.attributes,h=g.position.array,i=void 0!==g.normal?g.normal.array:void 0,j=void 0!==g.color?g.color.array:void 0,k=void 0!==g.uv?g.uv.array:void 0,l=void 0!==g.uv2?g.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var m=0,n=0;m<h.length;m+=3,n+=2)d.vertices.push((new f).fromArray(h,m)),void 0!==j&&d.colors.push((new t).fromArray(j,m));var o=a.groups;if(o.length>0)for(var m=0;m<o.length;m++)for(var p=o[m],q=p.start,r=p.count,n=q,s=q+r;s>n;n+=3)void 0!==e?b(e[n],e[n+1],e[n+2],p.materialIndex):b(n,n+1,n+2,p.materialIndex);else if(void 0!==e)for(var m=0;m<e.length;m+=3)b(e[m],e[m+1],e[m+2]);else for(var m=0;m<h.length/3;m+=3)b(m,m+1,m+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){var a=new f;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(a).negate(),this.translate(a.x,a.y,a.z),this}}(),normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,c=0===b?1:1/b,e=new d;return e.set(c,0,0,-c*a.x,0,c,0,-c*a.y,0,0,c,-c*a.z,0,0,0,1),this.applyMatrix(e),this},computeFaceNormals:function(){for(var a=new f,b=new f,c=0,d=this.faces.length;d>c;c++){var e=this.faces[c],g=this.vertices[e.a],h=this.vertices[e.b],i=this.vertices[e.c];a.subVectors(i,h),b.subVectors(g,h),a.cross(b),a.normalize(),e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b,c,d,e,g,h;for(h=new Array(this.vertices.length),b=0,c=this.vertices.length;c>b;b++)h[b]=new f;if(a){var i,j,k,l=new f,m=new f;for(d=0,e=this.faces.length;e>d;d++)g=this.faces[d],i=this.vertices[g.a],j=this.vertices[g.b],k=this.vertices[g.c],l.subVectors(k,j),m.subVectors(i,j),l.cross(m),h[g.a].add(l),h[g.b].add(l),h[g.c].add(l)}else for(this.computeFaceNormals(),d=0,e=this.faces.length;e>d;d++)g=this.faces[d],h[g.a].add(g.normal),h[g.b].add(g.normal),h[g.c].add(g.normal);for(b=0,c=this.vertices.length;c>b;b++)h[b].normalize();for(d=0,e=this.faces.length;e>d;d++){g=this.faces[d];var n=g.vertexNormals;3===n.length?(n[0].copy(h[g.a]),n[1].copy(h[g.b]),n[2].copy(h[g.c])):(n[0]=h[g.a].clone(),n[1]=h[g.b].clone(),n[2]=h[g.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,b,c;for(this.computeFaceNormals(),a=0,b=this.faces.length;b>a;a++){c=this.faces[a];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b,c,d,e;for(c=0,d=this.faces.length;d>c;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;b>a;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var g=new A;for(g.faces=this.faces,a=0,b=this.morphTargets.length;b>a;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var h,i,j=this.morphNormals[a].faceNormals,k=this.morphNormals[a].vertexNormals;for(c=0,d=this.faces.length;d>c;c++)h=new f,i={a:new f,b:new f,c:new f},j.push(h),k.push(i)}var l=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices,g.computeFaceNormals(),g.computeVertexNormals();var h,i;for(c=0,d=this.faces.length;d>c;c++)e=this.faces[c],h=l.faceNormals[c],i=l.vertexNormals[c],h.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}for(c=0,d=this.faces.length;d>c;c++)e=this.faces[c],
e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!a||!a.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);var d,e=this.vertices.length,f=this.vertices,h=a.vertices,i=this.faces,j=a.faces,k=this.faceVertexUvs[0],l=a.faceVertexUvs[0],m=this.colors,n=a.colors;void 0===c&&(c=0),void 0!==b&&(d=(new g).getNormalMatrix(b));for(var o=0,p=h.length;p>o;o++){var q=h[o],r=q.clone();void 0!==b&&r.applyMatrix4(b),f.push(r)}for(var o=0,p=n.length;p>o;o++)m.push(n[o].clone());for(o=0,p=j.length;p>o;o++){var s,t,u,v=j[o],x=v.vertexNormals,y=v.vertexColors;s=new w(v.a+e,v.b+e,v.c+e),s.normal.copy(v.normal),void 0!==d&&s.normal.applyMatrix3(d).normalize();for(var z=0,A=x.length;A>z;z++)t=x[z].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),s.vertexNormals.push(t);s.color.copy(v.color);for(var z=0,A=y.length;A>z;z++)u=y[z],s.vertexColors.push(u.clone());s.materialIndex=v.materialIndex+c,i.push(s)}for(o=0,p=l.length;p>o;o++){var B=l[o],C=[];if(void 0!==B){for(var z=0,A=B.length;A>z;z++)C.push(B[z].clone());k.push(C)}}},mergeMesh:function(a){return a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),void this.merge(a.geometry,a.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var a,b,c,d,e,f,g,h,i={},j=[],k=[],l=4,m=Math.pow(10,l);for(c=0,d=this.vertices.length;d>c;c++)a=this.vertices[c],b=Math.round(a.x*m)+"_"+Math.round(a.y*m)+"_"+Math.round(a.z*m),void 0===i[b]?(i[b]=c,j.push(this.vertices[c]),k[c]=j.length-1):k[c]=k[i[b]];var n=[];for(c=0,d=this.faces.length;d>c;c++){e=this.faces[c],e.a=k[e.a],e.b=k[e.b],e.c=k[e.c],f=[e.a,e.b,e.c];for(var o=0;3>o;o++)if(f[o]===f[(o+1)%3]){n.push(c);break}}for(c=n.length-1;c>=0;c--){var p=n[c];for(this.faces.splice(p,1),g=0,h=this.faceVertexUvs.length;h>g;g++)this.faceVertexUvs[g].splice(p,1)}var q=this.vertices.length-j.length;return this.vertices=j,q},setFromPoints:function(a){this.vertices=[];for(var b=0,c=a.length;c>b;b++){var d=a[b];this.vertices.push(new f(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function(){function a(a,b){return a.materialIndex-b.materialIndex}for(var b=this.faces,c=b.length,d=0;c>d;d++)b[d]._id=d;b.sort(a);var e,f,g=this.faceVertexUvs[0],h=this.faceVertexUvs[1];g&&g.length===c&&(e=[]),h&&h.length===c&&(f=[]);for(var d=0;c>d;d++){var i=b[d]._id;e&&e.push(g[i]),f&&f.push(h[i])}e&&(this.faceVertexUvs[0]=e),f&&(this.faceVertexUvs[1]=f)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();return void 0!==m[b]?m[b]:(m[b]=l.length/3,l.push(a.x,a.y,a.z),m[b])}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();return void 0!==o[b]?o[b]:(o[b]=n.length,n.push(a.getHex()),o[b])}function d(a){var b=a.x.toString()+a.y.toString();return void 0!==q[b]?q[b]:(q[b]=p.length/2,p.push(a.x,a.y),q[b])}var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var f=this.parameters;for(var g in f)void 0!==f[g]&&(e[g]=f[g]);return e}for(var h=[],i=0;i<this.vertices.length;i++){var j=this.vertices[i];h.push(j.x,j.y,j.z)}for(var k=[],l=[],m={},n=[],o={},p=[],q={},i=0;i<this.faces.length;i++){var r=this.faces[i],s=!0,t=!1,u=void 0!==this.faceVertexUvs[0][i],v=r.normal.length()>0,w=r.vertexNormals.length>0,x=1!==r.color.r||1!==r.color.g||1!==r.color.b,y=r.vertexColors.length>0,z=0;if(z=a(z,0,0),z=a(z,1,s),z=a(z,2,t),z=a(z,3,u),z=a(z,4,v),z=a(z,5,w),z=a(z,6,x),z=a(z,7,y),k.push(z),k.push(r.a,r.b,r.c),k.push(r.materialIndex),u){var A=this.faceVertexUvs[0][i];k.push(d(A[0]),d(A[1]),d(A[2]))}if(v&&k.push(b(r.normal)),w){var B=r.vertexNormals;k.push(b(B[0]),b(B[1]),b(B[2]))}if(x&&k.push(c(r.color)),y){var C=r.vertexColors;k.push(c(C[0]),c(C[1]),c(C[2]))}}return e.data={},e.data.vertices=h,e.data.normals=l,n.length>0&&(e.data.colors=n),p.length>0&&(e.data.uvs=[p]),e.data.faces=k,e},clone:function(){return(new A).copy(this)},copy:function(a){var b,c,d,e,f,g;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=a.name;var h=a.vertices;for(b=0,c=h.length;c>b;b++)this.vertices.push(h[b].clone());var i=a.colors;for(b=0,c=i.length;c>b;b++)this.colors.push(i[b].clone());var j=a.faces;for(b=0,c=j.length;c>b;b++)this.faces.push(j[b].clone());for(b=0,c=a.faceVertexUvs.length;c>b;b++){var k=a.faceVertexUvs[b];for(void 0===this.faceVertexUvs[b]&&(this.faceVertexUvs[b]=[]),d=0,e=k.length;e>d;d++){var l=k[d],m=[];for(f=0,g=l.length;g>f;f++){var n=l[f];m.push(n.clone())}this.faceVertexUvs[b].push(m)}}var o=a.morphTargets;for(b=0,c=o.length;c>b;b++){var p={};if(p.name=o[b].name,void 0!==o[b].vertices)for(p.vertices=[],d=0,e=o[b].vertices.length;e>d;d++)p.vertices.push(o[b].vertices[d].clone());if(void 0!==o[b].normals)for(p.normals=[],d=0,e=o[b].normals.length;e>d;d++)p.normals.push(o[b].normals[d].clone());this.morphTargets.push(p)}var q=a.morphNormals;for(b=0,c=q.length;c>b;b++){var r={};if(void 0!==q[b].vertexNormals)for(r.vertexNormals=[],d=0,e=q[b].vertexNormals.length;e>d;d++){var s=q[b].vertexNormals[d],t={};t.a=s.a.clone(),t.b=s.b.clone(),t.c=s.c.clone(),r.vertexNormals.push(t)}if(void 0!==q[b].faceNormals)for(r.faceNormals=[],d=0,e=q[b].faceNormals.length;e>d;d++)r.faceNormals.push(q[b].faceNormals[d].clone());this.morphNormals.push(r)}var u=a.skinWeights;for(b=0,c=u.length;c>b;b++)this.skinWeights.push(u[b].clone());var v=a.skinIndices;for(b=0,c=v.length;c>b;b++)this.skinIndices.push(v[b].clone());var w=a.lineDistances;for(b=0,c=w.length;c>b;b++)this.lineDistances.push(w[b]);var x=a.boundingBox;null!==x&&(this.boundingBox=x.clone());var y=a.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.elementsNeedUpdate=a.elementsNeedUpdate,this.verticesNeedUpdate=a.verticesNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(B.prototype,"needsUpdate",{set:function(a){a===!0&&this.version++}}),Object.assign(B.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==a?a.length/this.itemSize:0,this.array=a,this},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.dynamic=a.dynamic,this},copyAt:function(a,b,c){a*=this.itemSize,c*=b.itemSize;for(var d=0,e=this.itemSize;e>d;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new t),b[c++]=f.r,b[c++]=f.g,b[c++]=f.b}return this},copyVector2sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;f>e;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",e),g=new c),b[d++]=g.x,b[d++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),g=new f),b[c++]=g.x,b[c++]=g.y,b[c++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;e>d;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new i),b[c++]=f.x,b[c++]=f.y,b[c++]=f.z,b[c++]=f.w}return this},set:function(a,b){return void 0===b&&(b=0),this.array.set(a,b),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){return this.array[a*this.itemSize]=b,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){return this.array[a*this.itemSize+1]=b,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){return this.array[a*this.itemSize+2]=b,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){return this.array[a*this.itemSize+3]=b,this},setXY:function(a,b,c){return a*=this.itemSize,this.array[a+0]=b,this.array[a+1]=c,this},setXYZ:function(a,b,c,d){return a*=this.itemSize,this.array[a+0]=b,this.array[a+1]=c,this.array[a+2]=d,this},setXYZW:function(a,b,c,d,e){return a*=this.itemSize,this.array[a+0]=b,this.array[a+1]=c,this.array[a+2]=d,this.array[a+3]=e,this},onUpload:function(a){return this.onUploadCallback=a,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),C.prototype=Object.create(B.prototype),C.prototype.constructor=C,D.prototype=Object.create(B.prototype),D.prototype.constructor=D,E.prototype=Object.create(B.prototype),E.prototype.constructor=E,F.prototype=Object.create(B.prototype),F.prototype.constructor=F,G.prototype=Object.create(B.prototype),G.prototype.constructor=G,H.prototype=Object.create(B.prototype),H.prototype.constructor=H,I.prototype=Object.create(B.prototype),I.prototype.constructor=I,J.prototype=Object.create(B.prototype),J.prototype.constructor=J,K.prototype=Object.create(B.prototype),K.prototype.constructor=K,Object.assign(L.prototype,{computeGroups:function(a){for(var b,c=[],d=void 0,e=a.faces,f=0;f<e.length;f++){var g=e[f];g.materialIndex!==d&&(d=g.materialIndex,void 0!==b&&(b.count=3*f-b.start,c.push(b)),b={start:3*f,materialIndex:d})}void 0!==b&&(b.count=3*f-b.start,c.push(b)),this.groups=c},fromGeometry:function(a){var b,d=a.faces,e=a.vertices,f=a.faceVertexUvs,g=f[0]&&f[0].length>0,h=f[1]&&f[1].length>0,i=a.morphTargets,j=i.length;if(j>0){b=[];for(var k=0;j>k;k++)b[k]={name:i[k].name,data:[]};this.morphTargets.position=b}var l,m=a.morphNormals,n=m.length;if(n>0){l=[];for(var k=0;n>k;k++)l[k]={name:m[k].name,data:[]};this.morphTargets.normal=l}var o=a.skinIndices,p=a.skinWeights,q=o.length===e.length,r=p.length===e.length;e.length>0&&0===d.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var k=0;k<d.length;k++){var s=d[k];this.vertices.push(e[s.a],e[s.b],e[s.c]);var t=s.vertexNormals;if(3===t.length)this.normals.push(t[0],t[1],t[2]);else{var u=s.normal;this.normals.push(u,u,u)}var v=s.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{var w=s.color;this.colors.push(w,w,w)}if(g===!0){var x=f[0][k];void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",k),this.uvs.push(new c,new c,new c))}if(h===!0){var x=f[1][k];void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",k),this.uvs2.push(new c,new c,new c))}for(var y=0;j>y;y++){var z=i[y].vertices;b[y].data.push(z[s.a],z[s.b],z[s.c])}for(var y=0;n>y;y++){var A=m[y].vertexNormals[k];l[y].data.push(A.a,A.b,A.c)}q&&this.skinIndices.push(o[s.a],o[s.b],o[s.c]),r&&this.skinWeights.push(p[s.a],p[s.b],p[s.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this}});var ll=1;N.prototype=Object.assign(Object.create(b.prototype),{constructor:N,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new(M(a)>65535?I:G)(a,1):this.index=a},addAttribute:function(a,b){return b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute?"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b),this):(this.attributes[a]=b,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new B(arguments[1],arguments[2])))},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){return delete this.attributes[a],this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a,this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);var c=this.attributes.normal;if(void 0!==c){var d=(new g).getNormalMatrix(a);d.applyToBufferAttribute(c),c.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a=new d;return function(b){return a.makeRotationX(b),this.applyMatrix(a),this}}(),rotateY:function(){var a=new d;return function(b){return a.makeRotationY(b),this.applyMatrix(a),this}}(),rotateZ:function(){var a=new d;return function(b){return a.makeRotationZ(b),this.applyMatrix(a),this}}(),translate:function(){var a=new d;return function(b,c,d){return a.makeTranslation(b,c,d),this.applyMatrix(a),this}}(),scale:function(){var a=new d;return function(b,c,d){return a.makeScale(b,c,d),this.applyMatrix(a),this}}(),lookAt:function(){var a=new z;return function(b){a.lookAt(b),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){var a=new f;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(a).negate(),this.translate(a.x,a.y,a.z),this}}(),setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){var c=new J(3*b.vertices.length,3),d=new J(3*b.colors.length,3);if(this.addAttribute("position",c.copyVector3sArray(b.vertices)),this.addAttribute("color",d.copyColorsArray(b.colors)),b.lineDistances&&b.lineDistances.length===b.vertices.length){var e=new J(b.lineDistances.length,1);this.addAttribute("lineDistance",e.copyArray(b.lineDistances))}null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone()),null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];b.push(e.x,e.y,e.z||0)}return this.addAttribute("position",new J(b,3)),this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;if(b.elementsNeedUpdate===!0&&(c=void 0,b.elementsNeedUpdate=!1),void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate,c.normalsNeedUpdate=b.normalsNeedUpdate,c.colorsNeedUpdate=b.colorsNeedUpdate,c.uvsNeedUpdate=b.uvsNeedUpdate,c.groupsNeedUpdate=b.groupsNeedUpdate,b.verticesNeedUpdate=!1,b.normalsNeedUpdate=!1,b.colorsNeedUpdate=!1,b.uvsNeedUpdate=!1,b.groupsNeedUpdate=!1,b=c}var d;return b.verticesNeedUpdate===!0&&(d=this.attributes.position,void 0!==d&&(d.copyVector3sArray(b.vertices),d.needsUpdate=!0),b.verticesNeedUpdate=!1),b.normalsNeedUpdate===!0&&(d=this.attributes.normal,void 0!==d&&(d.copyVector3sArray(b.normals),d.needsUpdate=!0),b.normalsNeedUpdate=!1),b.colorsNeedUpdate===!0&&(d=this.attributes.color,void 0!==d&&(d.copyColorsArray(b.colors),d.needsUpdate=!0),b.colorsNeedUpdate=!1),b.uvsNeedUpdate&&(d=this.attributes.uv,void 0!==d&&(d.copyVector2sArray(b.uvs),d.needsUpdate=!0),b.uvsNeedUpdate=!1),b.lineDistancesNeedUpdate&&(d=this.attributes.lineDistance,void 0!==d&&(d.copyArray(b.lineDistances),d.needsUpdate=!0),b.lineDistancesNeedUpdate=!1),b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new L).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);if(this.addAttribute("position",new B(b,3).copyVector3sArray(a.vertices)),a.normals.length>0){var c=new Float32Array(3*a.normals.length);this.addAttribute("normal",new B(c,3).copyVector3sArray(a.normals))}if(a.colors.length>0){var d=new Float32Array(3*a.colors.length);this.addAttribute("color",new B(d,3).copyColorsArray(a.colors))}if(a.uvs.length>0){var e=new Float32Array(2*a.uvs.length);this.addAttribute("uv",new B(e,2).copyVector2sArray(a.uvs))}if(a.uvs2.length>0){var f=new Float32Array(2*a.uvs2.length);this.addAttribute("uv2",new B(f,2).copyVector2sArray(a.uvs2))}this.groups=a.groups;for(var g in a.morphTargets){for(var h=[],i=a.morphTargets[g],j=0,k=i.length;k>j;j++){var l=i[j],m=new J(3*l.data.length,3);m.name=l.name,h.push(m.copyVector3sArray(l.data))}this.morphAttributes[g]=h}if(a.skinIndices.length>0){var n=new J(4*a.skinIndices.length,4);this.addAttribute("skinIndex",n.copyVector4sArray(a.skinIndices))}if(a.skinWeights.length>0){var o=new J(4*a.skinWeights.length,4);this.addAttribute("skinWeight",o.copyVector4sArray(a.skinWeights))}return null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new n,b=new f;return function(){null===this.boundingSphere&&(this.boundingSphere=new o);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c),a.getCenter(d);for(var e=0,f=0,g=c.count;g>f;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes;if(b.position){var c=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new B(new Float32Array(c.length),3));else for(var d=b.normal.array,e=0,g=d.length;g>e;e++)d[e]=0;var h,i,j,k=b.normal.array,l=new f,m=new f,n=new f,o=new f,p=new f;if(a)for(var q=a.array,e=0,g=a.count;g>e;e+=3)h=3*q[e+0],i=3*q[e+1],j=3*q[e+2],l.fromArray(c,h),m.fromArray(c,i),n.fromArray(c,j),o.subVectors(n,m),p.subVectors(l,m),o.cross(p),k[h]+=o.x,k[h+1]+=o.y,k[h+2]+=o.z,k[i]+=o.x,k[i+1]+=o.y,k[i+2]+=o.z,k[j]+=o.x,k[j+1]+=o.y,k[j+2]+=o.z;else for(var e=0,g=c.length;g>e;e+=9)l.fromArray(c,e),m.fromArray(c,e+3),n.fromArray(c,e+6),o.subVectors(n,m),p.subVectors(l,m),o.cross(p),k[e]=o.x,k[e+1]=o.y,k[e+2]=o.z,k[e+3]=o.x,k[e+4]=o.y,k[e+5]=o.z,k[e+6]=o.x,k[e+7]=o.y,k[e+8]=o.z;this.normalizeNormals(),b.normal.needsUpdate=!0}},merge:function(a,b){if(!a||!a.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);void 0===b&&(b=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var c=this.attributes;for(var d in c)if(void 0!==a.attributes[d])for(var e=c[d],f=e.array,g=a.attributes[d],h=g.array,i=g.itemSize,j=0,k=i*b;j<h.length;j++,k++)f[k]=h[j];return this},normalizeNormals:function(){var a=new f;return function(){for(var b=this.attributes.normal,c=0,d=b.count;d>c;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}(),toNonIndexed:function(){function a(a,b){for(var c=a.array,d=a.itemSize,e=new c.constructor(b.length*d),f=0,g=0,h=0,i=b.length;i>h;h++){f=b[h]*d;for(var j=0;d>j;j++)e[g++]=c[f++]}return new B(e,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var b=new N,c=this.index.array,d=this.attributes;for(var e in d){var f=d[e],g=a(f,c);b.addAttribute(e,g)}var h=this.morphAttributes;for(e in h){for(var i=[],j=h[e],k=0,l=j.length;l>k;k++){var f=j[k],g=a(f,c);i.push(g)}b.morphAttributes[e]=i}for(var m=this.groups,k=0,n=m.length;n>k;k++){var o=m[k];b.addGroup(o.start,o.count,o.materialIndex)}return b},toJSON:function(){var a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;if(null!==d){var e=Array.prototype.slice.call(d.array);a.data.index={type:d.array.constructor.name,array:e}}var f=this.attributes;for(var c in f){var g=f[c],e=Array.prototype.slice.call(g.array);a.data.attributes[c]={itemSize:g.itemSize,type:g.array.constructor.name,array:e,normalized:g.normalized}}var h=this.groups;h.length>0&&(a.data.groups=JSON.parse(JSON.stringify(h)));var i=this.boundingSphere;return null!==i&&(a.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),a},clone:function(){return(new N).copy(this)},copy:function(a){var b,c,d;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=a.name;var e=a.index;null!==e&&this.setIndex(e.clone());var f=a.attributes;for(b in f){var g=f[b];this.addAttribute(b,g.clone())}var h=a.morphAttributes;for(b in h){var i=[],j=h[b];for(c=0,d=j.length;d>c;c++)i.push(j[c].clone());this.morphAttributes[b]=i}var k=a.groups;for(c=0,d=k.length;d>c;c++){var l=k[c];this.addGroup(l.start,l.count,l.materialIndex)}var m=a.boundingBox;null!==m&&(this.boundingBox=m.clone());var n=a.boundingSphere;return null!==n&&(this.boundingSphere=n.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),O.prototype=Object.create(A.prototype),O.prototype.constructor=O,P.prototype=Object.create(N.prototype),P.prototype.constructor=P,Q.prototype=Object.create(A.prototype),Q.prototype.constructor=Q,R.prototype=Object.create(N.prototype),R.prototype.constructor=R;var ml=0;S.prototype=Object.assign(Object.create(b.prototype),{constructor:S,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0!==c)if("shading"!==b){var d=this[b];void 0!==d?d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=c:console.warn("THREE."+this.type+": '"+b+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=c===wg?!0:!1;else console.warn("THREE.Material: '"+b+"' parameter is undefined.")}},toJSON:function(a){function b(a){var b=[];for(var c in a){var d=a[c];delete d.metadata,b.push(d)}return b}var c=void 0===a||"string"==typeof a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(d.uuid=this.uuid,d.type=this.type,""!==this.name&&(d.name=this.name),this.color&&this.color.isColor&&(d.color=this.color.getHex()),void 0!==this.roughness&&(d.roughness=this.roughness),void 0!==this.metalness&&(d.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex()),void 0!==this.shininess&&(d.shininess=this.shininess),void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid),this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,d.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalMapType=this.normalMapType,d.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity,void 0!==this.combine&&(d.combine=this.combine),void 0!==this.envMapIntensity&&(d.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(d.size=this.size),void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation),this.blending!==Cg&&(d.blending=this.blending),this.flatShading===!0&&(d.flatShading=this.flatShading),this.side!==tg&&(d.side=this.side),this.vertexColors!==yg&&(d.vertexColors=this.vertexColors),this.opacity<1&&(d.opacity=this.opacity),this.transparent===!0&&(d.transparent=this.transparent),d.depthFunc=this.depthFunc,d.depthTest=this.depthTest,d.depthWrite=this.depthWrite,0!==this.rotation&&(d.rotation=this.rotation),this.polygonOffset===!0&&(d.polygonOffset=!0),0!==this.polygonOffsetFactor&&(d.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(d.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(d.linewidth=this.linewidth),void 0!==this.dashSize&&(d.dashSize=this.dashSize),void 0!==this.gapSize&&(d.gapSize=this.gapSize),void 0!==this.scale&&(d.scale=this.scale),this.dithering===!0&&(d.dithering=!0),this.alphaTest>0&&(d.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(d.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(d.wireframe=this.wireframe),this.wireframeLinewidth>1&&(d.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(d.morphTargets=!0),this.skinning===!0&&(d.skinning=!0),this.visible===!1&&(d.visible=!1),"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData),c){var e=b(a.textures),f=b(a.images);e.length>0&&(d.textures=e),f.length>0&&(d.images=f)}return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.flatShading=a.flatShading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.userData=JSON.parse(JSON.stringify(a.userData)),this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var b=a.clippingPlanes,c=null;if(null!==b){var d=b.length;c=new Array(d);for(var e=0;e!==d;++e)c[e]=b[e].clone()}return this.clippingPlanes=c,this.shadowSide=a.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),T.prototype=Object.create(S.prototype),T.prototype.constructor=T,T.prototype.isShaderMaterial=!0,T.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=r(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=a.extensions,this},T.prototype.toJSON=function(a){var b=S.prototype.toJSON.call(this,a);b.uniforms={};for(var c in this.uniforms){var d=this.uniforms[c],e=d.value;e&&e.isTexture?b.uniforms[c]={type:"t",value:e.toJSON(a).uuid}:e&&e.isColor?b.uniforms[c]={type:"c",value:e.getHex()}:e&&e.isVector2?b.uniforms[c]={type:"v2",value:e.toArray()}:e&&e.isVector3?b.uniforms[c]={type:"v3",value:e.toArray()}:e&&e.isVector4?b.uniforms[c]={type:"v4",value:e.toArray()}:e&&e.isMatrix3?b.uniforms[c]={type:"m3",value:e.toArray()}:e&&e.isMatrix4?b.uniforms[c]={type:"m4",value:e.toArray()}:b.uniforms[c]={value:e}}Object.keys(this.defines).length>0&&(b.defines=this.defines),b.vertexShader=this.vertexShader,b.fragmentShader=this.fragmentShader;var f={};for(var g in this.extensions)this.extensions[g]===!0&&(f[g]=!0);return Object.keys(f).length>0&&(b.extensions=f),b},Object.assign(U.prototype,{set:function(a,b){return this.origin.copy(a),this.direction.copy(b),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,b){return void 0===b&&(console.warn("THREE.Ray: .at() target is now required"),b=new f),b.copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){return this.direction.copy(a).sub(this.origin).normalize(),this},recast:function(){var a=new f;return function(b){return this.origin.copy(this.at(b,a)),this}}(),closestPointToPoint:function(a,b){void 0===b&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),b=new f),b.subVectors(a,this.origin);var c=b.dot(this.direction);return 0>c?b.copy(this.origin):b.copy(this.direction).multiplyScalar(c).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new f;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);return 0>c?this.origin.distanceToSquared(b):(a.copy(this.direction).multiplyScalar(c).add(this.origin),a.distanceToSquared(b))}}(),distanceSqToSegment:function(){var a=new f,b=new f,c=new f;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5),b.copy(e).sub(d).normalize(),c.copy(this.origin).sub(a);var h,i,j,k,l=.5*d.distanceTo(e),m=-this.direction.dot(b),n=c.dot(this.direction),o=-c.dot(b),p=c.lengthSq(),q=Math.abs(1-m*m);if(q>0)if(h=m*o-n,i=m*n-o,k=l*q,h>=0)if(i>=-k)if(k>=i){var r=1/q;h*=r,i*=r,j=h*(h+m*i+2*n)+i*(m*h+i+2*o)+p}else i=l,h=Math.max(0,-(m*i+n)),j=-h*h+i*(i+2*o)+p;else i=-l,h=Math.max(0,-(m*i+n)),j=-h*h+i*(i+2*o)+p;else-k>=i?(h=Math.max(0,-(-m*l+n)),i=h>0?-l:Math.min(Math.max(-l,-o),l),j=-h*h+i*(i+2*o)+p):k>=i?(h=0,i=Math.min(Math.max(-l,-o),l),j=i*(i+2*o)+p):(h=Math.max(0,-(m*l+n)),i=h>0?l:Math.min(Math.max(-l,-o),l),j=-h*h+i*(i+2*o)+p);else i=m>0?-l:l,
h=Math.max(0,-(m*i+n)),j=-h*h+i*(i+2*o)+p;return f&&f.copy(this.direction).multiplyScalar(h).add(this.origin),g&&g.copy(b).multiplyScalar(i).add(a),j}}(),intersectSphere:function(){var a=new f;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;var g=Math.sqrt(f-e),h=d-g,i=d+g;return 0>h&&0>i?null:0>h?this.at(i,c):this.at(h,c)}}(),intersectsSphere:function(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;var c=-(this.origin.dot(a.normal)+a.constant)/b;return c>=0?c:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);if(0===b)return!0;var c=a.normal.dot(this.direction);return 0>c*b?!0:!1},intersectBox:function(a,b){var c,d,e,f,g,h,i=1/this.direction.x,j=1/this.direction.y,k=1/this.direction.z,l=this.origin;return i>=0?(c=(a.min.x-l.x)*i,d=(a.max.x-l.x)*i):(c=(a.max.x-l.x)*i,d=(a.min.x-l.x)*i),j>=0?(e=(a.min.y-l.y)*j,f=(a.max.y-l.y)*j):(e=(a.max.y-l.y)*j,f=(a.min.y-l.y)*j),c>f||e>d?null:((e>c||c!==c)&&(c=e),(d>f||d!==d)&&(d=f),k>=0?(g=(a.min.z-l.z)*k,h=(a.max.z-l.z)*k):(g=(a.max.z-l.z)*k,h=(a.min.z-l.z)*k),c>h||g>d?null:((g>c||c!==c)&&(c=g),(d>h||d!==d)&&(d=h),0>d?null:this.at(c>=0?c:d,b)))},intersectsBox:function(){var a=new f;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new f,b=new f,c=new f,d=new f;return function(e,f,g,h,i){b.subVectors(f,e),c.subVectors(g,e),d.crossVectors(b,c);var j,k=this.direction.dot(d);if(k>0){if(h)return null;j=1}else{if(!(0>k))return null;j=-1,k=-k}a.subVectors(this.origin,e);var l=j*this.direction.dot(c.crossVectors(a,c));if(0>l)return null;var m=j*this.direction.dot(b.cross(a));if(0>m)return null;if(l+m>k)return null;var n=-j*a.dot(d);return 0>n?null:this.at(n/k,i)}}(),applyMatrix4:function(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}}),Object.assign(V,{getNormal:function(){var a=new f;return function(b,c,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new f),e.subVectors(d,c),a.subVectors(b,c),e.cross(a);var g=e.lengthSq();return g>0?e.multiplyScalar(1/Math.sqrt(g)):e.set(0,0,0)}}(),getBarycoord:function(){var a=new f,b=new f,c=new f;return function(d,e,g,h,i){a.subVectors(h,e),b.subVectors(g,e),c.subVectors(d,e);var j=a.dot(a),k=a.dot(b),l=a.dot(c),m=b.dot(b),n=b.dot(c),o=j*m-k*k;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new f),0===o)return i.set(-2,-1,-1);var p=1/o,q=(m*l-k*n)*p,r=(j*n-k*l)*p;return i.set(1-q-r,r,q)}}(),containsPoint:function(){var a=new f;return function(b,c,d,e){return V.getBarycoord(b,c,d,e,a),a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),getUV:function(){var a=new f;return function(b,c,d,e,f,g,h,i){return this.getBarycoord(b,c,d,e,a),i.set(0,0),i.addScaledVector(f,a.x),i.addScaledVector(g,a.y),i.addScaledVector(h,a.z),i}}()}),Object.assign(V.prototype,{set:function(a,b,c){return this.a.copy(a),this.b.copy(b),this.c.copy(c),this},setFromPointsAndIndices:function(a,b,c,d){return this.a.copy(a[b]),this.b.copy(a[c]),this.c.copy(a[d]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},getArea:function(){var a=new f,b=new f;return function(){return a.subVectors(this.c,this.b),b.subVectors(this.a,this.b),.5*a.cross(b).length()}}(),getMidpoint:function(a){return void 0===a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new f),a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(a){return V.getNormal(this.a,this.b,this.c,a)},getPlane:function(a){return void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new f),a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,b){return V.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function(a){return V.containsPoint(a,this.a,this.b,this.c)},getUV:function(a,b,c,d,e){return V.getUV(a,this.a,this.b,this.c,b,c,d,e)},intersectsBox:function(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new f,b=new f,c=new f,d=new f,e=new f,g=new f;return function(h,i){void 0===i&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),i=new f);var j,k,l=this.a,m=this.b,n=this.c;a.subVectors(m,l),b.subVectors(n,l),d.subVectors(h,l);var o=a.dot(d),p=b.dot(d);if(0>=o&&0>=p)return i.copy(l);e.subVectors(h,m);var q=a.dot(e),r=b.dot(e);if(q>=0&&q>=r)return i.copy(m);var s=o*r-q*p;if(0>=s&&o>=0&&0>=q)return j=o/(o-q),i.copy(l).addScaledVector(a,j);g.subVectors(h,n);var t=a.dot(g),u=b.dot(g);if(u>=0&&u>=t)return i.copy(n);var v=t*p-o*u;if(0>=v&&p>=0&&0>=u)return k=p/(p-u),i.copy(l).addScaledVector(b,k);var w=q*u-t*r;if(0>=w&&r-q>=0&&t-u>=0)return c.subVectors(n,m),k=(r-q)/(r-q+(t-u)),i.copy(m).addScaledVector(c,k);var x=1/(w+v+s);return j=v*x,k=s*x,i.copy(l).addScaledVector(a,j).addScaledVector(b,k)}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}),W.prototype=Object.create(S.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this},X.prototype=Object.assign(Object.create(z.prototype),{constructor:X,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){return z.prototype.copy.call(this,a),this.drawMode=a.drawMode,void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this},updateMorphTargets:function(){var a,b,c,d=this.geometry;if(d.isBufferGeometry){var e=d.morphAttributes,f=Object.keys(e);if(f.length>0){var g=e[f[0]];if(void 0!==g)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=g.length;b>a;a++)c=g[a].name||String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}else{var h=d.morphTargets;void 0!==h&&h.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){function a(a,b,c,d,e,f,g,h){var i;if(i=b.side===ug?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,b.side!==vg,h),null===i)return null;t.copy(h),t.applyMatrix4(a.matrixWorld);var j=c.ray.origin.distanceTo(t);return j<c.near||j>c.far?null:{distance:j,point:t.clone(),object:a}}function b(b,d,e,f,g,h,l,m,n){i.fromBufferAttribute(g,l),j.fromBufferAttribute(g,m),k.fromBufferAttribute(g,n);var o=a(b,d,e,f,i,j,k,s);if(o){h&&(p.fromBufferAttribute(h,l),q.fromBufferAttribute(h,m),r.fromBufferAttribute(h,n),o.uv=V.getUV(s,i,j,k,p,q,r,new c));var t=new w(l,m,n);V.getNormal(i,j,k,t.normal),o.face=t}return o}var e=new d,g=new U,h=new o,i=new f,j=new f,k=new f,l=new f,m=new f,n=new f,p=new c,q=new c,r=new c,s=new f,t=new f;return function(d,f){var o=this.geometry,t=this.material,u=this.matrixWorld;if(void 0!==t&&(null===o.boundingSphere&&o.computeBoundingSphere(),h.copy(o.boundingSphere),h.applyMatrix4(u),d.ray.intersectsSphere(h)!==!1&&(e.getInverse(u),g.copy(d.ray).applyMatrix4(e),null===o.boundingBox||g.intersectsBox(o.boundingBox)!==!1))){var v;if(o.isBufferGeometry){var w,x,y,z,A,B,C,D,E,F,G,H=o.index,I=o.attributes.position,J=o.attributes.uv,K=o.groups,L=o.drawRange;if(null!==H)if(Array.isArray(t))for(z=0,B=K.length;B>z;z++)for(D=K[z],E=t[D.materialIndex],F=Math.max(D.start,L.start),G=Math.min(D.start+D.count,L.start+L.count),A=F,C=G;C>A;A+=3)w=H.getX(A),x=H.getX(A+1),y=H.getX(A+2),v=b(this,E,d,g,I,J,w,x,y),v&&(v.faceIndex=Math.floor(A/3),v.face.materialIndex=D.materialIndex,f.push(v));else for(F=Math.max(0,L.start),G=Math.min(H.count,L.start+L.count),z=F,B=G;B>z;z+=3)w=H.getX(z),x=H.getX(z+1),y=H.getX(z+2),v=b(this,t,d,g,I,J,w,x,y),v&&(v.faceIndex=Math.floor(z/3),f.push(v));else if(void 0!==I)if(Array.isArray(t))for(z=0,B=K.length;B>z;z++)for(D=K[z],E=t[D.materialIndex],F=Math.max(D.start,L.start),G=Math.min(D.start+D.count,L.start+L.count),A=F,C=G;C>A;A+=3)w=A,x=A+1,y=A+2,v=b(this,E,d,g,I,J,w,x,y),v&&(v.faceIndex=Math.floor(A/3),v.face.materialIndex=D.materialIndex,f.push(v));else for(F=Math.max(0,L.start),G=Math.min(I.count,L.start+L.count),z=F,B=G;B>z;z+=3)w=z,x=z+1,y=z+2,v=b(this,t,d,g,I,J,w,x,y),v&&(v.faceIndex=Math.floor(z/3),f.push(v))}else if(o.isGeometry){var M,N,O,P,Q=Array.isArray(t),R=o.vertices,S=o.faces,T=o.faceVertexUvs[0];T.length>0&&(P=T);for(var U=0,W=S.length;W>U;U++){var X=S[U],Y=Q?t[X.materialIndex]:t;if(void 0!==Y){if(M=R[X.a],N=R[X.b],O=R[X.c],Y.morphTargets===!0){var Z=o.morphTargets,$=this.morphTargetInfluences;i.set(0,0,0),j.set(0,0,0),k.set(0,0,0);for(var _=0,aa=Z.length;aa>_;_++){var ba=$[_];if(0!==ba){var ca=Z[_].vertices;i.addScaledVector(l.subVectors(ca[X.a],M),ba),j.addScaledVector(m.subVectors(ca[X.b],N),ba),k.addScaledVector(n.subVectors(ca[X.c],O),ba)}}i.add(M),j.add(N),k.add(O),M=i,N=j,O=k}if(v=a(this,Y,d,g,M,N,O,s)){if(P&&P[U]){var da=P[U];p.copy(da[0]),q.copy(da[1]),r.copy(da[2]),v.uv=V.getUV(s,M,N,O,p,q,r,new c)}v.face=X,v.faceIndex=U,f.push(v)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ha.prototype=Object.create(h.prototype),ha.prototype.constructor=ha,ha.prototype.isCubeTexture=!0,Object.defineProperty(ha.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}}),ia.prototype=Object.create(h.prototype),ia.prototype.constructor=ia,ia.prototype.isDataTexture3D=!0;var nl=new h,ol=new ia,pl=new ha,ql=[],rl=[],sl=new Float32Array(16),tl=new Float32Array(9),ul=new Float32Array(4);Pa.prototype.updateCache=function(a){var b=this.cache;a instanceof Float32Array&&b.length!==a.length&&(this.cache=new Float32Array(a.length)),ma(b,a)},Qa.prototype.setValue=function(a,b,c){for(var d=this.seq,e=0,f=d.length;e!==f;++e){var g=d[e];g.setValue(a,b[g.id],c)}};var vl=/([\w\d_]+)(\])?(\[|\.)?/g;Ta.prototype.setValue=function(a,b,c){var d=this.map[b];void 0!==d&&d.setValue(a,c,this.renderer)},Ta.prototype.setOptional=function(a,b,c){var d=b[c];void 0!==d&&this.setValue(a,c,d)},Ta.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];h.needsUpdate!==!1&&g.setValue(a,h.value,d)}},Ta.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var wl=0,xl=0;rb.prototype=Object.create(S.prototype),rb.prototype.constructor=rb,rb.prototype.isMeshDepthMaterial=!0,rb.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this},sb.prototype=Object.create(S.prototype),sb.prototype.constructor=sb,sb.prototype.isMeshDistanceMaterial=!0,sb.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this},xb.prototype=Object.assign(Object.create(z.prototype),{constructor:xb,isGroup:!0}),yb.prototype=Object.assign(Object.create(z.prototype),{constructor:yb,isCamera:!0,copy:function(a,b){return z.prototype.copy.call(this,a,b),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this},getWorldDirection:function(a){void 0===a&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),a=new f),this.updateMatrixWorld(!0);var b=this.matrixWorld.elements;return a.set(-b[8],-b[9],-b[10]).normalize()},updateMatrixWorld:function(a){z.prototype.updateMatrixWorld.call(this,a),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),zb.prototype=Object.assign(Object.create(yb.prototype),{constructor:zb,isPerspectiveCamera:!0,copy:function(a,b){return yb.prototype.copy.call(this,a,b),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var b=.5*this.getFilmHeight()/a;this.fov=2*Ri.RAD2DEG*Math.atan(b),this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*Ri.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*Ri.RAD2DEG*Math.atan(Math.tan(.5*Ri.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=b,this.view.offsetX=c,this.view.offsetY=d,this.view.width=e,this.view.height=f,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*Ri.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled){var g=f.fullWidth,h=f.fullHeight;e+=f.offsetX*d/g,b-=f.offsetY*c/h,d*=f.width/g,c*=f.height/h}var i=this.filmOffset;0!==i&&(e+=a*i/this.getFilmWidth()),this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){var b=z.prototype.toJSON.call(this,a);return b.object.fov=this.fov,b.object.zoom=this.zoom,b.object.near=this.near,b.object.far=this.far,b.object.focus=this.focus,b.object.aspect=this.aspect,null!==this.view&&(b.object.view=Object.assign({},this.view)),b.object.filmGauge=this.filmGauge,b.object.filmOffset=this.filmOffset,b}}),Ab.prototype=Object.assign(Object.create(zb.prototype),{constructor:Ab,isArrayCamera:!0});var yl=new f,zl=new f;Fb.prototype.isFogExp2=!0,Fb.prototype.clone=function(){return new Fb(this.color,this.density)},Fb.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Gb.prototype.isFog=!0,Gb.prototype.clone=function(){return new Gb(this.color,this.near,this.far)},Gb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Hb.prototype=Object.assign(Object.create(z.prototype),{constructor:Hb,isScene:!0,copy:function(a,b){return z.prototype.copy.call(this,a,b),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},toJSON:function(a){var b=z.prototype.toJSON.call(this,a);return null!==this.background&&(b.object.background=this.background.toJSON(a)),null!==this.fog&&(b.object.fog=this.fog.toJSON()),b},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Ib.prototype,"needsUpdate",{set:function(a){a===!0&&this.version++}}),Object.assign(Ib.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==a?a.length/this.stride:0,this.array=a,this},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.dynamic=a.dynamic,this},copyAt:function(a,b,c){a*=this.stride,c*=b.stride;for(var d=0,e=this.stride;e>d;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){return void 0===b&&(b=0),this.array.set(a,b),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){return this.onUploadCallback=a,this}}),Object.defineProperties(Jb.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Jb.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){return this.data.array[a*this.data.stride+this.offset]=b,this},setY:function(a,b){return this.data.array[a*this.data.stride+this.offset+1]=b,this},setZ:function(a,b){return this.data.array[a*this.data.stride+this.offset+2]=b,this},setW:function(a,b){return this.data.array[a*this.data.stride+this.offset+3]=b,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){return a=a*this.data.stride+this.offset,this.data.array[a+0]=b,this.data.array[a+1]=c,this},setXYZ:function(a,b,c,d){return a=a*this.data.stride+this.offset,this.data.array[a+0]=b,this.data.array[a+1]=c,this.data.array[a+2]=d,this},setXYZW:function(a,b,c,d,e){return a=a*this.data.stride+this.offset,this.data.array[a+0]=b,this.data.array[a+1]=c,this.data.array[a+2]=d,this.data.array[a+3]=e,this}}),Kb.prototype=Object.create(S.prototype),Kb.prototype.constructor=Kb,Kb.prototype.isSpriteMaterial=!0,Kb.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this};var Al;Lb.prototype=Object.assign(Object.create(z.prototype),{constructor:Lb,isSprite:!0,raycast:function(){function a(a,b,c,d,e,f){h.subVectors(a,c).addScalar(.5).multiply(d),void 0!==e?(i.x=f*h.x-e*h.y,i.y=e*h.x+f*h.y):i.copy(h),a.copy(b),a.x+=i.x,a.y+=i.y,a.applyMatrix4(j)}var b=new f,e=new f,g=new f,h=new c,i=new c,j=new d,k=new f,l=new f,m=new f,n=new c,o=new c,p=new c;return function(d,f){e.setFromMatrixScale(this.matrixWorld),j.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),g.setFromMatrixPosition(this.modelViewMatrix);var h,i,q=this.material.rotation;0!==q&&(i=Math.cos(q),h=Math.sin(q));var r=this.center;a(k.set(-.5,-.5,0),g,r,e,h,i),a(l.set(.5,-.5,0),g,r,e,h,i),a(m.set(.5,.5,0),g,r,e,h,i),n.set(0,0),o.set(1,0),p.set(1,1);var s=d.ray.intersectTriangle(k,l,m,!1,b);if(null!==s||(a(l.set(-.5,.5,0),g,r,e,h,i),o.set(0,1),s=d.ray.intersectTriangle(k,m,l,!1,b),null!==s)){var t=d.ray.origin.distanceTo(b);t<d.near||t>d.far||f.push({distance:t,point:b.clone(),uv:V.getUV(b,k,l,m,n,o,p,new c),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(a){return z.prototype.copy.call(this,a),void 0!==a.center&&this.center.copy(a.center),this}}),Mb.prototype=Object.assign(Object.create(z.prototype),{constructor:Mb,copy:function(a){z.prototype.copy.call(this,a,!1);for(var b=a.levels,c=0,d=b.length;d>c;c++){var e=b[c];this.addLevel(e.object.clone(),e.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0),b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a}),this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;d>c&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new f;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new f,b=new f;return function(c){var d=this.levels;if(d.length>1){a.setFromMatrixPosition(c.matrixWorld),b.setFromMatrixPosition(this.matrixWorld);var e=a.distanceTo(b);d[0].object.visible=!0;for(var f=1,g=d.length;g>f&&e>=d[f].distance;f++)d[f-1].object.visible=!1,d[f].object.visible=!0;for(;g>f;f++)d[f].object.visible=!1}}}(),toJSON:function(a){var b=z.prototype.toJSON.call(this,a);b.object.levels=[];for(var c=this.levels,d=0,e=c.length;e>d;d++){var f=c[d];b.object.levels.push({object:f.object.uuid,distance:f.distance})}return b}}),Nb.prototype=Object.assign(Object.create(X.prototype),{constructor:Nb,isSkinnedMesh:!0,bind:function(a,b){this.skeleton=a,void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld),this.bindMatrix.copy(b),this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var a=new i,b=this.geometry.attributes.skinWeight,c=0,d=b.count;d>c;c++){a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.w=b.getW(c);var e=1/a.manhattanLength();e!==1/0?a.multiplyScalar(e):a.set(1,0,0,0),b.setXYZW(c,a.x,a.y,a.z,a.w)}},updateMatrixWorld:function(a){X.prototype.updateMatrixWorld.call(this,a),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Ob.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;b>a;a++){var c=new d;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(c)}},pose:function(){var a,b,c;for(b=0,c=this.bones.length;c>b;b++)a=this.bones[b],a&&a.matrixWorld.getInverse(this.boneInverses[b]);for(b=0,c=this.bones.length;c>b;b++)a=this.bones[b],a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var a=new d,b=new d;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;h>g;g++){var i=c[g]?c[g].matrixWorld:b;a.multiplyMatrices(i,d[g]),a.toArray(e,16*g)}void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new Ob(this.bones,this.boneInverses)},getBoneByName:function(a){for(var b=0,c=this.bones.length;c>b;b++){var d=this.bones[b];if(d.name===a)return d}return void 0}}),Pb.prototype=Object.assign(Object.create(z.prototype),{constructor:Pb,isBone:!0}),Qb.prototype=Object.create(S.prototype),Qb.prototype.constructor=Qb,Qb.prototype.isLineBasicMaterial=!0,Qb.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this},Rb.prototype=Object.assign(Object.create(z.prototype),{constructor:Rb,isLine:!0,computeLineDistances:function(){var a=new f,b=new f;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[0],f=1,g=d.count;g>f;f++)a.fromBufferAttribute(d,f-1),b.fromBufferAttribute(d,f),e[f]=e[f-1],e[f]+=a.distanceTo(b);c.addAttribute("lineDistance",new J(e,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry){var h=c.vertices,e=c.lineDistances;e[0]=0;for(var f=1,g=h.length;g>f;f++)e[f]=e[f-1],e[f]+=h[f-1].distanceTo(h[f])}return this}}(),raycast:function(){var a=new d,b=new U,c=new o;return function(d,e){var g=d.linePrecision,h=this.geometry,i=this.matrixWorld;if(null===h.boundingSphere&&h.computeBoundingSphere(),c.copy(h.boundingSphere),c.applyMatrix4(i),c.radius+=g,d.ray.intersectsSphere(c)!==!1){a.getInverse(i),b.copy(d.ray).applyMatrix4(a);var j=g/((this.scale.x+this.scale.y+this.scale.z)/3),k=j*j,l=new f,m=new f,n=new f,o=new f,p=this&&this.isLineSegments?2:1;if(h.isBufferGeometry){var q=h.index,r=h.attributes,s=r.position.array;if(null!==q)for(var t=q.array,u=0,v=t.length-1;v>u;u+=p){var w=t[u],x=t[u+1];l.fromArray(s,3*w),m.fromArray(s,3*x);var y=b.distanceSqToSegment(l,m,o,n);if(!(y>k)){o.applyMatrix4(this.matrixWorld);var z=d.ray.origin.distanceTo(o);z<d.near||z>d.far||e.push({distance:z,point:n.clone().applyMatrix4(this.matrixWorld),index:u,face:null,faceIndex:null,object:this})}}else for(var u=0,v=s.length/3-1;v>u;u+=p){l.fromArray(s,3*u),m.fromArray(s,3*u+3);var y=b.distanceSqToSegment(l,m,o,n);if(!(y>k)){o.applyMatrix4(this.matrixWorld);var z=d.ray.origin.distanceTo(o);z<d.near||z>d.far||e.push({distance:z,point:n.clone().applyMatrix4(this.matrixWorld),index:u,face:null,faceIndex:null,object:this})}}}else if(h.isGeometry)for(var A=h.vertices,B=A.length,u=0;B-1>u;u+=p){var y=b.distanceSqToSegment(A[u],A[u+1],o,n);if(!(y>k)){o.applyMatrix4(this.matrixWorld);var z=d.ray.origin.distanceTo(o);z<d.near||z>d.far||e.push({distance:z,point:n.clone().applyMatrix4(this.matrixWorld),index:u,face:null,faceIndex:null,object:this})}}}}}(),copy:function(a){return z.prototype.copy.call(this,a),this.geometry.copy(a.geometry),this.material.copy(a.material),this},clone:function(){return(new this.constructor).copy(this)}}),Sb.prototype=Object.assign(Object.create(Rb.prototype),{constructor:Sb,isLineSegments:!0,computeLineDistances:function(){var a=new f,b=new f;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;g>f;f+=2)a.fromBufferAttribute(d,f),b.fromBufferAttribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);c.addAttribute("lineDistance",new J(e,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry)for(var h=c.vertices,e=c.lineDistances,f=0,g=h.length;g>f;f+=2)a.copy(h[f]),b.copy(h[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);return this}}()}),Tb.prototype=Object.assign(Object.create(Rb.prototype),{constructor:Tb,isLineLoop:!0}),Ub.prototype=Object.create(S.prototype),Ub.prototype.constructor=Ub,Ub.prototype.isPointsMaterial=!0,Ub.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.morphTargets=a.morphTargets,this},Vb.prototype=Object.assign(Object.create(z.prototype),{constructor:Vb,isPoints:!0,raycast:function(){var a=new d,b=new U,c=new o;return function(d,e){function g(a,c){var f=b.distanceSqToPoint(a);if(m>f){b.closestPointToPoint(a,o),o.applyMatrix4(j);var g=d.ray.origin.distanceTo(o);if(g<d.near||g>d.far)return;e.push({distance:g,distanceToRay:Math.sqrt(f),point:o.clone(),index:c,face:null,object:h})}}var h=this,i=this.geometry,j=this.matrixWorld,k=d.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),c.copy(i.boundingSphere),c.applyMatrix4(j),c.radius+=k,d.ray.intersectsSphere(c)!==!1){a.getInverse(j),b.copy(d.ray).applyMatrix4(a);var l=k/((this.scale.x+this.scale.y+this.scale.z)/3),m=l*l,n=new f,o=new f;if(i.isBufferGeometry){var p=i.index,q=i.attributes,r=q.position.array;if(null!==p)for(var s=p.array,t=0,u=s.length;u>t;t++){var v=s[t];n.fromArray(r,3*v),g(n,v)}else for(var t=0,w=r.length/3;w>t;t++)n.fromArray(r,3*t),g(n,t)}else for(var x=i.vertices,t=0,w=x.length;w>t;t++)g(x[t],t)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Wb.prototype=Object.assign(Object.create(h.prototype),{constructor:Wb,isVideoTexture:!0,update:function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Xb.prototype=Object.create(h.prototype),Xb.prototype.constructor=Xb,Xb.prototype.isCompressedTexture=!0,Yb.prototype=Object.create(h.prototype),Yb.prototype.constructor=Yb,Yb.prototype.isCanvasTexture=!0,Zb.prototype=Object.create(h.prototype),Zb.prototype.constructor=Zb,Zb.prototype.isDepthTexture=!0,$b.prototype=Object.create(N.prototype),$b.prototype.constructor=$b,_b.prototype=Object.create(A.prototype),_b.prototype.constructor=_b,ac.prototype=Object.create(N.prototype),ac.prototype.constructor=ac,bc.prototype=Object.create(A.prototype),bc.prototype.constructor=bc,cc.prototype=Object.create(N.prototype),cc.prototype.constructor=cc,dc.prototype=Object.create(A.prototype),dc.prototype.constructor=dc,ec.prototype=Object.create(cc.prototype),ec.prototype.constructor=ec,fc.prototype=Object.create(A.prototype),fc.prototype.constructor=fc,gc.prototype=Object.create(cc.prototype),gc.prototype.constructor=gc,hc.prototype=Object.create(A.prototype),hc.prototype.constructor=hc,ic.prototype=Object.create(cc.prototype),ic.prototype.constructor=ic,jc.prototype=Object.create(A.prototype),jc.prototype.constructor=jc,kc.prototype=Object.create(cc.prototype),kc.prototype.constructor=kc,lc.prototype=Object.create(A.prototype),lc.prototype.constructor=lc,mc.prototype=Object.create(N.prototype),mc.prototype.constructor=mc,nc.prototype=Object.create(A.prototype),nc.prototype.constructor=nc,oc.prototype=Object.create(N.prototype),oc.prototype.constructor=oc,pc.prototype=Object.create(A.prototype),pc.prototype.constructor=pc,qc.prototype=Object.create(N.prototype),qc.prototype.constructor=qc;var Bl={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=rc(a,0,e,c,!0),g=[];if(!f)return g;var h,i,j,k,l,m,n;if(d&&(f=yc(a,b,f,c)),a.length>80*c){h=j=a[0],i=k=a[1];for(var o=c;e>o;o+=c)l=a[o],m=a[o+1],h>l&&(h=l),i>m&&(i=m),l>j&&(j=l),m>k&&(k=m);n=Math.max(j-h,k-i),n=0!==n?1/n:0}return tc(f,g,c,h,i,n),g}},Cl={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;b>e;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},isClockWise:function(a){return Cl.area(a)<0},triangulateShape:function(a,b){var c=[],d=[],e=[];Tc(a),Uc(c,a);var f=a.length;b.forEach(Tc);for(var g=0;g<b.length;g++)d.push(f),f+=b[g].length,Uc(c,b[g]);for(var h=Bl.triangulate(c,d),g=0;g<h.length;g+=3)e.push(h.slice(g,g+3));return e}};Vc.prototype=Object.create(A.prototype),Vc.prototype.constructor=Vc,Vc.prototype.toJSON=function(){var a=A.prototype.toJSON.call(this),b=this.parameters.shapes,c=this.parameters.options;return Xc(b,c,a)},Wc.prototype=Object.create(N.prototype),Wc.prototype.constructor=Wc,Wc.prototype.toJSON=function(){var a=N.prototype.toJSON.call(this),b=this.parameters.shapes,c=this.parameters.options;return Xc(b,c,a)};var Dl={generateTopUV:function(a,b,d,e,f){var g=b[3*d],h=b[3*d+1],i=b[3*e],j=b[3*e+1],k=b[3*f],l=b[3*f+1];return[new c(g,h),new c(i,j),new c(k,l)]},generateSideWallUV:function(a,b,d,e,f,g){var h=b[3*d],i=b[3*d+1],j=b[3*d+2],k=b[3*e],l=b[3*e+1],m=b[3*e+2],n=b[3*f],o=b[3*f+1],p=b[3*f+2],q=b[3*g],r=b[3*g+1],s=b[3*g+2];return Math.abs(i-l)<.01?[new c(h,1-j),new c(k,1-m),new c(n,1-p),new c(q,1-s)]:[new c(i,1-j),new c(l,1-m),new c(o,1-p),new c(r,1-s)]}};Yc.prototype=Object.create(A.prototype),Yc.prototype.constructor=Yc,Zc.prototype=Object.create(Wc.prototype),Zc.prototype.constructor=Zc,$c.prototype=Object.create(A.prototype),$c.prototype.constructor=$c,_c.prototype=Object.create(N.prototype),_c.prototype.constructor=_c,ad.prototype=Object.create(A.prototype),ad.prototype.constructor=ad,bd.prototype=Object.create(N.prototype),bd.prototype.constructor=bd,cd.prototype=Object.create(A.prototype),cd.prototype.constructor=cd,dd.prototype=Object.create(N.prototype),
dd.prototype.constructor=dd,ed.prototype=Object.create(A.prototype),ed.prototype.constructor=ed,ed.prototype.toJSON=function(){var a=A.prototype.toJSON.call(this),b=this.parameters.shapes;return gd(b,a)},fd.prototype=Object.create(N.prototype),fd.prototype.constructor=fd,fd.prototype.toJSON=function(){var a=N.prototype.toJSON.call(this),b=this.parameters.shapes;return gd(b,a)},hd.prototype=Object.create(N.prototype),hd.prototype.constructor=hd,id.prototype=Object.create(A.prototype),id.prototype.constructor=id,jd.prototype=Object.create(N.prototype),jd.prototype.constructor=jd,kd.prototype=Object.create(id.prototype),kd.prototype.constructor=kd,ld.prototype=Object.create(jd.prototype),ld.prototype.constructor=ld,md.prototype=Object.create(A.prototype),md.prototype.constructor=md,nd.prototype=Object.create(N.prototype),nd.prototype.constructor=nd;var El=Object.freeze({WireframeGeometry:$b,ParametricGeometry:_b,ParametricBufferGeometry:ac,TetrahedronGeometry:dc,TetrahedronBufferGeometry:ec,OctahedronGeometry:fc,OctahedronBufferGeometry:gc,IcosahedronGeometry:hc,IcosahedronBufferGeometry:ic,DodecahedronGeometry:jc,DodecahedronBufferGeometry:kc,PolyhedronGeometry:bc,PolyhedronBufferGeometry:cc,TubeGeometry:lc,TubeBufferGeometry:mc,TorusKnotGeometry:nc,TorusKnotBufferGeometry:oc,TorusGeometry:pc,TorusBufferGeometry:qc,TextGeometry:Yc,TextBufferGeometry:Zc,SphereGeometry:$c,SphereBufferGeometry:_c,RingGeometry:ad,RingBufferGeometry:bd,PlaneGeometry:Q,PlaneBufferGeometry:R,LatheGeometry:cd,LatheBufferGeometry:dd,ShapeGeometry:ed,ShapeBufferGeometry:fd,ExtrudeGeometry:Vc,ExtrudeBufferGeometry:Wc,EdgesGeometry:hd,ConeGeometry:kd,ConeBufferGeometry:ld,CylinderGeometry:id,CylinderBufferGeometry:jd,CircleGeometry:md,CircleBufferGeometry:nd,BoxGeometry:O,BoxBufferGeometry:P});od.prototype=Object.create(S.prototype),od.prototype.constructor=od,od.prototype.isShadowMaterial=!0,od.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this},pd.prototype=Object.create(T.prototype),pd.prototype.constructor=pd,pd.prototype.isRawShaderMaterial=!0,qd.prototype=Object.create(S.prototype),qd.prototype.constructor=qd,qd.prototype.isMeshStandardMaterial=!0,qd.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},rd.prototype=Object.create(qd.prototype),rd.prototype.constructor=rd,rd.prototype.isMeshPhysicalMaterial=!0,rd.prototype.copy=function(a){return qd.prototype.copy.call(this,a),this.defines={PHYSICAL:""},this.reflectivity=a.reflectivity,this.clearCoat=a.clearCoat,this.clearCoatRoughness=a.clearCoatRoughness,this},sd.prototype=Object.create(S.prototype),sd.prototype.constructor=sd,sd.prototype.isMeshPhongMaterial=!0,sd.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},td.prototype=Object.create(sd.prototype),td.prototype.constructor=td,td.prototype.isMeshToonMaterial=!0,td.prototype.copy=function(a){return sd.prototype.copy.call(this,a),this.gradientMap=a.gradientMap,this},ud.prototype=Object.create(S.prototype),ud.prototype.constructor=ud,ud.prototype.isMeshNormalMaterial=!0,ud.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},vd.prototype=Object.create(S.prototype),vd.prototype.constructor=vd,vd.prototype.isMeshLambertMaterial=!0,vd.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},wd.prototype=Object.create(S.prototype),wd.prototype.constructor=wd,wd.prototype.isMeshMatcapMaterial=!0,wd.prototype.copy=function(a){return S.prototype.copy.call(this,a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},xd.prototype=Object.create(Qb.prototype),xd.prototype.constructor=xd,xd.prototype.isLineDashedMaterial=!0,xd.prototype.copy=function(a){return Qb.prototype.copy.call(this,a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var Fl=Object.freeze({ShadowMaterial:od,SpriteMaterial:Kb,RawShaderMaterial:pd,ShaderMaterial:T,PointsMaterial:Ub,MeshPhysicalMaterial:rd,MeshStandardMaterial:qd,MeshPhongMaterial:sd,MeshToonMaterial:td,MeshNormalMaterial:ud,MeshLambertMaterial:vd,MeshDepthMaterial:rb,MeshDistanceMaterial:sb,MeshBasicMaterial:W,MeshMatcapMaterial:wd,LineDashedMaterial:xd,LineBasicMaterial:Qb,Material:S}),Gl={arraySlice:function(a,b,c){return Gl.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"==typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){function b(b,c){return a[b]-a[c]}for(var c=a.length,d=new Array(c),e=0;e!==c;++e)d[e]=e;return d.sort(b),d},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,i=0;i!==b;++i)e[g++]=a[h+i];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}};Object.assign(yd.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{var f;c:{d:if(!(d>a)){for(var g=c+2;;){if(void 0===d){if(e>a)break d;return c=b.length,this._cachedIndex=c,this.afterEnd_(c-1,a,e)}if(c===g)break;if(e=d,d=b[++c],d>a)break b}f=b.length;break c}{if(a>=e)break a;var h=b[1];h>a&&(c=2,e=h);for(var g=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===g)break;if(d=e,e=b[--c-1],a>=e)break b}f=c,c=0}}for(;f>c;){var i=c+f>>>1;a<b[i]?f=i:c=i+1}if(d=b[c],e=b[c-1],void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return c=b.length,this._cachedIndex=c,this.afterEnd_(c-1,e,a)}this._cachedIndex=c,this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize,e=a*d,f=0;f!==d;++f)b[f]=c[e+f];return b},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(yd.prototype,{beforeStart_:yd.prototype.copySampleValue_,afterEnd_:yd.prototype.copySampleValue_}),zd.prototype=Object.assign(Object.create(yd.prototype),{constructor:zd,DefaultSettings_:{endingStart:zi,endingEnd:zi},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case Ai:e=a,g=2*b-c;break;case Bi:e=d.length-2,g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case Ai:f=a,h=2*c-b;break;case Bi:f=1,h=c+d[1]-d[0];break;default:f=a-1,h=b}var i=.5*(c-b),j=this.valueSize;this._weightPrev=i/(b-g),this._weightNext=i/(h-c),this._offsetPrev=e*j,this._offsetNext=f*j},interpolate_:function(a,b,c,d){for(var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize,h=a*g,i=h-g,j=this._offsetPrev,k=this._offsetNext,l=this._weightPrev,m=this._weightNext,n=(c-b)/(d-b),o=n*n,p=o*n,q=-l*p+2*l*o-l*n,r=(1+l)*p+(-1.5-2*l)*o+(-.5+l)*n+1,s=(-1-m)*p+(1.5+m)*o+.5*n,t=m*p-m*o,u=0;u!==g;++u)e[u]=q*f[j+u]+r*f[i+u]+s*f[h+u]+t*f[k+u];return e}}),Ad.prototype=Object.assign(Object.create(yd.prototype),{constructor:Ad,interpolate_:function(a,b,c,d){for(var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize,h=a*g,i=h-g,j=(c-b)/(d-b),k=1-j,l=0;l!==g;++l)e[l]=f[i+l]*k+f[h+l]*j;return e}}),Bd.prototype=Object.assign(Object.create(yd.prototype),{constructor:Bd,interpolate_:function(a){return this.copySampleValue_(a-1)}}),Object.assign(Cd,{toJSON:function(a){var b,c=a.constructor;if(void 0!==c.toJSON)b=c.toJSON(a);else{b={name:a.name,times:Gl.convertArray(a.times,Array),values:Gl.convertArray(a.values,Array)};var d=a.getInterpolation();d!==a.DefaultInterpolation&&(b.interpolation=d)}return b.type=a.ValueTypeName,b}}),Object.assign(Cd.prototype,{constructor:Cd,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:xi,InterpolantFactoryMethodDiscrete:function(a){return new Bd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new Ad(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new zd(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var b;switch(a){case wi:b=this.InterpolantFactoryMethodDiscrete;break;case xi:b=this.InterpolantFactoryMethodLinear;break;case yi:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){var c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=b,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wi;case this.InterpolantFactoryMethodLinear:return xi;case this.InterpolantFactoryMethodSmooth:return yi}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;if(++f,0!==e||f!==d){e>=f&&(f=Math.max(f,1),e=f-1);var g=this.getValueSize();this.times=Gl.arraySlice(c,e,f),this.values=Gl.arraySlice(this.values,e*g,f*g)}return this},validate:function(){var a=!0,b=this.getValueSize();b-Math.floor(b)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times,d=this.values,e=c.length;0===e&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var f=null,g=0;g!==e;g++){var h=c[g];if("number"==typeof h&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,h),a=!1;break}if(null!==f&&f>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,h,f),a=!1;break}f=h}if(void 0!==d&&Gl.isTypedArray(d))for(var g=0,i=d.length;g!==i;++g){var j=d[g];if(isNaN(j)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,j),a=!1;break}}return a},optimize:function(){for(var a=this.times,b=this.values,c=this.getValueSize(),d=this.getInterpolation()===yi,e=1,f=a.length-1,g=1;f>g;++g){var h=!1,i=a[g],j=a[g+1];if(i!==j&&(1!==g||i!==i[0]))if(d)h=!0;else for(var k=g*c,l=k-c,m=k+c,n=0;n!==c;++n){var o=b[k+n];if(o!==b[l+n]||o!==b[m+n]){h=!0;break}}if(h){if(g!==e){a[e]=a[g];for(var p=g*c,q=e*c,n=0;n!==c;++n)b[q+n]=b[p+n]}++e}}if(f>0){a[e]=a[f];for(var p=f*c,q=e*c,n=0;n!==c;++n)b[q+n]=b[p+n];++e}return e!==a.length&&(this.times=Gl.arraySlice(a,0,e),this.values=Gl.arraySlice(b,0,e*c)),this},clone:function(){var a=Gl.arraySlice(this.times,0),b=Gl.arraySlice(this.values,0),c=this.constructor,d=new c(this.name,a,b);return d.createInterpolant=this.createInterpolant,d}}),Dd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Dd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:wi,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ed.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Ed,ValueTypeName:"color"}),Fd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Fd,ValueTypeName:"number"}),Gd.prototype=Object.assign(Object.create(yd.prototype),{constructor:Gd,interpolate_:function(a,b,c,d){for(var f=this.resultBuffer,g=this.sampleValues,h=this.valueSize,i=a*h,j=(c-b)/(d-b),k=i+h;i!==k;i+=4)e.slerpFlat(f,0,g,i-h,g,i,j);return f}}),Hd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Hd,ValueTypeName:"quaternion",DefaultInterpolation:xi,InterpolantFactoryMethodLinear:function(a){return new Gd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0}),Id.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Id,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:wi,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Jd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Jd,ValueTypeName:"vector"}),Object.assign(Kd,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(Md(c[e]).scale(d));return new Kd(a.name,a.duration,b)},toJSON:function(a){for(var b=[],c=a.tracks,d={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid},e=0,f=c.length;e!==f;++e)b.push(Cd.toJSON(c[e]));return d},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,f=[],g=0;e>g;g++){var h=[],i=[];h.push((g+e-1)%e,g,(g+1)%e),i.push(0,1,0);var j=Gl.getKeyframeOrder(h);h=Gl.sortedArray(h,1,j),i=Gl.sortedArray(i,1,j),d||0!==h[0]||(h.push(e),i.push(i[0])),f.push(new Fd(".morphTargetInfluences["+b[g].name+"]",h,i).scale(1/c))}return new Kd(a,-1,f)},findByName:function(a,b){var c=a;if(!Array.isArray(a)){var d=a;c=d.geometry&&d.geometry.animations||d.animations}for(var e=0;e<c.length;e++)if(c[e].name===b)return c[e];return null},CreateClipsFromMorphTargetSequences:function(a,b,c){for(var d={},e=/^([\w-]*?)([\d]+)$/,f=0,g=a.length;g>f;f++){var h=a[f],i=h.name.match(e);if(i&&i.length>1){var j=i[1],k=d[j];k||(d[j]=k=[]),k.push(h)}}var l=[];for(var j in d)l.push(Kd.CreateFromMorphTargetSequence(j,d[j],b,c));return l},parseAnimation:function(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];Gl.flattenJSON(c,f,g,d),0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||"default",f=a.length||-1,g=a.fps||30,h=a.hierarchy||[],i=0;i<h.length;i++){var j=h[i].keys;if(j&&0!==j.length)if(j[0].morphTargets){for(var k={},l=0;l<j.length;l++)if(j[l].morphTargets)for(var m=0;m<j[l].morphTargets.length;m++)k[j[l].morphTargets[m]]=-1;for(var n in k){for(var o=[],p=[],m=0;m!==j[l].morphTargets.length;++m){var q=j[l];o.push(q.time),p.push(q.morphTarget===n?1:0)}d.push(new Fd(".morphTargetInfluence["+n+"]",o,p))}f=k.length*(g||1)}else{var r=".bones["+b[i].name+"]";c(Jd,r+".position",j,"pos",d),c(Hd,r+".quaternion",j,"rot",d),c(Jd,r+".scale",j,"scl",d)}}if(0===d.length)return null;var s=new Kd(e,f,d);return s}}),Object.assign(Kd.prototype,{resetDuration:function(){for(var a=this.tracks,b=0,c=0,d=a.length;c!==d;++c){var e=this.tracks[c];b=Math.max(b,e.times[e.times.length-1])}return this.duration=b,this},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},validate:function(){for(var a=!0,b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this},clone:function(){for(var a=[],b=0;b<this.tracks.length;b++)a.push(this.tracks[b].clone());return new Kd(this.name,this.duration,a)}});var Hl={enabled:!1,files:{},add:function(a,b){this.enabled!==!1&&(this.files[a]=b)},get:function(a){return this.enabled!==!1?this.files[a]:void 0},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},Il=new Nd,Jl={};Object.assign(Od.prototype,{load:function(a,b,c,d){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var e=this,f=Hl.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f),e.manager.itemEnd(a)},0),f;if(void 0!==Jl[a])return void Jl[a].push({onLoad:b,onProgress:c,onError:d});var g=/^data:(.*?)(;base64)?,(.*)$/,h=a.match(g);if(h){var i=h[1],j=!!h[2],k=h[3];k=decodeURIComponent(k),j&&(k=atob(k));try{var l,m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":for(var n=new Uint8Array(k.length),o=0;o<k.length;o++)n[o]=k.charCodeAt(o);l="blob"===m?new Blob([n.buffer],{type:i}):n.buffer;break;case"document":var p=new DOMParser;l=p.parseFromString(k,i);break;case"json":l=JSON.parse(k);break;default:l=k}setTimeout(function(){b&&b(l),e.manager.itemEnd(a)},0)}catch(q){setTimeout(function(){d&&d(q),e.manager.itemError(a),e.manager.itemEnd(a)},0)}}else{Jl[a]=[],Jl[a].push({onLoad:b,onProgress:c,onError:d});var r=new XMLHttpRequest;r.open("GET",a,!0),r.addEventListener("load",function(b){var c=this.response;Hl.add(a,c);var d=Jl[a];if(delete Jl[a],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var f=0,g=d.length;g>f;f++){var h=d[f];h.onLoad&&h.onLoad(c)}e.manager.itemEnd(a)}else{for(var f=0,g=d.length;g>f;f++){var h=d[f];h.onError&&h.onError(b)}e.manager.itemError(a),e.manager.itemEnd(a)}},!1),r.addEventListener("progress",function(b){for(var c=Jl[a],d=0,e=c.length;e>d;d++){var f=c[d];f.onProgress&&f.onProgress(b)}},!1),r.addEventListener("error",function(b){var c=Jl[a];delete Jl[a];for(var d=0,f=c.length;f>d;d++){var g=c[d];g.onError&&g.onError(b)}e.manager.itemError(a),e.manager.itemEnd(a)},!1),r.addEventListener("abort",function(b){var c=Jl[a];delete Jl[a];for(var d=0,f=c.length;f>d;d++){var g=c[d];g.onError&&g.onError(b)}e.manager.itemError(a),e.manager.itemEnd(a)},!1),void 0!==this.responseType&&(r.responseType=this.responseType),void 0!==this.withCredentials&&(r.withCredentials=this.withCredentials),r.overrideMimeType&&r.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var s in this.requestHeader)r.setRequestHeader(s,this.requestHeader[s]);r.send(null)}return e.manager.itemStart(a),r},setPath:function(a){return this.path=a,this},setResponseType:function(a){return this.responseType=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setMimeType:function(a){return this.mimeType=a,this},setRequestHeader:function(a){return this.requestHeader=a,this}}),Object.assign(Pd.prototype,{load:function(a,b,c,d){var e=this,f=new Od(e.manager);f.setPath(e.path),f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=Kd.parse(a[d]);c.push(e)}b(c)},setPath:function(a){return this.path=a,this}}),Object.assign(Qd.prototype,{load:function(a,b,c,d){function e(e){i.load(a[e],function(a){var c=f._parser(a,!0);g[e]={width:c.width,height:c.height,format:c.format,mipmaps:c.mipmaps},j+=1,6===j&&(1===c.mipmapCount&&(h.minFilter=Ah),h.format=c.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new Xb;h.image=g;var i=new Od(this.manager);if(i.setPath(this.path),i.setResponseType("arraybuffer"),Array.isArray(a))for(var j=0,k=0,l=a.length;l>k;++k)e(k);else i.load(a,function(a){var c=f._parser(a,!0);if(c.isCubemap)for(var d=c.mipmaps.length/c.mipmapCount,e=0;d>e;e++){g[e]={mipmaps:[]};for(var i=0;i<c.mipmapCount;i++)g[e].mipmaps.push(c.mipmaps[e*c.mipmapCount+i]),g[e].format=c.format,g[e].width=c.width,g[e].height=c.height}else h.image.width=c.width,h.image.height=c.height,h.mipmaps=c.mipmaps;1===c.mipmapCount&&(h.minFilter=Ah),h.format=c.format,h.needsUpdate=!0,b&&b(h)},c,d);return h},setPath:function(a){return this.path=a,this}}),Object.assign(Rd.prototype,{load:function(a,b,c,d){var e=this,f=new m,g=new Od(this.manager);return g.setResponseType("arraybuffer"),g.setPath(this.path),g.load(a,function(a){var c=e._parser(a);c&&(void 0!==c.image?f.image=c.image:void 0!==c.data&&(f.image.width=c.width,f.image.height=c.height,f.image.data=c.data),f.wrapS=void 0!==c.wrapS?c.wrapS:vh,f.wrapT=void 0!==c.wrapT?c.wrapT:vh,f.magFilter=void 0!==c.magFilter?c.magFilter:Ah,f.minFilter=void 0!==c.minFilter?c.minFilter:Ch,f.anisotropy=void 0!==c.anisotropy?c.anisotropy:1,void 0!==c.format&&(f.format=c.format),void 0!==c.type&&(f.type=c.type),void 0!==c.mipmaps&&(f.mipmaps=c.mipmaps),1===c.mipmapCount&&(f.minFilter=Ah),f.needsUpdate=!0,b&&b(f,c))},c,d),f},setPath:function(a){return this.path=a,this}}),Object.assign(Sd.prototype,{crossOrigin:"anonymous",load:function(a,b,c,d){function e(){i.removeEventListener("load",e,!1),i.removeEventListener("error",f,!1),Hl.add(a,this),b&&b(this),g.manager.itemEnd(a)}function f(b){i.removeEventListener("load",e,!1),i.removeEventListener("error",f,!1),d&&d(b),g.manager.itemError(a),g.manager.itemEnd(a)}void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var g=this,h=Hl.get(a);if(void 0!==h)return g.manager.itemStart(a),setTimeout(function(){b&&b(h),g.manager.itemEnd(a)},0),h;var i=document.createElementNS("http://www.w3.org/1999/xhtml","img");return i.addEventListener("load",e,!1),i.addEventListener("error",f,!1),"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),g.manager.itemStart(a),i.src=a,i},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Td.prototype,{crossOrigin:"anonymous",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a,h++,6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new ha,g=new Sd(this.manager);g.setCrossOrigin(this.crossOrigin),g.setPath(this.path);for(var h=0,i=0;i<a.length;++i)e(i);return f},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Ud.prototype,{crossOrigin:"anonymous",load:function(a,b,c,d){var e=new h,f=new Sd(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(a,function(c){e.image=c;var d=a.search(/\.jpe?g($|\?)/i)>0||0===a.search(/^data\:image\/jpeg/);e.format=d?Qh:Rh,e.needsUpdate=!0,void 0!==b&&b(e)},c,d),e},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Vd.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(a,b){var c=this.getUtoTmapping(a);return this.getPoint(c,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;a>=c;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;a>=c;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(void 0===a&&(a=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),f=0;for(d.push(0),c=1;a>=c;c++)b=this.getPoint(c/a),f+=b.distanceTo(e),d.push(f),e=b;return this.cacheArcLengths=d,d},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(a,b){var c,d=this.getLengths(),e=0,f=d.length;c=b?b:a*d[f-1];for(var g,h=0,i=f-1;i>=h;)if(e=Math.floor(h+(i-h)/2),g=d[e]-c,0>g)h=e+1;else{if(!(g>0)){i=e;break}i=e-1}if(e=i,d[e]===c)return e/(f-1);var j=d[e],k=d[e+1],l=k-j,m=(c-j)/l,n=(e+m)/(f-1);return n},getTangent:function(a){var b=1e-4,c=a-b,d=a+b;0>c&&(c=0),d>1&&(d=1);var e=this.getPoint(c),f=this.getPoint(d),g=f.clone().sub(e);return g.normalize()},getTangentAt:function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)},computeFrenetFrames:function(a,b){var c,e,g,h=new f,i=[],j=[],k=[],l=new f,m=new d;for(c=0;a>=c;c++)e=c/a,i[c]=this.getTangentAt(e),i[c].normalize();j[0]=new f,k[0]=new f;var n=Number.MAX_VALUE,o=Math.abs(i[0].x),p=Math.abs(i[0].y),q=Math.abs(i[0].z);for(n>=o&&(n=o,h.set(1,0,0)),n>=p&&(n=p,h.set(0,1,0)),n>=q&&h.set(0,0,1),l.crossVectors(i[0],h).normalize(),j[0].crossVectors(i[0],l),k[0].crossVectors(i[0],j[0]),c=1;a>=c;c++)j[c]=j[c-1].clone(),k[c]=k[c-1].clone(),l.crossVectors(i[c-1],i[c]),l.length()>Number.EPSILON&&(l.normalize(),g=Math.acos(Ri.clamp(i[c-1].dot(i[c]),-1,1)),j[c].applyMatrix4(m.makeRotationAxis(l,g))),k[c].crossVectors(i[c],j[c]);if(b===!0)for(g=Math.acos(Ri.clamp(j[0].dot(j[a]),-1,1)),g/=a,i[0].dot(l.crossVectors(j[0],j[a]))>0&&(g=-g),c=1;a>=c;c++)j[c].applyMatrix4(m.makeRotationAxis(i[c],g*c)),k[c].crossVectors(i[c],j[c]);return{tangents:i,normals:j,binormals:k}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.arcLengthDivisions=a.arcLengthDivisions,this},toJSON:function(){var a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a},fromJSON:function(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}),Wd.prototype=Object.create(Vd.prototype),Wd.prototype.constructor=Wd,Wd.prototype.isEllipseCurve=!0,Wd.prototype.getPoint=function(a,b){for(var d=b||new c,e=2*Math.PI,f=this.aEndAngle-this.aStartAngle,g=Math.abs(f)<Number.EPSILON;0>f;)f+=e;for(;f>e;)f-=e;f<Number.EPSILON&&(f=g?0:e),this.aClockwise!==!0||g||(f===e?f=-e:f-=e);var h=this.aStartAngle+a*f,i=this.aX+this.xRadius*Math.cos(h),j=this.aY+this.yRadius*Math.sin(h);if(0!==this.aRotation){var k=Math.cos(this.aRotation),l=Math.sin(this.aRotation),m=i-this.aX,n=j-this.aY;i=m*k-n*l+this.aX,j=m*l+n*k+this.aY}return d.set(i,j)},Wd.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this},Wd.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a},Wd.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this},Xd.prototype=Object.create(Wd.prototype),Xd.prototype.constructor=Xd,Xd.prototype.isArcCurve=!0;var Kl=new f,Ll=new Yd,Ml=new Yd,Nl=new Yd;Zd.prototype=Object.create(Vd.prototype),Zd.prototype.constructor=Zd,Zd.prototype.isCatmullRomCurve3=!0,Zd.prototype.getPoint=function(a,b){var c=b||new f,d=this.points,e=d.length,g=(e-(this.closed?0:1))*a,h=Math.floor(g),i=g-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/e)+1)*e:0===i&&h===e-1&&(h=e-2,i=1);var j,k,l,m;if(this.closed||h>0?j=d[(h-1)%e]:(Kl.subVectors(d[0],d[1]).add(d[0]),j=Kl),k=d[h%e],l=d[(h+1)%e],this.closed||e>h+2?m=d[(h+2)%e]:(Kl.subVectors(d[e-1],d[e-2]).add(d[e-1]),m=Kl),"centripetal"===this.curveType||"chordal"===this.curveType){var n="chordal"===this.curveType?.5:.25,o=Math.pow(j.distanceToSquared(k),n),p=Math.pow(k.distanceToSquared(l),n),q=Math.pow(l.distanceToSquared(m),n);1e-4>p&&(p=1),1e-4>o&&(o=p),1e-4>q&&(q=p),Ll.initNonuniformCatmullRom(j.x,k.x,l.x,m.x,o,p,q),Ml.initNonuniformCatmullRom(j.y,k.y,l.y,m.y,o,p,q),Nl.initNonuniformCatmullRom(j.z,k.z,l.z,m.z,o,p,q)}else"catmullrom"===this.curveType&&(Ll.initCatmullRom(j.x,k.x,l.x,m.x,this.tension),Ml.initCatmullRom(j.y,k.y,l.y,m.y,this.tension),Nl.initCatmullRom(j.z,k.z,l.z,m.z,this.tension));return c.set(Ll.calc(i),Ml.calc(i),Nl.calc(i)),c},Zd.prototype.copy=function(a){Vd.prototype.copy.call(this,a),this.points=[];for(var b=0,c=a.points.length;c>b;b++){var d=a.points[b];this.points.push(d.clone())}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this},Zd.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;c>b;b++){var d=this.points[b];a.points.push(d.toArray())}return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a},Zd.prototype.fromJSON=function(a){Vd.prototype.fromJSON.call(this,a),this.points=[];for(var b=0,c=a.points.length;c>b;b++){var d=a.points[b];this.points.push((new f).fromArray(d))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this},ie.prototype=Object.create(Vd.prototype),ie.prototype.constructor=ie,ie.prototype.isCubicBezierCurve=!0,ie.prototype.getPoint=function(a,b){var d=b||new c,e=this.v0,f=this.v1,g=this.v2,h=this.v3;return d.set(he(a,e.x,f.x,g.x,h.x),he(a,e.y,f.y,g.y,h.y)),d},ie.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this},ie.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),
a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a},ie.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this},je.prototype=Object.create(Vd.prototype),je.prototype.constructor=je,je.prototype.isCubicBezierCurve3=!0,je.prototype.getPoint=function(a,b){var c=b||new f,d=this.v0,e=this.v1,g=this.v2,h=this.v3;return c.set(he(a,d.x,e.x,g.x,h.x),he(a,d.y,e.y,g.y,h.y),he(a,d.z,e.z,g.z,h.z)),c},je.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this},je.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a},je.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this},ke.prototype=Object.create(Vd.prototype),ke.prototype.constructor=ke,ke.prototype.isLineCurve=!0,ke.prototype.getPoint=function(a,b){var d=b||new c;return 1===a?d.copy(this.v2):(d.copy(this.v2).sub(this.v1),d.multiplyScalar(a).add(this.v1)),d},ke.prototype.getPointAt=function(a,b){return this.getPoint(a,b)},ke.prototype.getTangent=function(){var a=this.v2.clone().sub(this.v1);return a.normalize()},ke.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this},ke.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},ke.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this},le.prototype=Object.create(Vd.prototype),le.prototype.constructor=le,le.prototype.isLineCurve3=!0,le.prototype.getPoint=function(a,b){var c=b||new f;return 1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c},le.prototype.getPointAt=function(a,b){return this.getPoint(a,b)},le.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this},le.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},le.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this},me.prototype=Object.create(Vd.prototype),me.prototype.constructor=me,me.prototype.isQuadraticBezierCurve=!0,me.prototype.getPoint=function(a,b){var d=b||new c,e=this.v0,f=this.v1,g=this.v2;return d.set(ce(a,e.x,f.x,g.x),ce(a,e.y,f.y,g.y)),d},me.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this},me.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},me.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this},ne.prototype=Object.create(Vd.prototype),ne.prototype.constructor=ne,ne.prototype.isQuadraticBezierCurve3=!0,ne.prototype.getPoint=function(a,b){var c=b||new f,d=this.v0,e=this.v1,g=this.v2;return c.set(ce(a,d.x,e.x,g.x),ce(a,d.y,e.y,g.y),ce(a,d.z,e.z,g.z)),c},ne.prototype.copy=function(a){return Vd.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this},ne.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},ne.prototype.fromJSON=function(a){return Vd.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this},oe.prototype=Object.create(Vd.prototype),oe.prototype.constructor=oe,oe.prototype.isSplineCurve=!0,oe.prototype.getPoint=function(a,b){var d=b||new c,e=this.points,f=(e.length-1)*a,g=Math.floor(f),h=f-g,i=e[0===g?g:g-1],j=e[g],k=e[g>e.length-2?e.length-1:g+1],l=e[g>e.length-3?e.length-1:g+2];return d.set($d(h,i.x,j.x,k.x,l.x),$d(h,i.y,j.y,k.y,l.y)),d},oe.prototype.copy=function(a){Vd.prototype.copy.call(this,a),this.points=[];for(var b=0,c=a.points.length;c>b;b++){var d=a.points[b];this.points.push(d.clone())}return this},oe.prototype.toJSON=function(){var a=Vd.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;c>b;b++){var d=this.points[b];a.points.push(d.toArray())}return a},oe.prototype.fromJSON=function(a){Vd.prototype.fromJSON.call(this,a),this.points=[];for(var b=0,d=a.points.length;d>b;b++){var e=a.points[b];this.points.push((new c).fromArray(e))}return this};var Ol=Object.freeze({ArcCurve:Xd,CatmullRomCurve3:Zd,CubicBezierCurve:ie,CubicBezierCurve3:je,EllipseCurve:Wd,LineCurve:ke,LineCurve3:le,QuadraticBezierCurve:me,QuadraticBezierCurve3:ne,SplineCurve:oe});pe.prototype=Object.assign(Object.create(Vd.prototype),{constructor:pe,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ke(b,a))},getPoint:function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]>=b){var e=c[d]-b,f=this.curves[d],g=f.getLength(),h=0===g?0:1-e/g;return f.getPointAt(h)}d++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;d>c;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a,a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;a>=c;c++)b.push(this.getPoint(c/a));return this.autoClose&&b.push(b[0]),b},getPoints:function(a){a=a||12;for(var b,c=[],d=0,e=this.curves;d<e.length;d++)for(var f=e[d],g=f&&f.isEllipseCurve?2*a:f&&(f.isLineCurve||f.isLineCurve3)?1:f&&f.isSplineCurve?a*f.points.length:a,h=f.getPoints(g),i=0;i<h.length;i++){var j=h[i];b&&b.equals(j)||(c.push(j),b=j)}return this.autoClose&&c.length>1&&!c[c.length-1].equals(c[0])&&c.push(c[0]),c},copy:function(a){Vd.prototype.copy.call(this,a),this.curves=[];for(var b=0,c=a.curves.length;c>b;b++){var d=a.curves[b];this.curves.push(d.clone())}return this.autoClose=a.autoClose,this},toJSON:function(){var a=Vd.prototype.toJSON.call(this);a.autoClose=this.autoClose,a.curves=[];for(var b=0,c=this.curves.length;c>b;b++){var d=this.curves[b];a.curves.push(d.toJSON())}return a},fromJSON:function(a){Vd.prototype.fromJSON.call(this,a),this.autoClose=a.autoClose,this.curves=[];for(var b=0,c=a.curves.length;c>b;b++){var d=a.curves[b];this.curves.push((new Ol[d.type]).fromJSON(d))}return this}}),qe.prototype=Object.assign(Object.create(pe.prototype),{constructor:qe,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;c>b;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var d=new ke(this.currentPoint.clone(),new c(a,b));this.curves.push(d),this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,d,e){var f=new me(this.currentPoint.clone(),new c(a,b),new c(d,e));this.curves.push(f),this.currentPoint.set(d,e)},bezierCurveTo:function(a,b,d,e,f,g){var h=new ie(this.currentPoint.clone(),new c(a,b),new c(d,e),new c(f,g));this.curves.push(h),this.currentPoint.set(f,g)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),c=new oe(b);this.curves.push(c),this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){var g=this.currentPoint.x,h=this.currentPoint.y;this.absarc(a+g,b+h,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){var i=this.currentPoint.x,j=this.currentPoint.y;this.absellipse(a+i,b+j,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){var i=new Wd(a,b,c,d,e,f,g,h);if(this.curves.length>0){var j=i.getPoint(0);j.equals(this.currentPoint)||this.lineTo(j.x,j.y)}this.curves.push(i);var k=i.getPoint(1);this.currentPoint.copy(k)},copy:function(a){return pe.prototype.copy.call(this,a),this.currentPoint.copy(a.currentPoint),this},toJSON:function(){var a=pe.prototype.toJSON.call(this);return a.currentPoint=this.currentPoint.toArray(),a},fromJSON:function(a){return pe.prototype.fromJSON.call(this,a),this.currentPoint.fromArray(a.currentPoint),this}}),re.prototype=Object.assign(Object.create(qe.prototype),{constructor:re,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;d>c;c++)b[c]=this.holes[c].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){qe.prototype.copy.call(this,a),this.holes=[];for(var b=0,c=a.holes.length;c>b;b++){var d=a.holes[b];this.holes.push(d.clone())}return this},toJSON:function(){var a=qe.prototype.toJSON.call(this);a.uuid=this.uuid,a.holes=[];for(var b=0,c=this.holes.length;c>b;b++){var d=this.holes[b];a.holes.push(d.toJSON())}return a},fromJSON:function(a){qe.prototype.fromJSON.call(this,a),this.uuid=a.uuid,this.holes=[];for(var b=0,c=a.holes.length;c>b;b++){var d=a.holes[b];this.holes.push((new qe).fromJSON(d))}return this}}),se.prototype=Object.assign(Object.create(z.prototype),{constructor:se,isLight:!0,copy:function(a){return z.prototype.copy.call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this},toJSON:function(a){var b=z.prototype.toJSON.call(this,a);return b.object.color=this.color.getHex(),b.object.intensity=this.intensity,void 0!==this.groundColor&&(b.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(b.object.distance=this.distance),void 0!==this.angle&&(b.object.angle=this.angle),void 0!==this.decay&&(b.object.decay=this.decay),void 0!==this.penumbra&&(b.object.penumbra=this.penumbra),void 0!==this.shadow&&(b.object.shadow=this.shadow.toJSON()),b}}),te.prototype=Object.assign(Object.create(se.prototype),{constructor:te,isHemisphereLight:!0,copy:function(a){return se.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}),Object.assign(ue.prototype,{copy:function(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};return 0!==this.bias&&(a.bias=this.bias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}),ve.prototype=Object.assign(Object.create(ue.prototype),{constructor:ve,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*Ri.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height,e=a.distance||b.far;(c!==b.fov||d!==b.aspect||e!==b.far)&&(b.fov=c,b.aspect=d,b.far=e,b.updateProjectionMatrix())}}),we.prototype=Object.assign(Object.create(se.prototype),{constructor:we,isSpotLight:!0,copy:function(a){return se.prototype.copy.call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),xe.prototype=Object.assign(Object.create(se.prototype),{constructor:xe,isPointLight:!0,copy:function(a){return se.prototype.copy.call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}),ye.prototype=Object.assign(Object.create(yb.prototype),{constructor:ye,isOrthographicCamera:!0,copy:function(a,b){return yb.prototype.copy.call(this,a,b),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=b,this.view.offsetX=c,this.view.offsetY=d,this.view.width=e,this.view.height=f,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,f=c+a,g=d+b,h=d-b;if(null!==this.view&&this.view.enabled){var i=this.zoom/(this.view.width/this.view.fullWidth),j=this.zoom/(this.view.height/this.view.fullHeight),k=(this.right-this.left)/this.view.width,l=(this.top-this.bottom)/this.view.height;e+=k*(this.view.offsetX/i),f=e+k*(this.view.width/i),g-=l*(this.view.offsetY/j),h=g-l*(this.view.height/j)}this.projectionMatrix.makeOrthographic(e,f,g,h,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){var b=z.prototype.toJSON.call(this,a);return b.object.zoom=this.zoom,b.object.left=this.left,b.object.right=this.right,b.object.top=this.top,b.object.bottom=this.bottom,b.object.near=this.near,b.object.far=this.far,null!==this.view&&(b.object.view=Object.assign({},this.view)),b}}),ze.prototype=Object.assign(Object.create(ue.prototype),{constructor:ze}),Ae.prototype=Object.assign(Object.create(se.prototype),{constructor:Ae,isDirectionalLight:!0,copy:function(a){return se.prototype.copy.call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Be.prototype=Object.assign(Object.create(se.prototype),{constructor:Be,isAmbientLight:!0}),Ce.prototype=Object.assign(Object.create(se.prototype),{constructor:Ce,isRectAreaLight:!0,copy:function(a){return se.prototype.copy.call(this,a),this.width=a.width,this.height=a.height,this},toJSON:function(a){var b=se.prototype.toJSON.call(this,a);return b.object.width=this.width,b.object.height=this.height,b}}),Object.assign(De.prototype,{load:function(a,b,c,d){var e=this,f=new Od(e.manager);f.setPath(e.path),f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){function b(a){return void 0===e[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a),e[a]}var e=this.textures,h=new Fl[a.type];if(void 0!==a.uuid&&(h.uuid=a.uuid),void 0!==a.name&&(h.name=a.name),void 0!==a.color&&h.color.setHex(a.color),void 0!==a.roughness&&(h.roughness=a.roughness),void 0!==a.metalness&&(h.metalness=a.metalness),void 0!==a.emissive&&h.emissive.setHex(a.emissive),void 0!==a.specular&&h.specular.setHex(a.specular),void 0!==a.shininess&&(h.shininess=a.shininess),void 0!==a.clearCoat&&(h.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(h.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.vertexColors&&(h.vertexColors=a.vertexColors),void 0!==a.fog&&(h.fog=a.fog),void 0!==a.flatShading&&(h.flatShading=a.flatShading),void 0!==a.blending&&(h.blending=a.blending),void 0!==a.combine&&(h.combine=a.combine),void 0!==a.side&&(h.side=a.side),void 0!==a.opacity&&(h.opacity=a.opacity),void 0!==a.transparent&&(h.transparent=a.transparent),void 0!==a.alphaTest&&(h.alphaTest=a.alphaTest),void 0!==a.depthTest&&(h.depthTest=a.depthTest),void 0!==a.depthWrite&&(h.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(h.colorWrite=a.colorWrite),void 0!==a.wireframe&&(h.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(h.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(h.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(h.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.rotation&&(h.rotation=a.rotation),1!==a.linewidth&&(h.linewidth=a.linewidth),void 0!==a.dashSize&&(h.dashSize=a.dashSize),void 0!==a.gapSize&&(h.gapSize=a.gapSize),void 0!==a.scale&&(h.scale=a.scale),void 0!==a.polygonOffset&&(h.polygonOffset=a.polygonOffset),void 0!==a.polygonOffsetFactor&&(h.polygonOffsetFactor=a.polygonOffsetFactor),void 0!==a.polygonOffsetUnits&&(h.polygonOffsetUnits=a.polygonOffsetUnits),void 0!==a.skinning&&(h.skinning=a.skinning),void 0!==a.morphTargets&&(h.morphTargets=a.morphTargets),void 0!==a.dithering&&(h.dithering=a.dithering),void 0!==a.visible&&(h.visible=a.visible),void 0!==a.userData&&(h.userData=a.userData),void 0!==a.uniforms)for(var j in a.uniforms){var k=a.uniforms[j];switch(h.uniforms[j]={},k.type){case"t":h.uniforms[j].value=b(k.value);break;case"c":h.uniforms[j].value=(new t).setHex(k.value);break;case"v2":h.uniforms[j].value=(new c).fromArray(k.value);break;case"v3":h.uniforms[j].value=(new f).fromArray(k.value);break;case"v4":h.uniforms[j].value=(new i).fromArray(k.value);break;case"m3":h.uniforms[j].value=(new g).fromArray(k.value);case"m4":h.uniforms[j].value=(new d).fromArray(k.value);break;default:h.uniforms[j].value=k.value}}if(void 0!==a.defines&&(h.defines=a.defines),void 0!==a.vertexShader&&(h.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(h.fragmentShader=a.fragmentShader),void 0!==a.extensions)for(var l in a.extensions)h.extensions[l]=a.extensions[l];if(void 0!==a.shading&&(h.flatShading=1===a.shading),void 0!==a.size&&(h.size=a.size),void 0!==a.sizeAttenuation&&(h.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(h.map=b(a.map)),void 0!==a.alphaMap&&(h.alphaMap=b(a.alphaMap),h.transparent=!0),void 0!==a.bumpMap&&(h.bumpMap=b(a.bumpMap)),void 0!==a.bumpScale&&(h.bumpScale=a.bumpScale),void 0!==a.normalMap&&(h.normalMap=b(a.normalMap)),void 0!==a.normalMapType&&(h.normalMapType=a.normalMapType),void 0!==a.normalScale){var m=a.normalScale;Array.isArray(m)===!1&&(m=[m,m]),h.normalScale=(new c).fromArray(m)}return void 0!==a.displacementMap&&(h.displacementMap=b(a.displacementMap)),void 0!==a.displacementScale&&(h.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(h.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(h.roughnessMap=b(a.roughnessMap)),void 0!==a.metalnessMap&&(h.metalnessMap=b(a.metalnessMap)),void 0!==a.emissiveMap&&(h.emissiveMap=b(a.emissiveMap)),void 0!==a.emissiveIntensity&&(h.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(h.specularMap=b(a.specularMap)),void 0!==a.envMap&&(h.envMap=b(a.envMap)),void 0!==a.envMapIntensity&&(h.envMapIntensity=a.envMapIntensity),void 0!==a.reflectivity&&(h.reflectivity=a.reflectivity),void 0!==a.lightMap&&(h.lightMap=b(a.lightMap)),void 0!==a.lightMapIntensity&&(h.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(h.aoMap=b(a.aoMap)),void 0!==a.aoMapIntensity&&(h.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(h.gradientMap=b(a.gradientMap)),h},setPath:function(a){return this.path=a,this},setTextures:function(a){return this.textures=a,this}});var Pl={decodeText:function(a){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,d=a.length;d>c;c++)b+=String.fromCharCode(a[c]);return decodeURIComponent(escape(b))},extractUrlBase:function(a){var b=a.lastIndexOf("/");return-1===b?"./":a.substr(0,b+1)}};Object.assign(Ee.prototype,{load:function(a,b,c,d){var e=this,f=new Od(e.manager);f.setPath(e.path),f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new N,c=a.data.index;if(void 0!==c){var d=new Ql[c.type](c.array);b.setIndex(new B(d,1))}var e=a.data.attributes;for(var g in e){var h=e[g],d=new Ql[h.type](h.array);b.addAttribute(g,new B(d,h.itemSize,h.normalized))}var i=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==i)for(var j=0,k=i.length;j!==k;++j){var l=i[j];b.addGroup(l.start,l.count,l.materialIndex)}var m=a.data.boundingSphere;if(void 0!==m){var n=new f;void 0!==m.center&&n.fromArray(m.center),b.boundingSphere=new o(n,m.radius)}return a.name&&(b.name=a.name),a.userData&&(b.userData=a.userData),b},setPath:function(a){return this.path=a,this}});var Ql={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(Fe.prototype,{crossOrigin:"anonymous",load:function(a,b,c,d){var e=this,f=void 0===this.path?Pl.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||f;var g=new Od(e.manager);g.setPath(this.path),g.load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(g){return void 0!==d&&d(g),void console.error("THREE:ObjectLoader: Can't parse "+a+".",g.message)}var h=f.metadata;return void 0===h||void 0===h.type||"geometry"===h.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+a):void e.parse(f,b)},c,d)},setPath:function(a){return this.path=a,this},setResourcePath:function(a){return this.resourcePath=a,this},setCrossOrigin:function(a){return this.crossOrigin=a,this},parse:function(a,b){var c=this.parseShape(a.shapes),d=this.parseGeometries(a.geometries,c),e=this.parseImages(a.images,function(){void 0!==b&&b(h)}),f=this.parseTextures(a.textures,e),g=this.parseMaterials(a.materials,f),h=this.parseObject(a.object,d,g);return a.animations&&(h.animations=this.parseAnimations(a.animations)),(void 0===a.images||0===a.images.length)&&void 0!==b&&b(h),h},parseShape:function(a){var b={};if(void 0!==a)for(var c=0,d=a.length;d>c;c++){var e=(new re).fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function(a,b){var c={};if(void 0!==a)for(var d=new Ee,e=0,f=a.length;f>e;e++){var g,h=a[e];switch(h.type){case"PlaneGeometry":case"PlaneBufferGeometry":g=new El[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":g=new El[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":g=new El[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":g=new El[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":g=new El[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":g=new El[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":g=new El[h.type](h.radius,h.detail);break;case"RingGeometry":case"RingBufferGeometry":g=new El[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":g=new El[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":g=new El[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case"LatheGeometry":case"LatheBufferGeometry":g=new El[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":g=new El[h.type](h.vertices,h.indices,h.radius,h.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var i=[],j=0,k=h.shapes.length;k>j;j++){var l=b[h.shapes[j]];i.push(l)}g=new El[h.type](i,h.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var i=[],j=0,k=h.shapes.length;k>j;j++){var l=b[h.shapes[j]];i.push(l)}var m=h.options.extrudePath;void 0!==m&&(h.options.extrudePath=(new Ol[m.type]).fromJSON(m)),g=new El[h.type](i,h.options);break;case"BufferGeometry":g=d.parse(h);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var n=new THREE.LegacyJSONLoader;g=n.parse(h,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}g.uuid=h.uuid,void 0!==h.name&&(g.name=h.name),g.isBufferGeometry===!0&&void 0!==h.userData&&(g.userData=h.userData),c[h.uuid]=g}return c},parseMaterials:function(a,b){var c={},d={};if(void 0!==a){var e=new De;e.setTextures(b);for(var f=0,g=a.length;g>f;f++){var h=a[f];if("MultiMaterial"===h.type){for(var i=[],j=0;j<h.materials.length;j++){var k=h.materials[j];void 0===c[k.uuid]&&(c[k.uuid]=e.parse(k)),i.push(c[k.uuid])}d[h.uuid]=i}else void 0===c[h.uuid]&&(c[h.uuid]=e.parse(h)),d[h.uuid]=c[h.uuid]}}return d},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=Kd.parse(d);void 0!==d.uuid&&(e.uuid=d.uuid),b.push(e)}return b},parseImages:function(a,b){function c(a){return d.manager.itemStart(a),g.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemError(a),d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&a.length>0){var f=new Nd(b),g=new Sd(f);g.setCrossOrigin(this.crossOrigin);for(var h=0,i=a.length;i>h;h++){var j=a[h],k=j.url;if(Array.isArray(k)){e[j.uuid]=[];for(var l=0,m=k.length;m>l;l++){var n=k[l],o=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:d.resourcePath+n;e[j.uuid].push(c(o))}}else{var o=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(j.url)?j.url:d.resourcePath+j.url;e[j.uuid]=c(o)}}}return e},parseTextures:function(a,b){function c(a,b){return"number"==typeof a?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),b[a])}var d={};if(void 0!==a)for(var e=0,f=a.length;f>e;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid),void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var i;i=Array.isArray(b[g.image])?new ha(b[g.image]):new h(b[g.image]),i.needsUpdate=!0,i.uuid=g.uuid,void 0!==g.name&&(i.name=g.name),void 0!==g.mapping&&(i.mapping=c(g.mapping,Rl)),void 0!==g.offset&&i.offset.fromArray(g.offset),void 0!==g.repeat&&i.repeat.fromArray(g.repeat),void 0!==g.center&&i.center.fromArray(g.center),void 0!==g.rotation&&(i.rotation=g.rotation),void 0!==g.wrap&&(i.wrapS=c(g.wrap[0],Sl),i.wrapT=c(g.wrap[1],Sl)),void 0!==g.format&&(i.format=g.format),void 0!==g.type&&(i.type=g.type),void 0!==g.encoding&&(i.encoding=g.encoding),void 0!==g.minFilter&&(i.minFilter=c(g.minFilter,Tl)),void 0!==g.magFilter&&(i.magFilter=c(g.magFilter,Tl)),void 0!==g.anisotropy&&(i.anisotropy=g.anisotropy),void 0!==g.flipY&&(i.flipY=g.flipY),void 0!==g.premultiplyAlpha&&(i.premultiplyAlpha=g.premultiplyAlpha),void 0!==g.unpackAlignment&&(i.unpackAlignment=g.unpackAlignment),d[g.uuid]=i}return d},parseObject:function(a,b,c){function d(a){return void 0===b[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a),b[a]}function e(a){if(void 0===a)return void 0;if(Array.isArray(a)){for(var b=[],d=0,e=a.length;e>d;d++){var f=a[d];void 0===c[f]&&console.warn("THREE.ObjectLoader: Undefined material",f),b.push(c[f])}return b}return void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),c[a]}var f;switch(a.type){case"Scene":f=new Hb,void 0!==a.background&&Number.isInteger(a.background)&&(f.background=new t(a.background)),void 0!==a.fog&&("Fog"===a.fog.type?f.fog=new Gb(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(f.fog=new Fb(a.fog.color,a.fog.density)));break;case"PerspectiveCamera":f=new zb(a.fov,a.aspect,a.near,a.far),void 0!==a.focus&&(f.focus=a.focus),void 0!==a.zoom&&(f.zoom=a.zoom),void 0!==a.filmGauge&&(f.filmGauge=a.filmGauge),void 0!==a.filmOffset&&(f.filmOffset=a.filmOffset),void 0!==a.view&&(f.view=Object.assign({},a.view));break;case"OrthographicCamera":f=new ye(a.left,a.right,a.top,a.bottom,a.near,a.far),void 0!==a.zoom&&(f.zoom=a.zoom),void 0!==a.view&&(f.view=Object.assign({},a.view));break;case"AmbientLight":f=new Be(a.color,a.intensity);break;case"DirectionalLight":f=new Ae(a.color,a.intensity);break;case"PointLight":f=new xe(a.color,a.intensity,a.distance,a.decay);break;case"RectAreaLight":f=new Ce(a.color,a.intensity,a.width,a.height);break;case"SpotLight":f=new we(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case"HemisphereLight":f=new te(a.color,a.groundColor,a.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var g=d(a.geometry),h=e(a.material);f=g.bones&&g.bones.length>0?new Nb(g,h):new X(g,h),void 0!==a.drawMode&&f.setDrawMode(a.drawMode);break;case"LOD":f=new Mb;break;case"Line":f=new Rb(d(a.geometry),e(a.material),a.mode);break;case"LineLoop":f=new Tb(d(a.geometry),e(a.material));break;case"LineSegments":f=new Sb(d(a.geometry),e(a.material));break;case"PointCloud":case"Points":f=new Vb(d(a.geometry),e(a.material));break;case"Sprite":f=new Lb(e(a.material));break;case"Group":f=new xb;break;default:f=new z}if(f.uuid=a.uuid,void 0!==a.name&&(f.name=a.name),void 0!==a.matrix?(f.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(f.matrixAutoUpdate=a.matrixAutoUpdate),f.matrixAutoUpdate&&f.matrix.decompose(f.position,f.quaternion,f.scale)):(void 0!==a.position&&f.position.fromArray(a.position),void 0!==a.rotation&&f.rotation.fromArray(a.rotation),void 0!==a.quaternion&&f.quaternion.fromArray(a.quaternion),void 0!==a.scale&&f.scale.fromArray(a.scale)),void 0!==a.castShadow&&(f.castShadow=a.castShadow),void 0!==a.receiveShadow&&(f.receiveShadow=a.receiveShadow),a.shadow&&(void 0!==a.shadow.bias&&(f.shadow.bias=a.shadow.bias),void 0!==a.shadow.radius&&(f.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&f.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(f.shadow.camera=this.parseObject(a.shadow.camera))),void 0!==a.visible&&(f.visible=a.visible),void 0!==a.frustumCulled&&(f.frustumCulled=a.frustumCulled),void 0!==a.renderOrder&&(f.renderOrder=a.renderOrder),void 0!==a.userData&&(f.userData=a.userData),void 0!==a.layers&&(f.layers.mask=a.layers),void 0!==a.children)for(var i=a.children,j=0;j<i.length;j++)f.add(this.parseObject(i[j],b,c));if("LOD"===a.type)for(var k=a.levels,l=0;l<k.length;l++){var m=k[l],n=f.getObjectByProperty("uuid",m.object);void 0!==n&&f.addLevel(n,m.distance)}return f}});var Rl={UVMapping:mh,CubeReflectionMapping:nh,CubeRefractionMapping:oh,EquirectangularReflectionMapping:ph,EquirectangularRefractionMapping:qh,SphericalReflectionMapping:rh,CubeUVReflectionMapping:sh,CubeUVRefractionMapping:th},Sl={RepeatWrapping:uh,ClampToEdgeWrapping:vh,MirroredRepeatWrapping:wh},Tl={NearestFilter:xh,NearestMipMapNearestFilter:yh,NearestMipMapLinearFilter:zh,LinearFilter:Ah,LinearMipMapNearestFilter:Bh,LinearMipMapLinearFilter:Ch};Ge.prototype={constructor:Ge,setOptions:function(a){return this.options=a,this},load:function(a,b,c,d){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var e=this,f=Hl.get(a);return void 0!==f?(e.manager.itemStart(a),setTimeout(function(){b&&b(f),e.manager.itemEnd(a)},0),f):void fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Hl.add(a,c),b&&b(c),e.manager.itemEnd(a)})["catch"](function(b){d&&d(b),e.manager.itemError(a),e.manager.itemEnd(a)})},setCrossOrigin:function(){return this},setPath:function(a){return this.path=a,this}},Object.assign(He.prototype,{moveTo:function(a,b){this.currentPath=new qe,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=new re;f.curves=e.curves,b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;c>f;e=f++){var g=b[e],h=b[f],i=h.x-g.x,j=h.y-g.y;if(Math.abs(j)>Number.EPSILON){if(0>j&&(g=b[f],i=-i,h=b[e],j=-j),a.y<g.y||a.y>h.y)continue;if(a.y===g.y){if(a.x===g.x)return!0}else{var k=j*(a.x-g.x)-i*(a.y-g.y);if(0===k)return!0;if(0>k)continue;d=!d}}else{if(a.y!==g.y)continue;if(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x)return!0;
}}return d}var e=Cl.isClockWise,f=this.subPaths;if(0===f.length)return[];if(b===!0)return c(f);var g,h,i,j=[];if(1===f.length)return h=f[0],i=new re,i.curves=h.curves,j.push(i),j;var k=!e(f[0].getPoints());k=a?!k:k;var l,m=[],n=[],o=[],p=0;n[p]=void 0,o[p]=[];for(var q=0,r=f.length;r>q;q++)h=f[q],l=h.getPoints(),g=e(l),g=a?!g:g,g?(!k&&n[p]&&p++,n[p]={s:new re,p:l},n[p].s.curves=h.curves,k&&p++,o[p]=[]):o[p].push({h:h,p:l[0]});if(!n[0])return c(f);if(n.length>1){for(var s=!1,t=[],u=0,v=n.length;v>u;u++)m[u]=[];for(var u=0,v=n.length;v>u;u++)for(var w=o[u],x=0;x<w.length;x++){for(var y=w[x],z=!0,A=0;A<n.length;A++)d(y.p,n[A].p)&&(u!==A&&t.push({froms:u,tos:A,hole:x}),z?(z=!1,m[A].push(y)):s=!0);z&&m[u].push(y)}t.length>0&&(s||(o=m))}for(var B,q=0,C=n.length;C>q;q++){i=n[q].s,j.push(i),B=o[q];for(var D=0,E=B.length;E>D;D++)i.holes.push(B[D].h)}return j}}),Object.assign(Ie.prototype,{isFont:!0,generateShapes:function(a,b){void 0===b&&(b=100);for(var c=[],d=Je(a,b,this.data),e=0,f=d.length;f>e;e++)Array.prototype.push.apply(c,d[e].toShapes());return c}}),Object.assign(Le.prototype,{load:function(a,b,c,d){var e=this,f=new Od(this.manager);f.setPath(this.path),f.load(a,function(a){var c;try{c=JSON.parse(a)}catch(d){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}var f=e.parse(c);b&&b(f)},c,d)},parse:function(a){return new Ie(a)},setPath:function(a){return this.path=a,this}}),Me.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;d>c;c+=2){var e=b[c],f=b[c+1];if(e.test(a))return f}return null}},Object.assign(Me.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:Bg,NormalBlending:Cg,AdditiveBlending:Dg,SubtractiveBlending:Eg,MultiplyBlending:Fg,CustomBlending:Gg},b=new t,c=new Ud,d=new De;return function(e,f,g){function h(a,b,d,e,h){var j,k=f+a,l=Me.Handlers.get(k);null!==l?j=l.load(k):(c.setCrossOrigin(g),j=c.load(k)),void 0!==b&&(j.repeat.fromArray(b),1!==b[0]&&(j.wrapS=uh),1!==b[1]&&(j.wrapT=uh)),void 0!==d&&j.offset.fromArray(d),void 0!==e&&("repeat"===e[0]&&(j.wrapS=uh),"mirror"===e[0]&&(j.wrapS=wh),"repeat"===e[1]&&(j.wrapT=uh),"mirror"===e[1]&&(j.wrapT=wh)),void 0!==h&&(j.anisotropy=h);var m=Ri.generateUUID();return i[m]=j,m}var i={},j={uuid:Ri.generateUUID(),type:"MeshLambertMaterial"};for(var k in e){var l=e[k];switch(k){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":j.name=l;break;case"blending":j.blending=a[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",k,"is no longer supported.");break;case"colorDiffuse":j.color=b.fromArray(l).getHex();break;case"colorSpecular":j.specular=b.fromArray(l).getHex();break;case"colorEmissive":j.emissive=b.fromArray(l).getHex();break;case"specularCoef":j.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(j.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(j.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(j.type="MeshStandardMaterial");break;case"mapDiffuse":j.map=h(l,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":j.emissiveMap=h(l,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":j.lightMap=h(l,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":j.aoMap=h(l,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":j.bumpMap=h(l,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":j.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":j.normalMap=h(l,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":j.normalScale=l;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":j.specularMap=h(l,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":j.metalnessMap=h(l,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":j.roughnessMap=h(l,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":j.alphaMap=h(l,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":j.side=ug;break;case"doubleSided":j.side=vg;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),j.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":j[k]=l;break;case"vertexColors":l===!0&&(j.vertexColors=Ag),"face"===l&&(j.vertexColors=zg);break;default:console.error("THREE.Loader.createMaterial: Unsupported",k,l)}}return"MeshBasicMaterial"===j.type&&delete j.emissive,"MeshPhongMaterial"!==j.type&&delete j.specular,j.opacity<1&&(j.transparent=!0),d.setTextures(i),d.parse(j)}}()});var Ul,Vl={getContext:function(){return void 0===Ul&&(Ul=new(window.AudioContext||window.webkitAudioContext)),Ul},setContext:function(a){Ul=a}};Object.assign(Ne.prototype,{load:function(a,b,c,d){var e=new Od(this.manager);e.setResponseType("arraybuffer"),e.setPath(this.path),e.load(a,function(a){var c=a.slice(0),d=Vl.getContext();d.decodeAudioData(c,function(a){b(a)})},c,d)},setPath:function(a){return this.path=a,this}}),Object.assign(Oe.prototype,{update:function(){var a,b,c,e,f,g,h,i,j=new d,k=new d;return function(d){var l=a!==this||b!==d.focus||c!==d.fov||e!==d.aspect*this.aspect||f!==d.near||g!==d.far||h!==d.zoom||i!==this.eyeSep;if(l){a=this,b=d.focus,c=d.fov,e=d.aspect*this.aspect,f=d.near,g=d.far,h=d.zoom;var m=d.projectionMatrix.clone();i=this.eyeSep/2;var n,o,p=i*f/b,q=f*Math.tan(Ri.DEG2RAD*c*.5)/h;k.elements[12]=-i,j.elements[12]=i,n=-q*e+p,o=q*e+p,m.elements[0]=2*f/(o-n),m.elements[8]=(o+n)/(o-n),this.cameraL.projectionMatrix.copy(m),n=-q*e-p,o=q*e-p,m.elements[0]=2*f/(o-n),m.elements[8]=(o+n)/(o-n),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(d.matrixWorld).multiply(k),this.cameraR.matrixWorld.copy(d.matrixWorld).multiply(j)}}()}),Pe.prototype=Object.create(z.prototype),Pe.prototype.constructor=Pe,Object.assign(Qe.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"==typeof performance?Date:performance).now();a=(b-this.oldTime)/1e3,this.oldTime=b,this.elapsedTime+=a}return a}}),Re.prototype=Object.assign(Object.create(z.prototype),{constructor:Re,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(a){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this},updateMatrixWorld:function(){var a=new f,b=new e,c=new f,d=new f,g=new Qe;return function(e){z.prototype.updateMatrixWorld.call(this,e);var f=this.context.listener,h=this.up;if(this.timeDelta=g.getDelta(),this.matrixWorld.decompose(a,b,c),d.set(0,0,-1).applyQuaternion(b),f.positionX){var i=this.context.currentTime+this.timeDelta;f.positionX.linearRampToValueAtTime(a.x,i),f.positionY.linearRampToValueAtTime(a.y,i),f.positionZ.linearRampToValueAtTime(a.z,i),f.forwardX.linearRampToValueAtTime(d.x,i),f.forwardY.linearRampToValueAtTime(d.y,i),f.forwardZ.linearRampToValueAtTime(d.z,i),f.upX.linearRampToValueAtTime(h.x,i),f.upY.linearRampToValueAtTime(h.y,i),f.upZ.linearRampToValueAtTime(h.z,i)}else f.setPosition(a.x,a.y,a.z),f.setOrientation(d.x,d.y,d.z,h.x,h.y,h.z)}}()}),Se.prototype=Object.assign(Object.create(z.prototype),{constructor:Se,getOutput:function(){return this.gain},setNodeSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this},setMediaElementSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this},setBuffer:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,a.start(this.startTime,this.offset),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.isPlaying===!0&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;b>a;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;b>a;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){return a||(a=[]),this.isPlaying===!0?(this.disconnect(),this.filters=a,this.connect()):this.filters=a,this},setDetune:function(a){return this.detune=a,void 0!==this.source.detune?(this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this):void 0},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=a,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=a,this.isPlaying===!0&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}),Te.prototype=Object.assign(Object.create(Se.prototype),{constructor:Te,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){return this.panner.refDistance=a,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){return this.panner.rolloffFactor=a,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){return this.panner.distanceModel=a,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){return this.panner.maxDistance=a,this},setDirectionalCone:function(a,b,c){return this.panner.coneInnerAngle=a,this.panner.coneOuterAngle=b,this.panner.coneOuterGain=c,this},updateMatrixWorld:function(){var a=new f,b=new e,c=new f,d=new f;return function(e){if(z.prototype.updateMatrixWorld.call(this,e),this.isPlaying!==!1){this.matrixWorld.decompose(a,b,c),d.set(0,0,1).applyQuaternion(b);var f=this.panner;if(f.positionX){var g=this.context.currentTime+this.listener.timeDelta;f.positionX.linearRampToValueAtTime(a.x,g),f.positionY.linearRampToValueAtTime(a.y,g),f.positionZ.linearRampToValueAtTime(a.z,g),f.orientationX.linearRampToValueAtTime(d.x,g),f.orientationY.linearRampToValueAtTime(d.y,g),f.orientationZ.linearRampToValueAtTime(d.z,g)}else f.setPosition(a.x,a.y,a.z),f.setOrientation(d.x,d.y,d.z)}}}()}),Object.assign(Ue.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}}),Object.assign(Ve.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize,e=a*d+d,f=this.cumulativeWeight;if(0===f){for(var g=0;g!==d;++g)c[e+g]=c[g];f=b}else{f+=b;var h=b/f;this._mixBufferRegion(c,e,0,h,d)}this.cumulativeWeight=f},apply:function(a){var b=this.valueSize,c=this.buffer,d=a*b+b,e=this.cumulativeWeight,f=this.binding;if(this.cumulativeWeight=0,1>e){var g=3*b;this._mixBufferRegion(c,d,g,1-e,b)}for(var h=b,i=b+b;h!==i;++h)if(c[h]!==c[h+b]){f.setValue(c,d);break}},saveOriginalState:function(){var a=this.binding,b=this.buffer,c=this.valueSize,d=3*c;a.getValue(b,d);for(var e=c,f=d;e!==f;++e)b[e]=b[d+e%c];this.cumulativeWeight=0},restoreOriginalState:function(){var a=3*this.valueSize;this.binding.setValue(this.buffer,a)},_select:function(a,b,c,d,e){if(d>=.5)for(var f=0;f!==e;++f)a[b+f]=a[c+f]},_slerp:function(a,b,c,d){e.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});var Wl="\\[\\]\\.:\\/";Object.assign(We.prototype,{getValue:function(a,b){this.bind();var c=this._targetGroup.nCachedObjects_,d=this._bindings[c];void 0!==d&&d.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}}),Object.assign(Xe,{Composite:We,create:function(a,b,c){return a&&a.isAnimationObjectGroup?new Xe.Composite(a,b,c):new Xe(a,b,c)},sanitizeNodeName:function(){var a=new RegExp("["+Wl+"]","g");return function(b){return b.replace(/\s/g,"_").replace(a,"")}}(),parseTrackName:function(){var a="[^"+Wl+"]",b="[^"+Wl.replace("\\.","")+"]",c=/((?:WC+[\/:])*)/.source.replace("WC",a),d=/(WCOD+)?/.source.replace("WCOD",b),e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",a),f=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",a),g=new RegExp("^"+c+d+e+f+"$"),h=["material","materials","bones"];return function(a){var b=g.exec(a);if(!b)throw new Error("PropertyBinding: Cannot parse trackName: "+a);var c={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]},d=c.nodeName&&c.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){var e=c.nodeName.substring(d+1);-1!==h.indexOf(e)&&(c.nodeName=c.nodeName.substring(0,d),c.objectName=e)}if(null===c.propertyName||0===c.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return c}}(),findNode:function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b)return e;var f=d(e.children);if(f)return f}return null},e=d(a.children);if(e)return e}return null}}),Object.assign(Xe.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b],this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b],this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b),this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind(),this.getValue(a,b)},setValue:function(a,b){this.bind(),this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;if(a||(a=Xe.findNode(this.rootNode,b.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!a)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(c){var f=b.objectIndex;switch(c){case"materials":if(!a.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!a.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);a=a.skeleton.bones;for(var g=0;g<a.length;g++)if(a[g].name===f){f=g;break}break;default:if(void 0===a[c])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);a=a[c]}if(void 0!==f){if(void 0===a[f])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);a=a[f]}}var h=a[d];if(void 0===h){var i=b.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+d+" but it wasn't found.",a)}var j=this.Versioning.None;this.targetObject=a,void 0!==a.needsUpdate?j=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(j=this.Versioning.MatrixWorldNeedsUpdate);var k=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var g=0;g<this.node.geometry.morphAttributes.position.length;g++)if(a.geometry.morphAttributes.position[g].name===e){e=g;break}}else{if(!a.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var g=0;g<this.node.geometry.morphTargets.length;g++)if(a.geometry.morphTargets[g].name===e){e=g;break}}}k=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=e}else void 0!==h.fromArray&&void 0!==h.toArray?(k=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(k=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=d;this.getValue=this.GetterByBindingType[k],this.setValue=this.SetterByBindingTypeAndVersioning[k][j]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Xe.prototype,{_getValue_unbound:Xe.prototype.getValue,_setValue_unbound:Xe.prototype.setValue}),Object.assign(Ye.prototype,{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,i=void 0,j=0,k=arguments.length;j!==k;++j){var l=arguments[j],m=l.uuid,n=d[m];if(void 0===n){n=b++,d[m]=n,a.push(l);for(var o=0,p=h;o!==p;++o)g[o].push(new Xe(l,e[o],f[o]))}else if(c>n){i=a[n];var q=--c,r=a[q];d[r.uuid]=n,a[n]=r,d[m]=q,a[q]=l;for(var o=0,p=h;o!==p;++o){var s=g[o],t=s[q],u=s[n];s[n]=t,void 0===u&&(u=new Xe(l,e[o],f[o])),s[q]=u}}else a[n]!==i&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){for(var a=this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=arguments[f],i=h.uuid,j=c[i];if(void 0!==j&&j>=b){var k=b++,l=a[k];c[l.uuid]=j,a[j]=l,c[i]=k,a[k]=h;for(var m=0,n=e;m!==n;++m){var o=d[m],p=o[k],q=o[j];o[j]=p,o[k]=q}}}this.nCachedObjects_=b},uncache:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var i=arguments[g],j=i.uuid,k=d[j];if(void 0!==k)if(delete d[j],c>k){var l=--c,m=a[l],n=--b,o=a[n];d[m.uuid]=k,a[k]=m,d[o.uuid]=l,a[l]=o,a.pop();for(var p=0,q=f;p!==q;++p){var r=e[p],s=r[l],t=r[n];r[k]=s,r[l]=t,r.pop()}}else{var n=--b,o=a[n];d[o.uuid]=k,a[k]=o,a.pop();for(var p=0,q=f;p!==q;++p){var r=e[p];r[k]=r[n],r.pop()}}}this.nCachedObjects_=c},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,i=h.length,j=this.nCachedObjects_,k=new Array(i);d=e.length,c[a]=d,f.push(a),g.push(b),e.push(k);for(var l=j,m=h.length;l!==m;++l){var n=h[l];k[l]=new Xe(n,a,b)}return k},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g],i=a[g];b[i]=c,f[c]=h,f.pop(),e[c]=e[g],e.pop(),d[c]=d[g],d.pop()}}}),Object.assign(Ze.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){return this._startTime=a,this},setLoop:function(a,b){return this.loop=a,this.repetitions=b,this},setEffectiveWeight:function(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){if(a.fadeOut(b),this.fadeIn(b),c){var d=this._clip.duration,e=a._clip.duration,f=e/d,g=d/e;a.warp(1,f,b),this.warp(g,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},setEffectiveTimeScale:function(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){return this.timeScale=this._clip.duration/a,this.stopWarping()},syncWith:function(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(f=d._lendControlInterpolant(),this._timeScaleInterpolant=f);var h=f.parameterPositions,i=f.sampleValues;return h[0]=e,h[1]=e+c,i[0]=a/g,i[1]=b/g,this},stopWarping:function(){var a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){if(!this.enabled)return void this._updateWeight(a);var e=this._startTime;if(null!==e){var f=(a-e)*c;if(0>f||0===c)return;this._startTime=null,b=c*f}b*=this._updateTimeScale(a);var g=this._updateTime(b),h=this._updateWeight(a);if(h>0)for(var i=this._interpolants,j=this._propertyBindings,k=0,l=i.length;k!==l;++k)i[k].evaluate(g),j[k].accumulate(d,h)},_updateWeight:function(a){var b=0;if(this.enabled){b=this.weight;var c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d,a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b,b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d,a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b,b},_updateTime:function(a){var b=this.time+a,c=this._clip.duration,d=this.loop,e=this._loopCount,f=d===vi;if(0===a)return-1===e?b:f&&1===(1&e)?c-b:b;if(d===ti){-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1));a:{if(b>=c)b=c;else{if(!(0>b))break a;b=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}}else{if(-1===e&&(a>=0?(e=0,this._setEndings(!0,0===this.repetitions,f)):this._setEndings(0===this.repetitions,!0,f)),b>=c||0>b){var g=Math.floor(b/c);b-=c*g,e+=Math.abs(g);var h=this.repetitions-e;if(0>=h)this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=a>0?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(1===h){var i=0>a;this._setEndings(i,!i,f)}else this._setEndings(!1,!1,f);this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}if(f&&1===(1&e))return this.time=b,c-b}return this.time=b,b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=Ai,d.endingEnd=Ai):(a?d.endingStart=this.zeroSlopeAtStart?Ai:zi:d.endingStart=Bi,b?d.endingEnd=this.zeroSlopeAtEnd?Ai:zi:d.endingEnd=Bi)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(f=d._lendControlInterpolant(),this._weightInterpolant=f);var g=f.parameterPositions,h=f.sampleValues;return g[0]=e,h[0]=b,g[1]=e+a,h[1]=c,this}}),$e.prototype=Object.assign(Object.create(b.prototype),{constructor:$e,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings,g=a._interpolants,h=c.uuid,i=this._bindingsByRootAndName,j=i[h];void 0===j&&(j={},i[h]=j);for(var k=0;k!==e;++k){var l=d[k],m=l.name,n=j[m];if(void 0!==n)f[k]=n;else{if(n=f[k],void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,h,m));continue}var o=b&&b._propertyBindings[k].binding.parsedPath;n=new Ve(Xe.create(c,m,o),l.ValueTypeName,l.getValueSize()),++n.referenceCount,this._addInactiveBinding(n,h,m),f[k]=n}g[k].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]),this._addInactiveAction(a,c,b)}for(var e=a._propertyBindings,f=0,g=e.length;f!==g;++f){var h=e[f];0===h.useCount++&&(this._lendBinding(h),h.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){var b=a._cacheIndex;return null!==b&&b<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];if(void 0===f)f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f;else{var g=f.knownActions;a._byClipCacheIndex=g.length,g.push(a)}a._cacheIndex=d.length,d.push(a),f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d,b[d]=c,b.pop(),a._cacheIndex=null;var e=a._clip.uuid,f=this._actionsByClip,g=f[e],h=g.knownActions,i=h[h.length-1],j=a._byClipCacheIndex;i._byClipCacheIndex=j,h[j]=i,h.pop(),a._byClipCacheIndex=null;var k=g.actionByRoot,l=(a._localRoot||this._root).uuid;delete k[l],0===h.length&&delete f[e],this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.referenceCount&&this._removeInactiveBinding(e)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d,
b[d]=a,e._cacheIndex=c,b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d,b[d]=a,e._cacheIndex=c,b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e),e[c]=a,a._cacheIndex=f.length,f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,e=c.path,f=this._bindingsByRootAndName,g=f[d],h=b[b.length-1],i=a._cacheIndex;h._cacheIndex=i,b[i]=h,b.pop(),delete g[e];a:{for(var j in g)break a;delete f[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d,b[d]=a,e._cacheIndex=c,b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d,b[d]=a,e._cacheIndex=c,b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];return void 0===c&&(c=new Ad(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c),c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d,b[d]=a,e.__cacheIndex=c,b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid,e="string"==typeof a?Kd.findByName(c,a):a,f=null!==e?e.uuid:a,g=this._actionsByClip[f],h=null;if(void 0!==g){var i=g.actionByRoot[d];if(void 0!==i)return i;h=g.knownActions[0],null===e&&(e=h._clip)}if(null===e)return null;var j=new Ze(this,e,b);return this._bindAction(j,h),this._addInactiveAction(j,f,d),j},existingAction:function(a,b){var c=b||this._root,d=c.uuid,e="string"==typeof a?Kd.findByName(c,a):a,f=e?e.uuid:a,g=this._actionsByClip[f];return void 0!==g?g.actionByRoot[d]||null:null},stopAllAction:function(){var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var e=0;e!==b;++e)a[e].reset();for(var e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g){var h=b[g];h._update(d,a,e,f)}for(var i=this._bindings,j=this._nActiveBindings,g=0;g!==j;++g)i[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions,c=a.uuid,d=this._actionsByClip,e=d[c];if(void 0!==e){for(var f=e.knownActions,g=0,h=f.length;g!==h;++g){var i=f[g];this._deactivateAction(i);var j=i._cacheIndex,k=b[b.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,k._cacheIndex=j,b[j]=k,b.pop(),this._removeInactiveBindingsForAction(i)}delete d[c]}},uncacheRoot:function(a){var b=a.uuid,c=this._actionsByClip;for(var d in c){var e=c[d].actionByRoot,f=e[b];void 0!==f&&(this._deactivateAction(f),this._removeInactiveAction(f))}var g=this._bindingsByRootAndName,h=g[b];if(void 0!==h)for(var i in h){var j=h[i];j.restoreOriginalState(),this._removeInactiveBinding(j)}},uncacheAction:function(a,b){var c=this.existingAction(a,b);null!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}}),_e.prototype.clone=function(){return new _e(void 0===this.value.clone?this.value:this.value.clone())},af.prototype=Object.assign(Object.create(N.prototype),{constructor:af,isInstancedBufferGeometry:!0,copy:function(a){return N.prototype.copy.call(this,a),this.maxInstancedCount=a.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),bf.prototype=Object.assign(Object.create(Ib.prototype),{constructor:bf,isInstancedInterleavedBuffer:!0,copy:function(a){return Ib.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this}}),cf.prototype=Object.assign(Object.create(B.prototype),{constructor:cf,isInstancedBufferAttribute:!0,copy:function(a){return B.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this}}),Object.assign(df.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,b,c){var d=c||[];return ff(a,this,d,b),d.sort(ef),d},intersectObjects:function(a,b,c){var d=c||[];if(Array.isArray(a)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),d;for(var e=0,f=a.length;f>e;e++)ff(a[e],this,d,b);return d.sort(ef),d}}),Object.assign(gf.prototype,{set:function(a,b,c){return this.radius=a,this.phi=b,this.theta=c,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this},makeSafe:function(){var a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this},setFromVector3:function(a){return this.setFromCartesianCoords(a.x,a.y,a.z)},setFromCartesianCoords:function(a,b,c){return this.radius=Math.sqrt(a*a+b*b+c*c),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a,c),this.phi=Math.acos(Ri.clamp(b/this.radius,-1,1))),this}}),Object.assign(hf.prototype,{set:function(a,b,c){return this.radius=a,this.theta=b,this.y=c,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this},setFromVector3:function(a){return this.setFromCartesianCoords(a.x,a.y,a.z)},setFromCartesianCoords:function(a,b,c){return this.radius=Math.sqrt(a*a+c*c),this.theta=Math.atan2(a,c),this.y=b,this}}),Object.assign(jf.prototype,{set:function(a,b){return this.min.copy(a),this.max.copy(b),this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;c>b;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new c;return function(b,c){var d=a.copy(c).multiplyScalar(.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){return void 0===a&&(console.warn("THREE.Box2: .getCenter() target is now required"),a=new c),this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){return void 0===a&&(console.warn("THREE.Box2: .getSize() target is now required"),a=new c),this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,b){return void 0===b&&(console.warn("THREE.Box2: .getParameter() target is now required"),b=new c),b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),b=new c),b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new c;return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}),Object.assign(kf.prototype,{set:function(a,b){return this.start.copy(a),this.end.copy(b),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},getCenter:function(a){return void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new f),a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new f),a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){return void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=new f),this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new f,b=new f;return function(c,d){a.subVectors(c,this.start),b.subVectors(this.end,this.start);var e=b.dot(b),f=b.dot(a),g=f/e;return d&&(g=Ri.clamp(g,0,1)),g}}(),closestPointToPoint:function(a,b,c){var d=this.closestPointToPointParameter(a,b);return void 0===c&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),c=new f),this.delta(c).multiplyScalar(d).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}}),lf.prototype=Object.create(z.prototype),lf.prototype.constructor=lf,lf.prototype.isImmediateRenderObject=!0,mf.prototype=Object.create(Sb.prototype),mf.prototype.constructor=mf,mf.prototype.update=function(){var a=new f,b=new f,c=new g;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0),c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,i=g.faces,j=0,k=0,l=i.length;l>k;k++)for(var m=i[k],n=0,o=m.vertexNormals.length;o>n;n++){var p=h[m[d[n]]],q=m.vertexNormals[n];a.copy(p).applyMatrix4(e),b.copy(q).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(j,a.x,a.y,a.z),j+=1,f.setXYZ(j,b.x,b.y,b.z),j+=1}else if(g&&g.isBufferGeometry)for(var r=g.attributes.position,s=g.attributes.normal,j=0,n=0,o=r.count;o>n;n++)a.set(r.getX(n),r.getY(n),r.getZ(n)).applyMatrix4(e),b.set(s.getX(n),s.getY(n),s.getZ(n)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(j,a.x,a.y,a.z),j+=1,f.setXYZ(j,b.x,b.y,b.z),j+=1;f.needsUpdate=!0}}(),nf.prototype=Object.create(z.prototype),nf.prototype.constructor=nf,nf.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},nf.prototype.update=function(){var a=new f;return function(){this.light.updateMatrixWorld();var b=this.light.distance?this.light.distance:1e3,c=b*Math.tan(this.light.angle);this.cone.scale.set(c,c,b),a.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(a),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),pf.prototype=Object.create(Sb.prototype),pf.prototype.constructor=pf,pf.prototype.updateMatrixWorld=function(){var a=new f,b=new d,c=new d;return function(d){var e=this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var h=0,i=0;h<e.length;h++){var j=e[h];j.parent&&j.parent.isBone&&(b.multiplyMatrices(c,j.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(i,a.x,a.y,a.z),b.multiplyMatrices(c,j.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(i+1,a.x,a.y,a.z),i+=2)}f.getAttribute("position").needsUpdate=!0,z.prototype.updateMatrixWorld.call(this,d)}}(),qf.prototype=Object.create(X.prototype),qf.prototype.constructor=qf,qf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qf.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},rf.prototype=Object.create(Rb.prototype),rf.prototype.constructor=rf,rf.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var a=this.material.color,b=Math.max(a.r,a.g,a.b);b>1&&a.multiplyScalar(1/b),this.children[0].material.color.copy(this.material.color)}},rf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},sf.prototype=Object.create(z.prototype),sf.prototype.constructor=sf,sf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},sf.prototype.update=function(){var a=new f,b=new t,c=new t;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute("color");b.copy(this.light.color),c.copy(this.light.groundColor);for(var f=0,g=e.count;g>f;f++){var h=g/2>f?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),tf.prototype=Object.create(Sb.prototype),tf.prototype.constructor=tf,uf.prototype=Object.create(Sb.prototype),uf.prototype.constructor=uf,vf.prototype=Object.create(Sb.prototype),vf.prototype.constructor=vf,vf.prototype.update=function(){var a=new f,b=new f,c=new g;return function(){this.object.updateMatrixWorld(!0),c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices,h=f.faces,i=0,j=0,k=h.length;k>j;j++){var l=h[j],m=l.normal;a.copy(g[l.a]).add(g[l.b]).add(g[l.c]).divideScalar(3).applyMatrix4(d),b.copy(m).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),e.setXYZ(i,a.x,a.y,a.z),i+=1,e.setXYZ(i,b.x,b.y,b.z),i+=1}e.needsUpdate=!0}}(),wf.prototype=Object.create(z.prototype),wf.prototype.constructor=wf,wf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},wf.prototype.update=function(){var a=new f,b=new f,c=new f;return function(){a.setFromMatrixPosition(this.light.matrixWorld),b.setFromMatrixPosition(this.light.target.matrixWorld),c.subVectors(b,a),this.lightPlane.lookAt(b),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(b),this.targetLine.scale.z=c.length()}}(),xf.prototype=Object.create(Sb.prototype),xf.prototype.constructor=xf,xf.prototype.update=function(){function a(a,f,g,h){d.set(f,g,h).unproject(e);var i=c[a];if(void 0!==i)for(var j=b.getAttribute("position"),k=0,l=i.length;l>k;k++)j.setXYZ(i[k],d.x,d.y,d.z)}var b,c,d=new f,e=new yb;return function(){b=this.geometry,c=this.pointMap;var d=1,f=1;e.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-d,-f,-1),a("n2",d,-f,-1),a("n3",-d,f,-1),a("n4",d,f,-1),a("f1",-d,-f,1),a("f2",d,-f,1),a("f3",-d,f,1),a("f4",d,f,1),a("u1",.7*d,1.1*f,-1),a("u2",.7*-d,1.1*f,-1),a("u3",0,2*f,-1),a("cf1",-d,0,1),a("cf2",d,0,1),a("cf3",0,-f,1),a("cf4",0,f,1),a("cn1",-d,0,-1),a("cn2",d,0,-1),a("cn3",0,-f,-1),a("cn4",0,f,-1),b.getAttribute("position").needsUpdate=!0}}(),yf.prototype=Object.create(Sb.prototype),yf.prototype.constructor=yf,yf.prototype.update=function(){var a=new n;return function(b){if(void 0!==b&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&a.setFromObject(this.object),!a.isEmpty()){var c=a.min,d=a.max,e=this.geometry.attributes.position,f=e.array;f[0]=d.x,f[1]=d.y,f[2]=d.z,f[3]=c.x,f[4]=d.y,f[5]=d.z,f[6]=c.x,f[7]=c.y,f[8]=d.z,f[9]=d.x,f[10]=c.y,f[11]=d.z,f[12]=d.x,f[13]=d.y,f[14]=c.z,f[15]=c.x,f[16]=d.y,f[17]=c.z,f[18]=c.x,f[19]=c.y,f[20]=c.z,f[21]=d.x,f[22]=c.y,f[23]=c.z,e.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),yf.prototype.setFromObject=function(a){return this.object=a,this.update(),this},yf.prototype.copy=function(a){return Sb.prototype.copy.call(this,a),this.object=a.object,this},yf.prototype.clone=function(){return(new this.constructor).copy(this)},zf.prototype=Object.create(Sb.prototype),zf.prototype.constructor=zf,zf.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),z.prototype.updateMatrixWorld.call(this,a))},Af.prototype=Object.create(Rb.prototype),Af.prototype.constructor=Af,Af.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;Math.abs(b)<1e-8&&(b=1e-8),this.scale.set(.5*this.size,.5*this.size,b),this.children[0].material.side=0>b?ug:tg,this.lookAt(this.plane.normal),z.prototype.updateMatrixWorld.call(this,a)};var Xl,Yl;Bf.prototype=Object.create(z.prototype),Bf.prototype.constructor=Bf,Bf.prototype.setDirection=function(){var a,b=new f;return function(c){c.y>.99999?this.quaternion.set(0,0,0,1):c.y<-.99999?this.quaternion.set(1,0,0,0):(b.set(c.z,0,-c.x).normalize(),a=Math.acos(c.y),this.quaternion.setFromAxisAngle(b,a))}}(),Bf.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a),void 0===c&&(c=.2*b),this.line.scale.set(1,Math.max(0,a-b),1),this.line.updateMatrix(),this.cone.scale.set(c,b,c),this.cone.position.y=a,this.cone.updateMatrix()},Bf.prototype.setColor=function(a){this.line.material.color.copy(a),this.cone.material.color.copy(a)},Bf.prototype.copy=function(a){return z.prototype.copy.call(this,a,!1),this.line.copy(a.line),this.cone.copy(a.cone),this},Bf.prototype.clone=function(){return(new this.constructor).copy(this)},Cf.prototype=Object.create(Sb.prototype),Cf.prototype.constructor=Cf;var Zl=0,$l=1;Vd.create=function(a,b){return console.log("THREE.Curve.create() has been deprecated"),a.prototype=Object.create(Vd.prototype),a.prototype.constructor=a,a.prototype.getPoint=b,a},Object.assign(pe.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var b=this.getPoints(a);return this.createGeometry(b)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var b=this.getSpacedPoints(a);return this.createGeometry(b)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new A,c=0,d=a.length;d>c;c++){var e=a[c];b.vertices.push(new f(e.x,e.y,e.z||0))}return b}}),Object.assign(qe.prototype,{fromPoints:function(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(a)}}),Xf.prototype=Object.create(Zd.prototype),Yf.prototype=Object.create(Zd.prototype),Zf.prototype=Object.create(Zd.prototype),Object.assign(Zf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),tf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},pf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Me.prototype,{extractUrlBase:function(a){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Pl.extractUrlBase(a)}}),Object.assign(Fe.prototype,{setTexturePath:function(a){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(a)}}),Object.assign(jf.prototype,{center:function(a){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},size:function(a){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(a)}}),Object.assign(n.prototype,{center:function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionSphere:function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)},size:function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)}}),kf.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},Object.assign(Ri,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(a){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ri.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ri.ceilPowerOfTwo(a)}}),Object.assign(g.prototype,{flattenToArrayOffset:function(a,b){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,b)},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(a){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(d.prototype,{extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},flattenToArrayOffset:function(a,b){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,b)},getPosition:function(){var a;return function(){return void 0===a&&(a=new f),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(a,b,c,d,e,f){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(a,b,d,c,e,f)}}),p.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},e.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(U.prototype,{isIntersectionBox:function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionPlane:function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)},isIntersectionSphere:function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)}}),Object.assign(V.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(a,b){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(a,b)},midpoint:function(a){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(a)},normal:function(a){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(a)},plane:function(a){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(a)}}),Object.assign(V,{barycoordFromPoint:function(a,b,c,d,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),V.getBarycoord(a,b,c,d,e)},normal:function(a,b,c,d){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),V.getNormal(a,b,c,d)}}),Object.assign(re.prototype,{extractAllPoints:function(a){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(a)},extrude:function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Vc(this,a)},makeGeometry:function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ed(this,a)}}),Object.assign(c.prototype,{fromAttribute:function(a,b,c){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(a)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(f.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(b,a)},applyProjection:function(a){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(a)},fromAttribute:function(a,b,c){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(a)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(i.prototype,{fromAttribute:function(a,b,c){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,b,c)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(A.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(z.prototype,{getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(b,a)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(z.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Mb.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ob.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Nb.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Vd.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),
this.arcLengthDivisions},set:function(a){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=a}}),zb.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==b&&(this.filmGauge=b),this.setFocalLength(a)},Object.defineProperties(se.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}}),Object.defineProperties(B.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(N.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(N.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Wc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(_e.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(S.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new t}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=a===wg}}}),Object.defineProperties(sd.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(T.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}}),Object.assign(Eb.prototype,{clearTarget:function(a,b,c,d){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(a),this.clear(b,c,d)},animate:function(a){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(a)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Eb.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return void console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(tb.prototype,{cullFace:{get:function(){return void console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){return void console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){return void console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(j.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}}),Object.defineProperties(Cb.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Se.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var b=this,c=new Ne;return c.load(a,function(a){b.setBuffer(a)}),this},Ue.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Pe.prototype.updateCubeMap=function(a,b){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(a,b)};var _l={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b.isMesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry),a.merge(b,d,c)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}};Ti.crossOrigin=void 0,Ti.loadTexture=function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new Ud;e.setCrossOrigin(this.crossOrigin);var f=e.load(a,c,void 0,d);return b&&(f.mapping=b),f},Ti.loadTextureCube=function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new Td;e.setCrossOrigin(this.crossOrigin);var f=e.load(a,c,void 0,d);return b&&(f.mapping=b),f},Ti.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ti.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var am={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};a.WebGLMultisampleRenderTarget=k,a.WebGLRenderTargetCube=l,a.WebGLRenderTarget=j,a.WebGLRenderer=Eb,a.ShaderLib=il,a.UniformsLib=hl,a.UniformsUtils=fl,a.ShaderChunk=el,a.FogExp2=Fb,a.Fog=Gb,a.Scene=Hb,a.Sprite=Lb,a.LOD=Mb,a.SkinnedMesh=Nb,a.Skeleton=Ob,a.Bone=Pb,a.Mesh=X,a.LineSegments=Sb,a.LineLoop=Tb,a.Line=Rb,a.Points=Vb,a.Group=xb,a.VideoTexture=Wb,a.DataTexture=m,a.DataTexture3D=ia,a.CompressedTexture=Xb,a.CubeTexture=ha,a.CanvasTexture=Yb,a.DepthTexture=Zb,a.Texture=h,a.AnimationLoader=Pd,a.CompressedTextureLoader=Qd,a.DataTextureLoader=Rd,a.CubeTextureLoader=Td,a.TextureLoader=Ud,a.ObjectLoader=Fe,a.MaterialLoader=De,a.BufferGeometryLoader=Ee,a.DefaultLoadingManager=Il,a.LoadingManager=Nd,a.ImageLoader=Sd,a.ImageBitmapLoader=Ge,a.FontLoader=Le,a.FileLoader=Od,a.Loader=Me,a.LoaderUtils=Pl,a.Cache=Hl,a.AudioLoader=Ne,a.SpotLightShadow=ve,a.SpotLight=we,a.PointLight=xe,a.RectAreaLight=Ce,a.HemisphereLight=te,a.DirectionalLightShadow=ze,a.DirectionalLight=Ae,a.AmbientLight=Be,a.LightShadow=ue,a.Light=se,a.StereoCamera=Oe,a.PerspectiveCamera=zb,a.OrthographicCamera=ye,a.CubeCamera=Pe,a.ArrayCamera=Ab,a.Camera=yb,a.AudioListener=Re,a.PositionalAudio=Te,a.AudioContext=Vl,a.AudioAnalyser=Ue,a.Audio=Se,a.VectorKeyframeTrack=Jd,a.StringKeyframeTrack=Id,a.QuaternionKeyframeTrack=Hd,a.NumberKeyframeTrack=Fd,a.ColorKeyframeTrack=Ed,a.BooleanKeyframeTrack=Dd,a.PropertyMixer=Ve,a.PropertyBinding=Xe,a.KeyframeTrack=Cd,a.AnimationUtils=Gl,a.AnimationObjectGroup=Ye,a.AnimationMixer=$e,a.AnimationClip=Kd,a.Uniform=_e,a.InstancedBufferGeometry=af,a.BufferGeometry=N,a.Geometry=A,a.InterleavedBufferAttribute=Jb,a.InstancedInterleavedBuffer=bf,a.InterleavedBuffer=Ib,a.InstancedBufferAttribute=cf,a.Face3=w,a.Object3D=z,a.Raycaster=df,a.Layers=y,a.EventDispatcher=b,a.Clock=Qe,a.QuaternionLinearInterpolant=Gd,a.LinearInterpolant=Ad,a.DiscreteInterpolant=Bd,a.CubicInterpolant=zd,a.Interpolant=yd,a.Triangle=V,a.Math=Ri,a.Spherical=gf,a.Cylindrical=hf,a.Plane=p,a.Frustum=q,a.Sphere=o,a.Ray=U,a.Matrix4=d,a.Matrix3=g,a.Box3=n,a.Box2=jf,a.Line3=kf,a.Euler=x,a.Vector4=i,a.Vector3=f,a.Vector2=c,a.Quaternion=e,a.Color=t,a.ImmediateRenderObject=lf,a.VertexNormalsHelper=mf,a.SpotLightHelper=nf,a.SkeletonHelper=pf,a.PointLightHelper=qf,a.RectAreaLightHelper=rf,a.HemisphereLightHelper=sf,a.GridHelper=tf,a.PolarGridHelper=uf,a.FaceNormalsHelper=vf,a.DirectionalLightHelper=wf,a.CameraHelper=xf,a.BoxHelper=yf,a.Box3Helper=zf,a.PlaneHelper=Af,a.ArrowHelper=Bf,a.AxesHelper=Cf,a.Shape=re,a.Path=qe,a.ShapePath=He,a.Font=Ie,a.CurvePath=pe,a.Curve=Vd,a.ImageUtils=Ti,a.ShapeUtils=Cl,a.WebGLUtils=wb,a.WireframeGeometry=$b,a.ParametricGeometry=_b,a.ParametricBufferGeometry=ac,a.TetrahedronGeometry=dc,a.TetrahedronBufferGeometry=ec,a.OctahedronGeometry=fc,a.OctahedronBufferGeometry=gc,a.IcosahedronGeometry=hc,a.IcosahedronBufferGeometry=ic,a.DodecahedronGeometry=jc,a.DodecahedronBufferGeometry=kc,a.PolyhedronGeometry=bc,a.PolyhedronBufferGeometry=cc,a.TubeGeometry=lc,a.TubeBufferGeometry=mc,a.TorusKnotGeometry=nc,a.TorusKnotBufferGeometry=oc,a.TorusGeometry=pc,a.TorusBufferGeometry=qc,a.TextGeometry=Yc,a.TextBufferGeometry=Zc,a.SphereGeometry=$c,a.SphereBufferGeometry=_c,a.RingGeometry=ad,a.RingBufferGeometry=bd,a.PlaneGeometry=Q,a.PlaneBufferGeometry=R,a.LatheGeometry=cd,a.LatheBufferGeometry=dd,a.ShapeGeometry=ed,a.ShapeBufferGeometry=fd,a.ExtrudeGeometry=Vc,a.ExtrudeBufferGeometry=Wc,a.EdgesGeometry=hd,a.ConeGeometry=kd,a.ConeBufferGeometry=ld,a.CylinderGeometry=id,a.CylinderBufferGeometry=jd,a.CircleGeometry=md,a.CircleBufferGeometry=nd,a.BoxGeometry=O,a.CubeGeometry=O,a.BoxBufferGeometry=P,a.ShadowMaterial=od,a.SpriteMaterial=Kb,a.RawShaderMaterial=pd,a.ShaderMaterial=T,a.PointsMaterial=Ub,a.MeshPhysicalMaterial=rd,a.MeshStandardMaterial=qd,a.MeshPhongMaterial=sd,a.MeshToonMaterial=td,a.MeshNormalMaterial=ud,a.MeshLambertMaterial=vd,a.MeshDepthMaterial=rb,a.MeshDistanceMaterial=sb,a.MeshBasicMaterial=W,a.MeshMatcapMaterial=wd,a.LineDashedMaterial=xd,a.LineBasicMaterial=Qb,a.Material=S,a.Float64BufferAttribute=K,a.Float32BufferAttribute=J,a.Uint32BufferAttribute=I,a.Int32BufferAttribute=H,a.Uint16BufferAttribute=G,a.Int16BufferAttribute=F,a.Uint8ClampedBufferAttribute=E,a.Uint8BufferAttribute=D,a.Int8BufferAttribute=C,a.BufferAttribute=B,a.ArcCurve=Xd,a.CatmullRomCurve3=Zd,a.CubicBezierCurve=ie,a.CubicBezierCurve3=je,a.EllipseCurve=Wd,a.LineCurve=ke,a.LineCurve3=le,a.QuadraticBezierCurve=me,a.QuadraticBezierCurve3=ne,a.SplineCurve=oe,a.REVISION=ig,a.MOUSE=jg,a.CullFaceNone=kg,a.CullFaceBack=lg,a.CullFaceFront=mg,a.CullFaceFrontBack=ng,a.FrontFaceDirectionCW=og,a.FrontFaceDirectionCCW=pg,a.BasicShadowMap=qg,a.PCFShadowMap=rg,a.PCFSoftShadowMap=sg,a.FrontSide=tg,a.BackSide=ug,a.DoubleSide=vg,a.FlatShading=wg,a.SmoothShading=xg,a.NoColors=yg,a.FaceColors=zg,a.VertexColors=Ag,a.NoBlending=Bg,a.NormalBlending=Cg,a.AdditiveBlending=Dg,a.SubtractiveBlending=Eg,a.MultiplyBlending=Fg,a.CustomBlending=Gg,a.AddEquation=Hg,a.SubtractEquation=Ig,a.ReverseSubtractEquation=Jg,a.MinEquation=Kg,a.MaxEquation=Lg,a.ZeroFactor=Mg,a.OneFactor=Ng,a.SrcColorFactor=Og,a.OneMinusSrcColorFactor=Pg,a.SrcAlphaFactor=Qg,a.OneMinusSrcAlphaFactor=Rg,a.DstAlphaFactor=Sg,a.OneMinusDstAlphaFactor=Tg,a.DstColorFactor=Ug,a.OneMinusDstColorFactor=Vg,a.SrcAlphaSaturateFactor=Wg,a.NeverDepth=Xg,a.AlwaysDepth=Yg,a.LessDepth=Zg,a.LessEqualDepth=$g,a.EqualDepth=_g,a.GreaterEqualDepth=ah,a.GreaterDepth=bh,a.NotEqualDepth=ch,a.MultiplyOperation=dh,a.MixOperation=eh,a.AddOperation=fh,a.NoToneMapping=gh,a.LinearToneMapping=hh,a.ReinhardToneMapping=ih,a.Uncharted2ToneMapping=jh,a.CineonToneMapping=kh,a.ACESFilmicToneMapping=lh,a.UVMapping=mh,a.CubeReflectionMapping=nh,a.CubeRefractionMapping=oh,a.EquirectangularReflectionMapping=ph,a.EquirectangularRefractionMapping=qh,a.SphericalReflectionMapping=rh,a.CubeUVReflectionMapping=sh,a.CubeUVRefractionMapping=th,a.RepeatWrapping=uh,a.ClampToEdgeWrapping=vh,a.MirroredRepeatWrapping=wh,a.NearestFilter=xh,a.NearestMipMapNearestFilter=yh,a.NearestMipMapLinearFilter=zh,a.LinearFilter=Ah,a.LinearMipMapNearestFilter=Bh,a.LinearMipMapLinearFilter=Ch,a.UnsignedByteType=Dh,a.ByteType=Eh,a.ShortType=Fh,a.UnsignedShortType=Gh,a.IntType=Hh,a.UnsignedIntType=Ih,a.FloatType=Jh,a.HalfFloatType=Kh,a.UnsignedShort4444Type=Lh,a.UnsignedShort5551Type=Mh,a.UnsignedShort565Type=Nh,a.UnsignedInt248Type=Oh,a.AlphaFormat=Ph,a.RGBFormat=Qh,a.RGBAFormat=Rh,a.LuminanceFormat=Sh,a.LuminanceAlphaFormat=Th,a.RGBEFormat=Uh,a.DepthFormat=Vh,a.DepthStencilFormat=Wh,a.RedFormat=Xh,a.RGB_S3TC_DXT1_Format=Yh,a.RGBA_S3TC_DXT1_Format=Zh,a.RGBA_S3TC_DXT3_Format=$h,a.RGBA_S3TC_DXT5_Format=_h,a.RGB_PVRTC_4BPPV1_Format=ai,a.RGB_PVRTC_2BPPV1_Format=bi,a.RGBA_PVRTC_4BPPV1_Format=ci,a.RGBA_PVRTC_2BPPV1_Format=di,a.RGB_ETC1_Format=ei,a.RGBA_ASTC_4x4_Format=fi,a.RGBA_ASTC_5x4_Format=gi,a.RGBA_ASTC_5x5_Format=hi,a.RGBA_ASTC_6x5_Format=ii,a.RGBA_ASTC_6x6_Format=ji,a.RGBA_ASTC_8x5_Format=ki,a.RGBA_ASTC_8x6_Format=li,a.RGBA_ASTC_8x8_Format=mi,a.RGBA_ASTC_10x5_Format=ni,a.RGBA_ASTC_10x6_Format=oi,a.RGBA_ASTC_10x8_Format=pi,a.RGBA_ASTC_10x10_Format=qi,a.RGBA_ASTC_12x10_Format=ri,a.RGBA_ASTC_12x12_Format=si,a.LoopOnce=ti,a.LoopRepeat=ui,a.LoopPingPong=vi,a.InterpolateDiscrete=wi,a.InterpolateLinear=xi,a.InterpolateSmooth=yi,a.ZeroCurvatureEnding=zi,a.ZeroSlopeEnding=Ai,a.WrapAroundEnding=Bi,a.TrianglesDrawMode=Ci,a.TriangleStripDrawMode=Di,a.TriangleFanDrawMode=Ei,a.LinearEncoding=Fi,a.sRGBEncoding=Gi,a.GammaEncoding=Hi,a.RGBEEncoding=Ii,a.LogLuvEncoding=Ji,a.RGBM7Encoding=Ki,a.RGBM16Encoding=Li,a.RGBDEncoding=Mi,a.BasicDepthPacking=Ni,a.RGBADepthPacking=Oi,a.TangentSpaceNormalMap=Pi,a.ObjectSpaceNormalMap=Qi,a.Face4=Df,a.LineStrip=Zl,a.LinePieces=$l,a.MeshFaceMaterial=Ef,a.MultiMaterial=Ff,a.PointCloud=Gf,a.Particle=Hf,a.ParticleSystem=If,a.PointCloudMaterial=Jf,a.ParticleBasicMaterial=Kf,a.ParticleSystemMaterial=Lf,a.Vertex=Mf,a.DynamicBufferAttribute=Nf,a.Int8Attribute=Of,a.Uint8Attribute=Pf,a.Uint8ClampedAttribute=Qf,a.Int16Attribute=Rf,a.Uint16Attribute=Sf,a.Int32Attribute=Tf,a.Uint32Attribute=Uf,a.Float32Attribute=Vf,a.Float64Attribute=Wf,a.ClosedSplineCurve3=Xf,a.SplineCurve3=Yf,a.Spline=Zf,a.AxisHelper=$f,a.BoundingBoxHelper=_f,a.EdgesHelper=ag,a.WireframeHelper=bg,a.XHRLoader=cg,a.BinaryTextureLoader=dg,a.GeometryUtils=_l,a.Projector=eg,a.CanvasRenderer=fg,a.JSONLoader=gg,a.SceneUtils=am,a.LensFlare=hg,Object.defineProperty(a,"__esModule",{value:!0})}),THREE.OrbitControls=function(a,b){function c(){return 2*Math.PI/60/60*F.autoRotateSpeed}function d(){return Math.pow(.95,F.zoomSpeed)}function e(a){N.theta-=a}function f(a){N.phi-=a}function g(a){F.object.isPerspectiveCamera?O/=a:F.object.isOrthographicCamera?(F.object.zoom=Math.max(F.minZoom,Math.min(F.maxZoom,F.object.zoom*a)),F.object.updateProjectionMatrix(),Q=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),F.enableZoom=!1)}function h(a){F.object.isPerspectiveCamera?O*=a:F.object.isOrthographicCamera?(F.object.zoom=Math.max(F.minZoom,Math.min(F.maxZoom,F.object.zoom/a)),F.object.updateProjectionMatrix(),Q=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),F.enableZoom=!1)}function i(a){R.set(a.clientX,a.clientY)}function j(a){X.set(a.clientX,a.clientY)}function k(a){U.set(a.clientX,a.clientY)}function l(a){S.set(a.clientX,a.clientY),T.subVectors(S,R).multiplyScalar(F.rotateSpeed);var b=F.domElement===document?F.domElement.body:F.domElement;e(2*Math.PI*T.x/b.clientHeight),f(2*Math.PI*T.y/b.clientHeight),R.copy(S),F.update()}function m(a){Y.set(a.clientX,a.clientY),Z.subVectors(Y,X),Z.y>0?g(d()):Z.y<0&&h(d()),X.copy(Y),F.update()}function n(a){V.set(a.clientX,a.clientY),W.subVectors(V,U).multiplyScalar(F.panSpeed),aa(W.x,W.y),U.copy(V),F.update()}function o(a){}function p(a){a.deltaY<0?h(d()):a.deltaY>0&&g(d()),F.update()}function q(a){switch(a.preventDefault(),a.keyCode){case F.keys.UP:aa(0,F.keyPanSpeed),F.update();break;case F.keys.BOTTOM:aa(0,-F.keyPanSpeed),F.update();break;case F.keys.LEFT:aa(F.keyPanSpeed,0),F.update();break;case F.keys.RIGHT:aa(-F.keyPanSpeed,0),F.update()}}function r(a){R.set(a.touches[0].pageX,a.touches[0].pageY)}function s(a){if(F.enableZoom){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);X.set(0,d)}if(F.enablePan){var e=.5*(a.touches[0].pageX+a.touches[1].pageX),f=.5*(a.touches[0].pageY+a.touches[1].pageY);U.set(e,f)}}function t(a){S.set(a.touches[0].pageX,a.touches[0].pageY),T.subVectors(S,R).multiplyScalar(F.rotateSpeed);var b=F.domElement===document?F.domElement.body:F.domElement;e(2*Math.PI*T.x/b.clientHeight),f(2*Math.PI*T.y/b.clientHeight),R.copy(S),F.update()}function u(a){if(F.enableZoom){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);Y.set(0,d),Z.set(0,Math.pow(Y.y/X.y,F.zoomSpeed)),g(Z.y),X.copy(Y)}if(F.enablePan){var e=.5*(a.touches[0].pageX+a.touches[1].pageX),f=.5*(a.touches[0].pageY+a.touches[1].pageY);V.set(e,f),W.subVectors(V,U).multiplyScalar(F.panSpeed),aa(W.x,W.y),U.copy(V)}F.update()}function v(a){}function w(a){if(F.enabled!==!1){switch(a.preventDefault(),F.domElement.focus?F.domElement.focus():window.focus(),a.button){case F.mouseButtons.LEFT:if(a.ctrlKey||a.metaKey||a.shiftKey){if(F.enablePan===!1)return;k(a),K=J.PAN}else{if(F.enableRotate===!1)return;i(a),K=J.ROTATE}break;case F.mouseButtons.MIDDLE:if(F.enableZoom===!1)return;j(a),K=J.DOLLY;break;case F.mouseButtons.RIGHT:if(F.enablePan===!1)return;k(a),K=J.PAN}K!==J.NONE&&(document.addEventListener("mousemove",x,!1),document.addEventListener("mouseup",y,!1),F.dispatchEvent(H))}}function x(a){if(F.enabled!==!1)switch(a.preventDefault(),K){case J.ROTATE:if(F.enableRotate===!1)return;l(a);break;case J.DOLLY:if(F.enableZoom===!1)return;m(a);break;case J.PAN:if(F.enablePan===!1)return;n(a)}}function y(a){F.enabled!==!1&&(o(a),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",y,!1),F.dispatchEvent(I),K=J.NONE)}function z(a){F.enabled===!1||F.enableZoom===!1||K!==J.NONE&&K!==J.ROTATE||(a.preventDefault(),a.stopPropagation(),F.dispatchEvent(H),p(a),F.dispatchEvent(I))}function A(a){F.enabled!==!1&&F.enableKeys!==!1&&F.enablePan!==!1&&q(a)}function B(a){if(F.enabled!==!1){switch(a.preventDefault(),a.touches.length){case 1:if(F.enableRotate===!1)return;r(a),K=J.TOUCH_ROTATE;break;case 2:if(F.enableZoom===!1&&F.enablePan===!1)return;s(a),K=J.TOUCH_DOLLY_PAN;break;default:K=J.NONE}K!==J.NONE&&F.dispatchEvent(H)}}function C(a){if(F.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(F.enableRotate===!1)return;if(K!==J.TOUCH_ROTATE)return;t(a);break;case 2:if(F.enableZoom===!1&&F.enablePan===!1)return;if(K!==J.TOUCH_DOLLY_PAN)return;u(a);break;default:K=J.NONE}}function D(a){F.enabled!==!1&&(v(a),F.dispatchEvent(I),K=J.NONE)}function E(a){F.enabled!==!1&&a.preventDefault()}this.object=a,this.domElement=void 0!==b?b:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return M.phi},this.getAzimuthalAngle=function(){return M.theta},this.saveState=function(){F.target0.copy(F.target),F.position0.copy(F.object.position),F.zoom0=F.object.zoom},this.reset=function(){F.target.copy(F.target0),F.object.position.copy(F.position0),F.object.zoom=F.zoom0,F.object.updateProjectionMatrix(),F.dispatchEvent(G),F.update(),K=J.NONE},this.update=function(){var b=new THREE.Vector3,d=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),f=d.clone().inverse(),g=new THREE.Vector3,h=new THREE.Quaternion;return function(){var a=F.object.position;return b.copy(a).sub(F.target),b.applyQuaternion(d),M.setFromVector3(b),F.autoRotate&&K===J.NONE&&e(c()),M.theta+=N.theta,M.phi+=N.phi,M.theta=Math.max(F.minAzimuthAngle,Math.min(F.maxAzimuthAngle,M.theta)),M.phi=Math.max(F.minPolarAngle,Math.min(F.maxPolarAngle,M.phi)),M.makeSafe(),M.radius*=O,M.radius=Math.max(F.minDistance,Math.min(F.maxDistance,M.radius)),F.target.add(P),b.setFromSpherical(M),b.applyQuaternion(f),a.copy(F.target).add(b),F.object.lookAt(F.target),F.enableDamping===!0?(N.theta*=1-F.dampingFactor,N.phi*=1-F.dampingFactor,P.multiplyScalar(1-F.dampingFactor)):(N.set(0,0,0),P.set(0,0,0)),O=1,Q||g.distanceToSquared(F.object.position)>L||8*(1-h.dot(F.object.quaternion))>L?(F.dispatchEvent(G),g.copy(F.object.position),h.copy(F.object.quaternion),Q=!1,!0):!1}}(),this.dispose=function(){F.domElement.removeEventListener("contextmenu",E,!1),F.domElement.removeEventListener("mousedown",w,!1),F.domElement.removeEventListener("wheel",z,!1),F.domElement.removeEventListener("touchstart",B,!1),F.domElement.removeEventListener("touchend",D,!1),F.domElement.removeEventListener("touchmove",C,!1),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",y,!1),window.removeEventListener("keydown",A,!1)};var F=this,G={type:"change"},H={type:"start"},I={type:"end"},J={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},K=J.NONE,L=1e-6,M=new THREE.Spherical,N=new THREE.Spherical,O=1,P=new THREE.Vector3,Q=!1,R=new THREE.Vector2,S=new THREE.Vector2,T=new THREE.Vector2,U=new THREE.Vector2,V=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,Z=new THREE.Vector2,$=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),P.add(a)}}(),_=function(){var a=new THREE.Vector3;return function(b,c){F.screenSpacePanning===!0?a.setFromMatrixColumn(c,1):(a.setFromMatrixColumn(c,0),a.crossVectors(F.object.up,a)),a.multiplyScalar(b),P.add(a)}}(),aa=function(){var a=new THREE.Vector3;return function(b,c){var d=F.domElement===document?F.domElement.body:F.domElement;if(F.object.isPerspectiveCamera){var e=F.object.position;a.copy(e).sub(F.target);var f=a.length();f*=Math.tan(F.object.fov/2*Math.PI/180),$(2*b*f/d.clientHeight,F.object.matrix),_(2*c*f/d.clientHeight,F.object.matrix)}else F.object.isOrthographicCamera?($(b*(F.object.right-F.object.left)/F.object.zoom/d.clientWidth,F.object.matrix),_(c*(F.object.top-F.object.bottom)/F.object.zoom/d.clientHeight,F.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),F.enablePan=!1)}}();F.domElement.addEventListener("contextmenu",E,!1),F.domElement.addEventListener("mousedown",w,!1),
F.domElement.addEventListener("wheel",z,!1),F.domElement.addEventListener("touchstart",B,!1),F.domElement.addEventListener("touchend",D,!1),F.domElement.addEventListener("touchmove",C,!1),window.addEventListener("keydown",A,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!a}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!a}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!a}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!a}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!a}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=a}}});var ThreeUtils={createScene:function(a,b){var c={};if(c.canInit=!0,c.startPending=!1,b||(b={}),c.settings=$.extend(!0,{},ThreeUtils.scenePresets("normal3DScene"),b),console.log(c.settings),c.canvas=$("#"+a),0==c.canvas.length)return console.error("You must provide a valid canvasID"),null;var d=c.canvas.width(),e=c.canvas.height();switch(c.rendering=Utils.isVisible(c.canvas),c.scene=new THREE.Scene,c.settings.camera.type){case"PerspectiveCamera":c.camera=new THREE.PerspectiveCamera(75,d/e,.1,1e3);break;case"OrthographicCamera":c.camera=new THREE.OrthographicCamera(-1,1,-1,1,1,1e3);break;default:return console.error("camera.type not recognised: "+c.settings.camera.type),null}c.renderer=new THREE.WebGLRenderer({canvas:c.canvas[0]}),c.renderer.setSize(d,e),c.rt1=new THREE.WebGLRenderTarget(d,e,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),c.rt2=new THREE.WebGLRenderTarget(d,e,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat});var f=c.settings.camera.position,g=c.settings.camera.up,h=c.settings.camera.look;switch(c.camera.position.set(f.x,f.y,f.z),c.camera.up.set(g.x,g.y,g.z),c.camera.lookAt(h.x,h.y,h.z),c.settings.camera.controls){case"OrbitControls":c.controls=new THREE.OrbitControls(c.camera,c.canvas[0]);break;case"None":c.controls=null;break;default:return console.error("camera.controls not recognised: "+c.settings.camera.controls),null}var d=c.canvas.width(),e=c.canvas.height();switch(c.settings.render.mode){case"Loop":c.render=function(){if(requestAnimationFrame(c.render),c.rendering){c.update(),c.renderer.render(c.scene,c.camera),c.renderer.render(c.scene,c.camera,c.rt1,!1);var a=c.rt2;c.rt2=c.rt1,c.rt1=a,c.uniforms.iBackbuffer.value=this.rt2}},$(window).scroll(function(a){Utils.isVisible(c.canvas)?c.rendering=!0:c.rendering=!1}),$(c.canvas).resize(function(a){c.camera&&(c.camera.aspect=d/c.canvas.window.innerHeight,c.camera.updateProjectionMatrix()),c.renderer.setSize(d,e),c.rt1.setSize(d,e),c.rt2.setSize(d,e)});break;case"Once":c.render=function(){c.update(),c.renderer.render(c.scene,c.camera)};break;case"OnChange":return console.error("render.mode not yet implemented: OnChange"),null;default:return console.error("render.mode not recognised: "+c.settings.render.mode),null}if(c.start=function(){c.canInit?(c.init(),c.clock=new THREE.Clock,c.render()):c.startPending=!0},"Shader"==c.settings.init.material.type){c.canInit=!1,c.shaderLoaded=function(a,b){c.settings.init.material.shader.vertex=a,c.settings.init.material.shader.fragment=b,c.canInit=!0,c.startPending&&c.start()};var i=ThreeUtils.createShaderLoader();i.loadShaders(c.settings.init.material.shader.vertex,c.settings.init.material.shader.fragment,c.shaderLoaded)}switch(c.init=function(){var a=!1,b=!1;switch(c.settings.init.object){case"Cube":var a=new THREE.BoxGeometry(1,1,1);break;case"Plane":var a=new THREE.PlaneBufferGeometry(2,2);break;case"None":break;default:return console.error("init.object not recognised: "+c.settings.init.object),null}switch(c.settings.init.material.type){case"Color":b=new THREE.MeshBasicMaterial({color:c.settings.init.material.color});break;case"Shader":c.uniforms={},"Default"==c.settings.update&&(c.uniforms.iResolution={type:"v2",value:new THREE.Vector2(c.canvas.width(),c.canvas.height())},c.uniforms.iTime={type:"f",value:0},c.uniforms.iTimeDelta={type:"f",value:0},c.uniforms.iFrame={type:"i",value:0},c.uniforms.iMouse={type:"v4",value:new THREE.Vector4(.5*c.canvas.width(),.5*c.canvas.height(),0,0)},c.uniforms.iScroll={type:"f",value:0},c.uniforms.iBackbuffer={type:"t",value:c.rt1});var b=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.settings.init.material.shader.vertex,fragmentShader:c.settings.init.material.shader.fragment});break;case"None":break;default:return console.error("init.material not recognised: "+c.settings.init.material),null}a&&b&&c.scene.add(new THREE.Mesh(a,b))},c.settings.update){case"Default":c.update=function(){var a=c.clock.getDelta();c.uniforms.iResolution.value=new THREE.Vector2(c.canvas.width(),c.canvas.height()),c.uniforms.iTime.value+=a,c.uniforms.iTimeDelta.value=a,c.uniforms.iFrame.value+=1,c.uniforms.iScroll.value=-c.canvas[0].getBoundingClientRect().y,c.uniforms.iBackbuffer.value=c.rt1},$(document).mousemove(function(a){var b=c.canvas[0].getClientRects()[0];c.uniforms.iMouse.value.x=a.clientX-b.x,c.uniforms.iMouse.value.y=b.height-(a.clientY-b.y)}),$(document).mousedown(function(a){c.uniforms.iMouse.value.z=1}),$(document).mouseup(function(a){c.uniforms.iMouse.value.z=0});break;case"None":c.update=function(){};break;default:return console.error("update not recognised: "+c.settings.update),null}return c},createShaderLoader:function(){var a={};return a.vertexShader=!1,a.fragmentShader=!1,a.processVertex=function(b,c){a.vertexShader=b.responseText,a.fragmentShader&&a.callback(a.vertexShader,a.fragmentShader)},a.processFragment=function(b,c){a.fragmentShader=b.responseText,a.vertexShader&&a.callback(a.vertexShader,a.fragmentShader)},a.loadShaders=function(b,c,d){a.callback=d,$.ajax({url:"/shaders/"+b+".vertex.glsl",dataType:"text",complete:a.processVertex}),$.ajax({url:"/shaders/"+c+".fragment.glsl",dataType:"text",complete:a.processFragment})},a},scenePresets:function(a){return presets={normal3DScene:{render:{mode:"Loop"},camera:{type:"PerspectiveCamera",position:new THREE.Vector3(0,0,5),look:new THREE.Vector3(0,0,0),up:new THREE.Vector3(0,1,0),controls:"OrbitControls"},init:{object:"Cube",material:{type:"Color",color:16711680}},update:"None"},onlyShader:{camera:{controls:"None"},init:{object:"Plane",material:{type:"Shader",shader:{vertex:"default",fragment:"default"}}},update:"Default"}},$.extend(!0,{},presets[a])}};